# **KS4007 KS4008 Keyestudio Complete Starter for BBC Micro:bit**

**![](media/e2df9e000493ce5b45a71be46ddacb7f.jpeg)**

## 1. Description：

Micro:bit, half the size of a credit card, is a micro controller with ARM structure designed by BBC. It is mainly applied to programming education of teenagers, coming with an on-board Bluetooth, an accelerator, 3 buttons, an electronic compass and a 5 x 5 LED dot matrix.

To make starters grasp how to program by micro:bit boards, we launch this kit for them. Moreover, this kit consists of the commonly used resistors, LEDs, digital tubes, sensors and modules. A numerous of experimental courses are provided to guide you as well. We believe that you will enjoy playing with this micro:bit kit.

## 2. Kit List：

When we get the keyestudio Micro:bit premium learning kit, please check whether the listed components are all included.

(Note:kit KS4007 isn’t inclusive of a micro:bit board while kit KS4008 contains one)

|  #   |                       Name                       |              QTY               |                           Picture                            |
| :--: | :----------------------------------------------: | :----------------------------: | :----------------------------------------------------------: |
|  0   |            Micro:bit Main Board V2.0             | 0 for KS4007<br />1 for KS4008 |       ![img](media/wps255.jpg)![img](media/wps256.jpg)       |
|  1   |             Micro:bit T Type Shield              |               1                |                   ![img](media/wps257.jpg)                   |
|  2   |                     Red LED                      |               10               |       ![img](media/wps258.png)![img](media/wps258.png)       |
|  3   |                    Yellow LED                    |               10               |       ![img](media/wps260.png)![img](media/wps260.png)       |
|  4   |                    Green LED                     |               10               |       ![img](media/wps262.png)![img](media/wps262.png)       |
|  5   |                       RGB                        |               1                |                   ![img](media/wps264.jpg)                   |
|  6   |             Adjustable Potentiometer             |               1                |                   ![img](media/wps265.jpg)                   |
|  7   |                  Photoresistor                   |               3                | ![img](media/wps266.png)<br />![img](media/wps266.png)<br />![img](media/wps266.png) |
|  8   | Flame Sensor<br />（Infrared receiving triode）  |               1                |                   ![img](media/wps269.jpg)                   |
|  9   |            LM35DZ Temperature Sensor             |               1                |                   ![img](media/wps270.jpg)                   |
|  10  |                   S8050 Triode                   |               1                |                   ![img](media/wps271.jpg)                   |
|  11  |                   Tilt Switch                    |               2                |       ![img](media/wps272.png)![img](media/wps272.png)       |
|  12  |                  220Ω Resistor                   |               10               |                   ![img](media/wps274.png)                   |
|  13  |                   1KΩ Resistor                   |               10               |                   ![img](media/wps275.png)                   |
|  14  |                  10 KΩ Resistor                  |               10               |                   ![img](media/wps276.png)                   |
|  15  |                  2.4KΩ Resistor                  |               8                |                   ![img](media/wps277.png)                   |
|  16  |                   51Ω Resistor                   |               5                |                   ![img](media/wps278.png)                   |
|  17  |                  Active Buzzer                   |               1                |                   ![img](media/wps279.jpg)                   |
|  18  |                  Passive Buzzer                  |               1                |                   ![img](media/wps280.jpg)                   |
|  19  |                  Button Module                   |               4                | ![img](media/wps281.jpg)![img](media/wps281.jpg)![img](media/wps281.jpg)![img](media/wps281.jpg) |
|  20  |               1-Digit Tube Module                |               1                |                   ![img](media/wps285.jpg)                   |
|  21  |               4-Digit Tube Module                |               1                |                   ![img](media/wps286.jpg)                   |
|  22  |                  8*8 Dot matrix                  |               1                |                   ![img](media/wps287.jpg)                   |
|  23  |                  74HC595N Chip                   |               1                |                   ![img](media/wps288.jpg)                   |
|  24  |                   IR Receiver                    |               1                |                   ![img](media/wps289.jpg)                   |
|  25  |                IR Remote Control                 |               1                |                   ![img](media/wps290.jpg)                   |
|  26  |             L293D Motor Driver Chip              |               1                |                   ![img](media/wps291.jpg)                   |
|  27  |        ULN2003 Stepper Motor Drive Module        |               1                |                   ![img](media/wps292.jpg)                   |
|  28  |                Water Level Sensor                |               1                |                   ![img](media/wps293.jpg)                   |
|  29  |               Soil Humidity Sensor               |               1                |                   ![img](media/wps294.png)                   |
|  30  |                 MQ-2 Gas Sensor                  |               1                |                   ![img](media/wps295.jpg)                   |
|  31  |               5-wire Stepper Motor               |               1                |                   ![img](media/wps296.jpg)                   |
|  32  |               DS1302 Clock Module                |               1                |                   ![img](media/wps297.png)                   |
|  33  |   DHT11 Temperature <br />and Humidity Sensor    |               1                |                   ![img](media/wps298.png)                   |
|  34  |                PIR Motion Sensor                 |               1                |                   ![img](media/wps299.png)                   |
|  35  |               OLED Display Module                |               1                |                   ![img](media/wps300.jpg)                   |
|  36  |            HC-SR04 Ultrasonic Sensor             |               1                |                   ![img](media/wps301.png)                   |
|  37  |                 Joystick Module                  |               1                |                   ![img](media/wps302.jpg)                   |
|  38  |                   Micro Servo                    |               1                |                   ![img](media/wps303.jpg)                   |
|  39  |              1-channel Relay Module              |               1                |                   ![img](media/wps304.jpg)                   |
|  40  |                   Sound Sensor                   |               1                |                   ![img](media/wps305.jpg)                   |
|  41  |     Specialized Power Module for Breadboard      |               1                |                   ![img](media/wps306.jpg)                   |
|  42  |    DC Motor<br />（with 2 breadboard lines）     |               1                |                   ![img](media/wps307.png)                   |
|  43  |               6 AA Battery holder                |               1                |                   ![img](media/wps245.png)                   |
|  44  |                    Breadboard                    |               1                |                   ![img](media/wps246.jpg)                   |
|  45  |                 Breadboard Wire                  |               30               |                   ![img](media/wps247.jpg)                   |
|  46  |              40pins M-F DuPont Line              |               1                |                   ![img](media/wps248.jpg)                   |
|  47  | DC 5V Water Pump<br /> (with 2 breadboard wires) |               1                |                   ![img](media/wps249.png)                   |
|  48  |               Resistor Color Chart               |               1                |                   ![img](media/wps250.png)                   |
|  49  |                       Fan                        |               1                |                   ![img](media/wps251.jpg)                   |
|  50  |                Plastic Water Pipe                |               1                |                   ![img](media/wps252.jpg)                   |
|  51  |               2 AA Battery Holder                |               1                |                   ![img](media/wps253.jpg)                   |
|  52  |       1.5V AA Battery<br />(not included)        |               8                |                   ![img](media/wps254.jpg)                   |
|  53  |                    USB cable                     |               1                |                   ![img](media/wps64.jpg)                    |

## 3.Introduction

**( 1 )What is Micro:bit?**

Designed by BBC, Micro:bit main board aims to help children aged above 10 years old to have a better learning of programming.

It is equipped with loads of components,including a 5\*5 LED dot matrix, 2 programmable buttons, an electronic compass, a Micro USB interface and a Bluetooth module and others. Though it is just the size of a credit card, it boasts multiple functions. To name just a few, it can be applied in programming video games, making interactions between light and sound, controlling a robot,
conducting scientific experiments, developing wearable devices and make some cool inventions like robots and musical instruments, basically everything imaginable.

This new version, that’s version 2.0, of Micro:bit main board has a touch-sensitive logo and a MEMS microphone. And there is a buzzer built in the other side of the board which makes playing all kinds of sound possible without any external equipment. The golden fingers and gears added provide a better fixing of crocodile clips. Moreover, this board has a sleeping mode to lower the
power consumption of battery and it can be entered if users long press the Reset & Power button on the back of it. More importantly, the CPU capacity of this version is much better than that of the V1.5 and the V2 has more RMA.

In final analysis, the V2 Micro:bit main board can allow customers to explore more functions so as to make more innovative products.

**( 2 ) Comparison between V2.0 & V1.5**

![](media/ae1ddaa286548b2e6414a8284f85325d.png)

**Micro:bit main board V2.0**

![image-20230517104647191](media/image-20230517104647191.png)

**Micro:bit main board V1.5**

**More details:**

![](media/9cdd94349b69eaa1c7e810cdf0c5b850.png)

For the Micro: Bit main board V2, pressing the Reset & Power button , it will reset the Micro: Bit and rerun the program.If you hold it tight, the red LED will slowly get darker.When the power indicator flickers to darkness, releasing the button and your Micro: Bit board will enter sleep mode for power saving. This will make your battery more durable. And you could press this button again to ‘wake up’ your Micro:bit.

For more information,please resort to following links：

<https://tech.microbit.org/hardware/>

https://microbit.org/new-microbit/

https://www.microbit.org/get-started/user-guide/overview/

<https://microbit.org/get-started/user-guide/features-in-depth/>

**( 3 ) Pinout**

Micro:bit main board V2.0 VS V1.5

![](media/827b32e06f290b4aa4425c60b335d5b2.png)

![](media/b5770e594a2ddcd690e51700a17d5867.png)

Browse the official website for more details:

<https://tech.microbit.org/hardware/edgeconnector/>

<https://microbit.org/guide/hardware/pins/>

**( 4 )Notes for the application of Micro:bit main board V2.0**

1.  it is recommended to cover it with a silicone protector to prevent short circuit for it has a lot of sophisticated electronic components.
2.  its IO port is very weak in driving since it can merely handle current less than 300mA. Therefore, do not connect it with devices operating in large current,such as servo MG995 and DC motor or it will get burnt. Furthermore, you must figure out the current requirements of the devices before you use them and it is generally recommended to use the board together with a Micro:bit shield.
3.  It is recommended to power the main board via the USB interface or via the battery of 3V. The IO port of this board is 3V, so it does not support sensors of 5V. If you need to connect sensors of 5 V, a Micro: Bit expansion board is required.
3.  When using pins(P3、P4、P6、P7、P10)shared with the LED dot matrix, blocking them from the matrix or the LEDs may display randomly and the data about sensors maybe wrong.
3.  The battery port of 3V cannot be connected with battery more than 3.3V or the main board will be damaged.
3.  Forbid to use it on metal products to avoid short circuit.

To put it simple, Micro:bit V2 main board is like a micro computer which has made programming at our fingertips and enhanced digital innovation. And about programming environment, BBC provides a website: <https://microbit.org/code/,> which has a graphical MakeCode program easy for use.

## 4.Install Micro:bit driver

If you have downloaded micro:bit driver, then no need to download it again. If it is you first time to use micro:bit main board, then you will have to download the driver.

First of all, connect the micro:bit to your computer using a USB cable.

And enter website <https://www.dropbox.com/sh/w5mv8mvvufti0uj/AADTFPTV8NBN0IxQj_3TZ8ETa?dl=0> todownload the driver file of micro:bit![](media/9e9fd252ca43526df5827f535530fd53.png).

## 5.Instructions

The following instructions are applied for Windows system but can also serve as a reference if you are using a different system.

5.1 Write code and program

This chapter describes how to write program with the App Micro: Bit and load the program to the Micro: Bit main board V2.

You are recommended to browse the official website of Micro:bit for more details, and the link is attached below:

[https://microbit.org/guide/quick/](Https://microbit.org/guide/quick/)

**Step 1: connect the Micro: Bit main board V2 with your computer**

Firstly, link the Micro: Bit main board V2 with your computer via the USB cable.Macs, PCs, Chromebooks and Linux （including Raspberry Pi）systems are all compatible with the Micro: Bit main board V2.

Note that if you are about to pair the board with your phone or tablet, please refer to this link: <https://microbit.org/get-started/user-guide/mobile/>

![](media/f44b10aa08f2d5862499e7efed84e040.png)

Secondly, if the red LED on the back of the board is on, that means the board is powered. Then Micro: Bit main board V2 will appear on your computer as a driver named 'MICROBIT'. Please note that it is not an ordinary USB disk as shown below.

![](media/a2b53f93f4c24b81fc5cdb5986fd100d.png)

**Step 2: write programs**

View the link https://makecode.microbit.org/ in your browser;

Click ‘New Project’;

The dialog box‘Create a Project’ appears, fill it with ‘heartbeat’ and click‘Create √’to edit.

(If you are running Windows 10 system, it is also viable to edit on the APP MakeCode for micro:bit , which is exactly like editing in the website. And the link to the APP is :https://www.microsoft.com/zh-cn/p/makecode-for-micro-bit/9pjc7sv48lcx?ocid=badgep&rtc=1&activetab=pivot:overviewtab)

![](media/397bd09e4c2baf3c933857f3d0d1b83f.png)

![](media/5427d2c4fbb30ffdbce2fe9315244245.png)

Write a set of micro:bit code. You can drag some modules in the Blocks to the editing area and then run your program in Simulator of MakeCode editor as shown in the picture below which demonstrates how to edit ‘heartbeat’ program .

![](media/a6aa8681158ce5b64ffba50c1238f8c8.png)

**Step 3: download test code**

If your computer is Windows 10 and you have downloaded the APP MakeCode for micro:bit to write program, what you will have to do to download the program to your Micro: Bit main board V2 is merely clicking the ‘Download’ button, then all
is done.

If you are writing programs through the website, following these steps:

Click the ‘Download’ in the editor to download a "hex" file, which is a compact program format that the Micro: Bit main board can read.Once the hexadecimal file is downloaded, copy it to your board V2 just like the process that you copy the file to the USB driver. If you are running Windows system, you can also right-click and select ‘Send to → MICROBIT (E:) ‘to copy the hex file to the
Micro: Bit main board V2.

![](media/a81d4430eb152346d13bf67b2233b9db.png)

You can also directly drag the "hex" file onto the MICROBIT (E:) disk.

![](media/fe0f2de72ba0b38f00403f1aaef7f514.png)

![](media/b4f3602c0e192646f77b150e2acaf947.png)

During the process of copying the downloaded hex file to the Micro: Bit main board V2, the yellow signal light on the back side of the board flashes. When the copy is completed, the yellow signal light will stop flashing and remain on.

**Step 4: run the program**

After the program is uploaded to the Micro: Bit main board V2, you could still power it via the USB cable or change to via an external power. The 5 x 5 LED dot matrix on the board displays the heartbeat pattern.

![](media/672bfb4d87b938fc586a849bff0229fe.png)

Power via micro USB cable

![](media/d61a26d2f2367f0378974832f679efe1.png)

Power via external power（3V）

**Step 5：know about other programming languages**

This chapter has described how to use the Micro: Bit main board V2.

But except for the Makecode graphical programming introduced you can also write Micro: Bit programs in other languages. Go to the link: <https://microbit.org/code/> to know about other programming languages , or view the link: <https://microbit.org/projects/>, to find something you want to have a go.

5.2 Makecode：

Browse <https://makecode.microbit.org/> and enter Makecode online editor or open the APP MakeCode for micro:bit of Windows 10.

![](media/306e32b77a5dae6927b5dd0f6cf6f4f4.png)

Click“New Project”, and input“heartbeat”，then enter Makecode editor, as shown below:

![](media/c5d52e632549cae8e23944f8febe5a03.png)

There are blocks“on start”and“forever”in the code editing area.

When the power is plugged or reset,“on start”means that the code in the block only executes once, while“forever”implies that the code runs cyclically.

5.3.Quick Download

As mentioned before, if your computer is Windows 10 and you have downloaded the APP MakeCode for micro:bit to write programs, the program written can be quickly downloaded to the Micro: Bit main board V2 by selecting ‘Download’.

While it is a little more trickier if you are using a browser to enter makecode.However, if you use Google Chrome, suitable for Linux，macOS and Windows 10, the process can be quicker too.

We use the webUSB function of Chrome to allow the internet page to access the hardware device connected USB.

You could refer to the following steps to connect and pair devices.

**Device pairing**

Connect micro:bit to your computer by USB cable. Click“...”beside“Download”and click“Pair device”.

![](media/67061196ab9c8a7fd910ecc918729b0f.png)

Then click another“Pair device”as shown below.

![](media/0ffb7eb2548a11eab42ce54b86529dbe.png)

Then select ‘’BBC micro:bit CMSIS-DPA” and click “Connect”. If ‘’BBC micro:bit
CMSIS-DPA”does not show up for selection, please refer to:[https://makecode.microbit.org/device/usb/webusb/troubleshoot](https://makecode.microbit.org/device/usb/webusb/troubleshoot%20)

We also provide ![](media/7594a617a4e8ed7ee3a315bc196c41ad.png)in the resource link <https://fs.keyestudio.com/KS4007-4008>

What’s more, if you don’t know how to update the firmware of micro:bit, refer to the link: [https://microbit.org/guide/firmware/](https://microbit.org/guide/firmware/%20) or browse folder![](media/5f0399dca9e7d40e046ae72606bea28b.png)we provide.

![](media/79c7ba65a4537c456f6af6e437daa4f2.png)

Then click”Download”. The program is directly downloaded to Micro: Bit main board V2 and the sentence “Download completed!” appears.

![](media/ce919e72cca0b62ceaac7c86bda98499.png)

5.4 Resources and test code

Tools ,test code and other resources can be downloaded via the link <https://fs.keyestudio.com/KS4007-4008> and it contains following files:

![](media/f1d87f697a9587e39985bf3a83683cfc.png)

5.5 Input test code

We provide hexadecimal code files (project files) for each project.The file contains all the contents of the project and can be imported directly, or you can manually drag the code blocks to complete the program for each project. 

For simple projects, dragging a block of code to complete the program is recommended. For complex projects, it is recommended to conduct the program by importing the hexadecimal code file we provide.

Let's take the "Heatbeat" project as an example to show how to load the code.

Open the Web version of Makecode or the Windows 10 App version of Makecode.

![](media/ebc8f179f28ab520bc63944361d64d64.png)

Click “Import File”;

![](media/3358909f898dd9898923f72945613851.png)

![](media/ff66d0d78d170913676e361a62078faf.png)

Select“ ../Makecode Code/Project 1\_ Heart beat/Project 1\_ Heart beat.hex” . Then click “Go ahead”.

![](media/5e2a606ba3b867f27ae1cba0a5c2e45f.png)

![](media/b5f985386359a415c102d3deefecce53.png)

In addition to importing the test code file provided into the Makecode compiler above, you can also drag the the test code file provided into the code editing area of the Makecode compiler, as shown in the figure below:

![](media/538a17ebfe30d426c8dafd0f6d72287d.png)

After a few seconds, it is done.

![](media/7ba7cb9509e4ce2d5674eea793e28671.png)

Note: if your computer system is Windows7 or 8 instead of Windows 10, the pairing cannot be done via Google Chrome. Therefore, digital signal or analog signal of sensors and modules cannot be shown on the serial port simulator.

However, you need to read the corresponding digital signal or analog signal. So what can we do? You can use the CoolTerm software to read the serial port data of the micro:bit. Next chapter is about how to install CoolTerm.

5.6 CoolTerm Installation

CoolTerm program is used to read the data on serial port.

Download CoolTerm program:

<https://freeware.the-meiers.org/>

1.  After the download, we need to install CoolTerm program file, below is Window system taken as an example.
    
2.  Choose“win”to download the zip file of CoolTerm

3.  Unzip file and open it. (also suitable for Mac and Linux system)

![](media/97f831d38df9ee01dcfedac244bfe281.png)

![](media/e77548d01727e523e9e8c900d2fa962d.png)

（2）Double-click ![](media/5f29eed25fc16602cfc0716f047c2da1.png).

![](media/74fd81c83f0c0a26b4e299b93ce4ede4.png)

The functions of each button on the Toolbar are listed below:

<http://wiki.keyestudio.com/index.php/File:IDE.png>

![](media/70bebd79d7cd20336ae394c916500a28.png)

|                      ICON                       | FUNCTION                                        |
| :---------------------------------------------: | ----------------------------------------------- |
| ![](media/2b728375ed2b8cd288c884e553418001.png) | Open up a new Terminal                          |
| ![](media/5f972f2eac5050ca0107416b2be067c2.png) | Open a saved Connection                         |
| ![](media/be6f8b560e0afc447f9c32b4474f633f.png) | Save the current Connection to disk             |
| ![](media/52257d028694a313fc4eea4d9c2469d7.png) | Open the Serial Connection                      |
| ![](media/6ad366842b18084553a142ab82a613cf.png) | Close the Serial Connection                     |
| ![](media/8fa3ac342549d33b6c9aa5a9e4688bea.png) | Clear the Received Data                         |
| ![](media/c8d1dd8c3356b4938e143de1022e5842.png) | Open the Connection Options Dialog              |
| ![](media/36e13c266fd4b9723d9db40fe30cd203.png) | Display the Terminal Data in Hexadecimal Format |
| ![](media/b505c71c3344036730b1d67f0c62a354.png) | Display the Help Window                         |



## 6. Projects

(Note: project 1 to 12 will be conducted with the built-in sensors and LED dot matrix of the Micro:bit main board V2)

### Project 1: Heartbeat

![](media/8c3f540a07aab97e1608ba8770837f7b.png)

**( 1 )Project Description**

This project is easy to conduct with a micro:bit V2 main board, a Micro USB cable and a computer. The micro:bit LED dot matrix will display a relatively big heart-shaped pattern and then a smaller one. This alternative change of this pattern is like heart beating. This experiment serves as a starter for your entry to the programming world.

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3)Test Code:**

Attach the Micro:bit main board V2 to your computer via the Micro USB cable and begin editing.

Firstly, click”basic”module and find and drag the block “show icon![](media/7f3c9c08f2183fb823c913caaff8ad05.png) “ to module “forever”;

![](media/268c4192962d014a4c1b8314ec69df3c.png)

Secondly, click”basic”module again and find and drag the block “show icon ![](media/7f3c9c08f2183fb823c913caaff8ad05.png) “ to module “forever”and click the little triangle to select “show icon ![](media/f91a10f8f9df45e6a8fd1abe7136335d.png)”;

![](media/62465179fab8367566a3b6f7f9ba0ede.png)

Secondly, click”basic”module and find and drag the block”![](media/819ea8de6aaff6aabbacac019fa6c267.png)”to the code block and click the littler triangle to select 500;

Complete Program:

![](media/5709d4f3c96b9c49cb0b1a57e0b6aa6a.png)

Note: The “on start”means that the code in the block only executes once, while“forever”implies that the code runs cyclically.

Click“JS JavaScript”, you will find the corresponding programming languages.

![](media/b333d7f6ef6f9a8503639ed91a6aa9c4.png)

Click the little triangle”of JS JavaScript”to choose “Python”, you will find the corresponding Python programming languages.

![](media/16e9b55dc1c8de1ba147c778d1b29772.png)

**( 4 )Test Results:**

After uploading test code to micro:bit main board V2 and keeping the connection with the computer to power the main board, the LED dot matrix shows pattern “![](media/f496ba08ff8af3164cdbd5fc56cc5abb.png)”and then“![](media/04fdfc9060943954e7938bb1a741d626.png)”alternatively.

( Please refer to chapter 5.3 to know how to download test code quickly.)

If the downloading is not smooth, please remove the micro USB from the main board and then reconnect them and reopen Makecode to try again.

### Project 2: Light A Single LED

![](media/8c3f540a07aab97e1608ba8770837f7b.png)

**( 1 )Project Description:**

In this project, we intend to control a certain LED of the micro:bit main board V2 to shine.

The LED dot matrix consists of 25 LEDs arranged in a 5 by 5 square. In order to locate these LEDs quickly, as the figure shown below, we can regarded this matrix as a coordinate system and create two aces by marking those in rows from 0 to 4 from top to bottom, and the ones in columns from 0 to 4 from the left to the right. Therefore, the LED sat in the second of the first line is (1,0）and the LED positioned in the fifth of the fourth column is (3,4）and others likewise.

![](media/41c834c1592b4ecbec3066082c25f10b.png)

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3 )Test Code:**

Attach the Micro:bit main board V2 to your computer via the Micro USB cable and begin editing.

Firstly, click”Led”module and then the”more”module to find and drag the block “led enable false “ to block“on start”; click the little triangle of “led enable false “ to select”true”;

![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png)

Secondly, click”Led”module and to find and drag the block “toggle x 0 y 0“ to block“forever”and alter “x0” to”x1”;

![](media/70e6ac6cc25d9f0f313c670383c718dd.png)

Thirdly, click”Basic”module to find and drag the block”pause(ms)100”to “forever” block and set pause to 500;

![](media/b3cf902a00a442590d9e81b3d963b856.png)

Fourthly, copy the block ![](media/a19713fcfe99bbdc3b7d2448e42d3b47.png) and place it into forever” block;

![](media/6fa24a7c1348d775f70f3c3e65294091.png)

Fifthly, click”Led”module to find and drag the block”plot x 0 y 0”to “forever” block and change the “x 0 y 0” to “x 3 y 4”;

![](media/2d573bedbe650cae075dea31bfd509a4.png)

Sixthly, copy the block“pause(ms)500”and place it into forever”block;

![](media/14aa140cf450499f11035dc8313bd83c.png)

Lastly, click”Led”module to find and drag the block”unplot x 0 y 0”to “forever” block and change “x 0 y 0” to “x 3 y 4”;and copy and place the block“pause(ms)500”to block “forever”;

Complete Program:

![](media/523b04d16b1e2755b488b05a82c6da71.png)

Click”JS JavaScript”, you will find the corresponding programming languages.

![](media/d404ea8c36e1cb6da168bfd523842c38.png)

Click the little triangle”of JS JavaScript”to choose “Python”, you will find the corresponding Python programming languages.

![](media/792d7bcc0e502c5b708293314e168730.png)

**( 4)Test Results**

After uploading test code to micro:bit main board V2 and powering the main board via the USB cable, the LED in (1,0) lights up for 0.5s and the one in (3,4) shines for 0.5s and repeat this sequence.

### Project 3: LED Dot Matrix

![](media/8c3f540a07aab97e1608ba8770837f7b.png)

**( 1 )Project Description:**

Dot matrices are very commonplace in daily life. They have found wild applications in LED advertisement screens, elevator floor display, bus stop announcement and so on.

The LED dot matrix of Micro: Bit main board V2 contains 25 LEDs in a grid. Previously, we have succeeded in controlling a certain LED to light by integrating its position value into the test code. Supported by the same theory, we can turn on many LEDs at the same time to showcase patterns, digits and characters.

What’s more, we can also click”show icon“ to choose the pattern we like to display. Last but not the least, we can our design patterns by ourselves.

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3 )Test Code 1：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor.

1.  A. Enter“Led”→“more”→“led enable false”

2.  Click the drop-down triangle button to select“true”
    ![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png)

3.  Combine it with “on start” block

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“Led”to move“plot x 0 y 0”into“forever”，then replicate“plot x 0 y 0”for 8 times, respectively set to“x 2”y 0”,“x 2”y 1”,“x 2”y 2”,“x 2”y 3”,“x 2”y 4”,“x 1”y 3”“x 0”y 2”,“x 3”y 3”,“x 4”y 2”.

![](media/d44a44c5708aa9ea67a70220d3afde02.png)

Complete Program：

| ![](media/d44a44c5708aa9ea67a70220d3afde02.png) | “on start”: command block only runs once to start program.<br /><br />Turn on LED dot matrix.<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Toggle the LED brightness at coordinate point<br /> “x 2，y 0”, “x 2，y 1”, “x 2，y 2”, “x 2，y 3”, <br />“x 2，y 4”, “x 1，y 3”, “x 0，y 2”, “x 3，y 3”<br />and“x 4，y 2” |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/e622884ce3166197c2d103e8f1c246c3.png)

![](media/13dfbd0b44a8aedc68d294ae8429dd4f.png)

**( 4 )Test Results 1：**

Upload code 1 and power on , we will see the <img src="media/d4e278da768e447ed344d581e671f57a.png" style="zoom:33%;" /> icon.

**( 5 ) Test Code 2：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor.

1.  A. Enter“Basic”→“show number 0”block,

2.  Duplicate it for 4 times, then separately set to“show number 1”,“show number 2”,“show number 3”,“show number 4”,“show number 5”.

![](media/5b8bc5bbc3f5e84aeb19d4dc7d7d2ffd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Click“Basic”→“show leds”, then put it into“forever”block，tick blue boxes to light LED and generate“↓”pattern.

![](media/9c1ecc0a6db98f37533c9deec935b717.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

2.  Move out the block“show string” from“Basic”block, and leave it beneath the“show leds” block

![](media/3f638ac0f3f088a2adefa1ad17cea38a.png)

Choose“show icon”from“Basic”block, and leave it beneath the block“show string“Hello!”block

![](media/e989a69cc6fea0a3faa6c1f491b40e69.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Basic”→“show arrow North”;

B. Leave it into“forever”block，replicate“show arrow North”for 3 times，respectively set to“North East”,“South East”, “South West”,“North West”.

![](media/008c4281fabc99c159c52fcf4ab28bf2.png)

Click“Basic”to get block“clear screen”then remain it below the block “show arrow North West”。

![](media/94182fcc1ee9e1998ef16b2925ea082b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Drag“pause (ms) 100”block from“Basic”block and set to 500ms, then leave it below“clear screen”block.

![](media/e782704754471e5db06937017e5022d0.png)

Complete Program:

| ![](media/20fed03d66e92ef565333d6f060b1267.png) | “on start”: command block only runs once to start program.<br /><br />LED dot matrix displays 1,2,3,4,5<br /><br /><br /><br />Under the block “forever”，program runs cyclically.<br /><br />Dot matrix shows the“↓” pattern<br /><br />Dot matrix scrolls to show “Hello!”<br /><br />“❤”is shown on dot matrix<br /><br />LED dot matrix displays“North East”arrow.<br /><br />The“South East”arrow shows up on LED dot matrix<br /><br />The“South West”arrow appears up on LED dot matrix<br /><br />The“North West”arrow is displayed on LED dot matrix<br /><br />Clear the screen<br /><br />Delay in 500ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/6e1e2eb0fcadffe16d2bf3585b0d1a3c.png)

![](media/1940eb303d343670eb55f93feac98eeb.png)

**( 6 )Test Results 2：**

Upload code 2 and plug micro:bit to power. Micro: bit starts showing number 1, 2, 3, 4, and 5, then cyclically display<img src="media/d4e278da768e447ed344d581e671f57a.png" style="zoom:33%;" />,“Hello!”,<img src="media/66b31365d42274ef94ce9a3fcea1cd6c.png" style="zoom:33%;" />,<img src="media/39fe4029acb5fb675d875c58e382d148.png" style="zoom:33%;" />,<img src="media/45fcde65eb80a942d3903e400a346587.png" style="zoom:33%;" />,<img src="media/9e34fdb19d72918bde242994a3c94c1f.png" style="zoom:33%;" /> and <img src="media/2a45fca9d836ce38674c347c70c81e02.png" style="zoom:33%;" />patterns.



### Project 4: Programmable Buttons

![](media/06be84fb11b1fd07cd0cbb392132b903.png)

**( 1 )Project Description:**

Buttons can be used to control circuits. In an integrated circuit with a button, the circuit is connected when pressing the button and it is open the other way around.

Micro: Bit main board V2 boasts three buttons, two are programmable buttons(marked with A and B), and the one on the other side is a reset button. By pressing the two programmable buttons can input three different signals. We can press button A or B alone or press them together and the LED dot matrix shows A,B and AB respectively. Let’s get started.

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3 )Test Code 1：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor.

Delete“on start”and“forever”firstly，then click“Input”→“on button A pressed”

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Basic”→“show string”;

B. Then place it into“on button A pressed”block, change “Hello!”into“A”.![](media/aebeefcca33e544db91944881f0a9a68.png)

Copy code string![](media/aebeefcca33e544db91944881f0a9a68.png)once, tap the drop-down button“A”to select“B”and modify character“A”into“B”.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy![](media/aebeefcca33e544db91944881f0a9a68.png)once，and set to“on button A+B pressed”and“show string “AB”

![](media/3e8bde170db9e02e9cee36b3ede184b7.png)

Complete Code:

| ![](media/1ad59546b238e9644160019cdb102ee4.png) | Press button A on Micro: bit main board<br /><br />Show the character “A”<br /><br /><br />Press button B on Micro: bit main board<br /><br />Show the character “B”<br /><br /><br />Press button A and B at same time <br /><br />Display the character “AB” |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/be75eb65a7c910a7bacdf6d93d8b0fbd.png)

![](media/0f29282ce319400c9c99e2cf12d923ad.png)

**( 4 )Test Results 1：**

After uploading test code 1 to micro:bit main board V2 and powering the main board via the USB cable, the 5\*5 LED dot matrix shows A if button A is pressed, B if button B pressed, and AB if button A and B pressed together.

**( 5 ) Test Code 2：**

A. Click“Led”→“more”→“led enable false”,

B. Put it into the block“on start”，click drop-down triangle button to select“true” ![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png).

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Tap“Variables”→“Make a Variable...”→“New variable name：”

B. Enter“item”in the dialog box and click“OK”，then variable“item”is produced. And move“set item to 0”into“on start”block

![](media/a4d4a625424427a8f2d628db1f9417ae.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Input”→“on button A pressed”.

B. Go to“Variables”→“ change item by 1 ”

C. Place it into“on button A pressed”and 1 is modified into
![](media/81ec128a3a4bb86fed7d2f78bab20447.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Duplicate![](media/81ec128a3a4bb86fed7d2f78bab20447.png)code string once，click the drop-down button to select“B”，then set“change item by\-5”.

![](media/a53f0e6deb299ba15c494547dec19259.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Led”→“plot bar graph of 0 up to 0”

B. Keep it into“forever”block

C. Go to“Variables”to move“item”into 0 box，change 0 into 25.

![](media/3232608700bf086dd0474de156a9116d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Go to“Logic”to move out “if...true...then...”and “=”blocks，

B. Keep“=”into“true”box and set to “\>”

C. Select“item”in the“Variables”and lay it down at left box of “\>”，change 0 into 25；

D. Enter“Variables”to drag“set item to 0”block into“if...true..then...”, alter 0 into 25.

![](media/75a22c2c7eaf03a6d0ffaadf1d9f2fe9.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Replicate code string![](media/e0de4c7488b48605b292df5d3dd798dc.png)once

B.“\>” is modified into “\<” and 25 is changed into 0

C. Leave it beneath ![](media/e0de4c7488b48605b292df5d3dd798dc.png)code string.

![](media/678059d480a41d372a6b70175b5a3225.png)

Complete Program：

| ![](media/e2d7143ce59218e14780e9370d973c51.png) | “on start”: <br />command block runs once to start program.<br /><br />Turn on LED dot matrix<br />Set the initial value of item to 0<br /><br /><br />Press button A on Micro:bit board<br />Change item by 5<br /><br /><br />Press button B on Micro:bit board<br />Change item by -5<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Light on LED in dot matrix to draw bar graph, <br />light up up to 25 LED<br /><br />If item is greater than 25<br />Then set item to 25<br /><br />If item is less than 0<br />Then Set item to 0 |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/218f49da91ffe66505e02b95aa90e3ab.png)

![](media/cb8d123b524917e23262627ead7d0864.png)

**( 6 )Test Results 2：**

After uploading test code 2 to micro:bit main board V2 and powering the main board via the USB cable, when pressing the button A the LEDs turning red increase while when pressing the button B the LEDs turning red reduce.

### Project 5: Temperature Detection

![](media/206c8ec1c3f11d2de8d0f42fdf5b6b47.png)

**( 1 )Project Description:**

Actually ,the Micro:bit main board V2 is not equipped with a temperature sensor, but uses the temperature sensor built into NFR52833 chip for temperature detection. Therefore, the detected temperature is more closer to the temperature of the chip, and there maybe deviation from the ambient temperature.

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*

**( 3 )Test Code 1：**

Click“Advanced”→”Serial”→“serial redirect to USB”into“on start”

![](media/5a0d2d84faf536b085499dd620033d56.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to“Serial”→“serial write value“x”=0”into “forever”

![](media/ecd8b13acf1487bca8008d1c30e17540.png)

Click“Input” → “temperature(℃)” into“into serial write value“x”=0 and change”0”into “temperature”

![](media/bb18555e5ff99804f773b9baf2b8d503.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to“Basic”→“pause (ms) 100”into “forever”and set pause to 500

![](media/2a0738ba2404f9b64ce8b50fa4725544.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

![](media/15ad0652fad66bcbbe31444b39bb9f6e.png)

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/0e06ff4d4f32d9658caac48e83ed2313.png)

![](media/0b7524215e33833d0cdf4e1991fe6100.png)

**( 4 )Test Results 1：**

After uploading test code 1 to micro:bit main board V2, powering the main board via the USB cable, and clicking “Show console Device”, the data of temperature shows in the serial monitor page as shown below.

![](media/a4763cbc3f2ec740ccf244319118eb95.png)

![](media/17b07538d9b799819c21c579b3954d12.png)

If you're running Windows 7 or 8 instead of Windows 10, via Google Chrome won't be able to match devices. You'll need to use the CoolTerm serial monitor software to read data.

You could open CoolTerm software, click Options, select SerialPort, set COM port and baud rate to 115200 (after testing, the baud rate of USB SerialPort communication on Micro: Bit main board V2 is 115200), click OK, and Connect. 

The CoolTerm serial monitor shows the change of temperature in the current environment, as shown in the figures below :

![](media/b3a18bca1b2a7b5337470735e5a0c5aa.png)

![](media/f78128c148de3862a3fe10d86f063e22.png)

![](media/13238e98c31d620f4ffd7742dd71c78d.png)

![](media/43c0b63e21f6d5e701d603f5f38e530e.png)

**( 5 )Test Code 2：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor.

A. Go to“Led”→“more”→“led enable false”block,

B. Keep it into the“on start”block，tap the triangle button to select“true”.![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Tap“Logic”and drag“if...then...else”into“forever”block; and then drag “=” into “true”.

![](media/28c4cf38fbacb05ca0e457146767757d.png)

Enter“Input”to move“temperature(℃)”into the left side of “=”; click the little triangle of “=”to choose “≥”,and change the “0”to “35”

![](media/2b0e3775540415849bf36f7d118a8599.png)

Click“Basic”to find out block“show icon”and move it into“then”; copy and place the block“show icon”to “else”and click the little triangle of “<img src="media/a2c1fb5a5896c0755959c79c84b5ef83.png" style="zoom:50%;" />”to select“![](media/9fa58029eb504582ee5a915f591ea583.png)”

![](media/fee3bbacccaebb856bbf2cbbe95a82bf.png)

![](media/a2536414f3e82c03459965a3ba2a108f.png)

Complete Program：

![](media/75b4f8dfc29b2a45e718383972ff0dc4.png)

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/07a11e173c7be8b9c981620425412bc8.png)

![](media/873effbf1f6061c946208813bb6e48cc.png)

**(6) Test Results 2：**

After uploading the code 2, when the ambient temperature is less than 35℃, 5\*5LED will show<img src="media/4b1765e12b413dc5d562f2a16d32392f.png" style="zoom:33%;" />. When the temperature is equivalent to or greater than 35℃, the pattern<img src="media/f2705fbc4886efcfaac96589ca255f66.png" style="zoom:33%;" /> will appear.

### Project 6: Geomagnetic Sensor

![](media/24c31bb0174e2ac672203e5c36c6875e.png)

**( 1 )Project Description:**

This project aims to explain the use of the Micro: bit geomagnetic sensor, which can not only detect the strength of the geomagnetic field, but also be used as a compass to find bearings. 

It is also an important part of the navigation attitude reference system (AHRS). Micro: Bit main board V2 uses LSM303AGR geomagnetic sensor, and the dynamic range of magnetic field is ±50 gauss. In the board, the magnetometer module is used in both magnetic detection and compass.

In this experiment, the compass will be introduced first, and then the original data of the magnetometer will be checked. The main component of a common compass is a magnetic needle, which can be rotated by the geomagnetic field and point toward the geomagnetic North Pole (which is near the geographic South Pole) to determine direction.

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3 )Test Code 1：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor.

A. Click“Input”→“more”→“calibrate compass”

B. Lay down it into block“on start”.

![](media/f0973c3116eb4faf2d4ca138bd057d45.png)

A. Go to“Input”→“on button A pressed”.

B. Enter“Basic”→“show number”, put it into“on button A pressed”block;

C. Tap“Input”→“compass heading(℃)”， and place it into“show number”

![](media/0d9b5a65740d9406848d9a360635982b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](media/3dac0d4c18fe1334cb76de8a87bf150c.png)

Complete Program：

| ![](media/3dac0d4c18fe1334cb76de8a87bf150c.png) | ①“on start”: command block only runs once to start program.<br /><br />②Calibrate compass<br /><br />③Press button A on Micro:bit main board<br /><br />④Dot matrix shows the direction of compass heading |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/8256d56bb4bd7a0b17b03086a39af0cf.png)

![](media/d488c934b0cf0533d27e26f327a4f273.png)

**( 4 )Test Results 1：**

After uploading test code to micro:bit main board V2 and powering the board via the USB cable, and pressing the button A, the board asks us to calibrate compass and the LED dot matrix shows “TILT TO FILL SCREEN”. Then enter the calibration page. Rotate the board until all 25 LEDs are on red as shown below.

![](media/acf3b8c0dee027d9e555fc708831f874.jpeg)

After that, a smile pattern <img src="media/55ad39536dff7bdf66379a1da7a4c137.png" style="zoom:33%;" /> appears, which implies the calibration is done. When the calibration process is completed, pressing the button A will make the magnetometer reading display directly on the screen. And the direction north, east, south and west correspond to 0°, 90°, 180° and 270°.

**( 5 ) Test Code 2：**

![](media/c5f5e2d243a04c4a4bd0ba289f1e023f.png)

This module can keep readings to determine direction, so does point to the current magnetic North Pole by arrow.

![](media/d1a4e9f62bdf690ba809ae35c347b233.png)

For the above picture, the arrow pointing to the upper right when the value ranges from 292.5 to 337.5. 0.5 can’t be input in the code, thereby, the values we get are 293 and 338.

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor.


Enter“Input”→ “more”→“calibrate compass”

Move“calibrate compass”into“on start”

![](media/f0973c3116eb4faf2d4ca138bd057d45.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Variables”→“Make a Variable...”→“New variable name：”

B. Input“x”in the blank box and click“OK”, and the variable “x” is generated.

C. Drag out“set x to”into“forever”block

![](media/0ecd067449d3d52ce3ba751632129b54.png)

A. Go to“Input”→“compass heading(℃)”, and keep it into“0”box

![](media/a97f7ff675fc62533a9053b6c415652b.png)

Tap“Logic”→“if...then...else”, leave it below block“sex x to compass heading”, then click![](media/bf972b006ad6d05686352c4785e54994.png)icon for 6 times.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Place“and”into“true”block

B. Then move“=”block to the left box of “and”

C. Click“Variables”to drag“x”to the left “0”box, change 0 into 293 and set to “≥”;

D. Then copy“x≥293”once and leave it to the right “0”box and set to“x\<338”

![](media/cf2d8d1d74b5f485abd4843f92b52672.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Go to“Basic”→“show leds”

B. Lay it down beneath ![](media/6dbd99f5a6e4abe8ffd450d19b8a857b.png)block, then click“show leds”and the pattern<img src="media/eab025b80ef24f1d5351bd3e06221bad.png" style="zoom:33%;" />appears.

![](media/fe40fd39ae6abce0721d19cf86ef136d.png)

A. Duplicate ![](media/6dbd99f5a6e4abe8ffd450d19b8a857b.png)for 6 times.

B. Separately leave them into the blank boxes behind “else if”.

C. Set to“x≥23 and x\<68”,“x≥68 and x\<113 ”,“x≥113 and x\<158 ”,“x≥158 and x\<203 ”,“x≥203 and x\<248 ”,“x≥248 and x\<293 ”respectively.

D. Then copy “show leds”for 7 times and keep them below the “else if.......then” block respectively.

E. Click the blue boxes to form the pattern“<img src="media/4c73992fa4dfc6a2735b49ea8f000ed6.png" style="zoom:33%;" />”, “<img src="media/0771b8fd797a3e945a01ec1525ba4a9d.png" style="zoom:33%;" />”, “<img src="media/41eb716a282d52483e8467704613d034.png" style="zoom:33%;" />”, “<img src="media/2cae18294b329c10ecdefd768d6954e0.png" style="zoom:33%;" />”, “<img src="media/14b893d1a7157d72209b975d0df8d890.png" style="zoom:33%;" />”, “<img src="media/c362406f55115926523a0f60e16828b6.png" style="zoom:33%;" />”and “<img src="media/3977e13fdec2bfbc7fc55f5dce4969a9.png" style="zoom:40%;" />”.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

| ![image-20230517110404438](media/image-20230517110404438.png)<br />![image-20230517110412760](media/image-20230517110412760.png) | “on start”: command block only runs once to start program.<br /><br />Calibrate compass<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Store the angle of the compass heading into the variable x<br /><br />When 293≤x<338, the next program will be executed<br />![img](media/wps308.jpg) appears on the dot matrix<br /><br />When 23≤x<68, the next program will be executed<br />![img](media/wps309.jpg)is displayed on dot matrix<br /><br />When 68≤x<113, the next program will be executed<br />![img](media/wps310.jpg) is shown on dot matrix<br /><br />When 113≤x<158, the next program will be executed<br />![img](media/wps311.jpg)pattern appears |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Select “JavaScript" and “Python” to switch into JavaScript and Python language code:

![](media/30d1b51549f89fbb7036fc063e196545.png)

![](media/a2991eb3dad81a155a80f355d2c00d44.png)

![](media/a382ab785bd2b1a3157b48f35900c2f3.png)

![](media/f0e2faa8dab0f0b0353b7f5d5a946078.png)

**( 6 ) Test Results 2**

Upload code 2 and plug micro:bit to power. After calibration, tilt micro:bit board, the LED dot matrix displays the direction signs.



### Project 7: Accelerometer

![](media/24c31bb0174e2ac672203e5c36c6875e.png)

**( 1 )Project Description:**

The Micro: Bit main board V2 has a built-in LSM303AGR gravity acceleration sensor, also known as accelerometer, with a resolution of 8/10/12 bits. The code section sets the range to 1g, 2g, 4g, and 8g.

We often use accelerometer to detect the status of machines.

In this project, we will introduce how to measure the position of the board with the accelerometer. And then have a look at the original three-axis data output by the accelerometer.

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3 )Test Code 1：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor,

(1) A. Enter“Input”→“on shake”，

B. Click“Basic”→“show number”, place it into“on shake”block, then change 0 into 1.

![](media/b86b68744e64e4e9907ccb1fa0cb2af7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2) A. Copy code string ![](media/b86b68744e64e4e9907ccb1fa0cb2af7.png)for 7 times; separately click the triangle button to select“logo up”,“logo down”,“screen
up”,“screen down”,“tilt left”,“tilt right”and“free fall”, then respectively change 1 into 2, 3, 4, 5, 6, 7, 8.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

| ![](media/75e625fbae54fd3d76cf6c4967d87415.png)<br />![](media/3fc45754cb7a060d660212c5cb8c268f.png) | Shake the Micro:bit board<br />LED dot matrix displays 1<br /><br /><br /><br />The log is up  <br />LED dot matrix displays 2<br /><br /><br />The logo is down  <br />LED dot matrix displays 3<br /><br /><br />The screen is up<br />LED dot matrix displays 4<br /><br /><br />The screen is down<br />Number 5 is shown<br /><br /><br />The Micro:bit board is tilt to the left<br />Number 6 is displayed<br /><br /><br />The Micro:bit board is tilt to the right<br />Number7 is displayed<br /><br /><br />When the Micro:bit board is free fall<br />LED dot matrix shows 8 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Select “JavaScript" and “Python” to switch into JavaScript and Python language code:

![](media/d7acad76e22683cd2a048f6d3b34e348.png)

![](media/10ff8fafb7e6c5f983444f1a503bf921.png)

**( 4 )Test Results 1:**

After uploading the test code 1 to micro:bit main board V2 and powering the board via the USB cable, if we shake the Micro: Bit main board V2. no matter at any direction, the LED dot matrix displays the digit “1”.

When it is kept upright （its logo above the LED dot matrix）, the number 2 will show.

![](media/1600323e3e61e331c248cbeda5ccdcfc.jpeg)

When it is kept upside down( its logo below the LED dot matrix) , it will show as below.

![](media/3be80acf957e53117f695801ce19c449.jpeg)

When it is placed still on the desk, showing its front side, the number 4 appears.

![](media/5797dd7be9a9c2d3226123e0c29db0bd.jpeg)

When it is placed still on the desk, showing its back side, the number 5 will exhibit.

When the board is tilted to the left , the LED dot matrix shows the number 6 as shown below.

![](media/326095934bcff0a925b4f9a09d6cf7d2.jpeg)

When the board is tilted to the right , the LED dot matrix displays the number 7 as shown below

![](media/185b0ac204e9b2c54dd8fa93d852568c.jpeg)

When the board is knocked to the floor, this process can be considered as a free fall and the LED dot matrix shows the number 8. (please note that this test is not recommended for it may damage the main board.)

Attention: if you’d like to try this function, you can also set the acceleration to 3g, 6g or 8g. But still ,we don not recommend.

**( 5 )Test Code 2：**

A. Go to“Advanced”→“Serial”→“serial redirect to USB”

B. Drag it into“on start”

![](media/8c0cfdd76322ebf7febafa519e98b76f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Serial”→“serial write value x =0”

B. Leave it into“forever”block

![](media/1dcff6f8c61c0c7ac220ded584bcf988.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Input”→“acceleration(mg) x”；

B. Keep it into“0”box and capitalize the“x”

![](media/3f132064ad2081eabf6269eb4c0e698b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to“Basic”and move out“pause (ms) 100”below the block<img src="media/aa23874d61a27c3af5263746851f6fef.png" style="zoom:80%;" />, then set to 100ms.

![](media/98c688ae175b0c5eca6bed1d95f7b301.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Replicate code string<img src="media/c013533f2e3a02f26116f176ba6f975b.png" style="zoom:80%;" /> for 3 times and keep them into“forever”block，separately set the whole code string as follows:

![](media/3f93a35f05355e4258671dd1dee74e99.png)

Complete Program：

| ![](media/8ada9efbe6bd107c0db6d439835283f7.png) | “on start”: command block runs once to start program.<br />Serial redirects to USB<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Serial write value “X”=acceleration value on x axis<br />Delay 100ms<br />Serial write value “Y”=acceleration value on y axis<br />Delay 100ms<br />Serial write value “Z”=acceleration value on z axis<br />Delay 100ms<br />Serial write value “S”=acceleration value on s axis<br />Delay 100ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/9d9084241b78ccc5c4ca95efc475ff7a.png)

![](media/d0b7d9a245c64df98dae77ffc09f0a24.png)

**( 6 ) Test Results 2**

Upload test code to micro:bit main board V2, power the main board via the USB cable, and click “Show console Device”.

![](media/feb1d8c40c5ac88363223a162de2fa38.png)

After referring to the MMA8653FC data manual and the hardware schematic diagram of the Micro: Bit main board V2, the accelerometer coordinate of the Micro: Bit V2 motherboard are shown in the figure below:

![](media/6303a0ac122680207fe856d9be38d01c.png)

The following interface shows the decomposition value of acceleration in X axis, Y axis and Z axis respectively, as well as acceleration synthesis (acceleration synthesis of gravity and other external forces).

![](media/8bb6dd52d8d22db71f023bf5c811fd78.png)

If you're running Windows 7 or 8 instead of Windows 10, via Google Chrome won't be able to match devices. You'll need to use the CoolTerm serial monitor software to read data.

You could open CoolTerm software, click Options, select SerialPort, set COM port and baud rate to 115200 (after testing, the baud rate of USB SerialPort communication on Micro: Bit main board V2 is 115200), click OK, and Connect. The CoolTerm serial monitor shows the data of X axis, Y axis and Z axis , as shown in the figures below :

![](media/46d779cbd39f94325b5f68026486abed.png)

### Project 8: Light Detection

![](media/8c3f540a07aab97e1608ba8770837f7b.png)

**( 1 )Project Description:**

In this project, we focus on the light detection function of the Micro: Bit main board V2. It is achieved by the LED dot matrix since the main board is not equipped with a photoresistor.

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3 )Test Code：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor,

(1)A. Enter“Advanced”→“Serial”→“serial redirect to USB”;

B. Drag it into“on start”block.![](media/8c0cfdd76322ebf7febafa519e98b76f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2) A. Go to“Serial”→“serial write value x =0”;

B. Move it into“forever”![](media/1dcff6f8c61c0c7ac220ded584bcf988.png)

A. Click“Input”→“acceleration(mg) x”

B. Put“acceleration(mg) x”in the“0”box and change “x”into“Light intensity”.

![](media/38447eae9d3e190496b9a24baea6cbe7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Basic”→“pause (ms) 100”;

B. Lay it down into“forever”and set to 100ms.

![](media/9ba8558c0d520cc80b01080e437ddff5.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

| ![](media/1ae769b6a1d9f6c6a393351c69b10d32.png) | “on start”: command block runs once to start program.<br />Serial redirects to USB<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Serial write value “Light intensity”= light level<br />Delay in 100 ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/357c48b57b01692d622df106cd97aa21.png)

![](media/c548375e07c6576bf88c2b800209ef51.png)

**( 4 )Test Results:**

Upload the test code to micro:bit main board V2, power the board via the USB cable and click “Show console Device”.

![](media/55031fa509dd79088f84e12873331ed9.png)

When the LED dot matrix is covered by hand, the light intensity showed is approximately 0; when the LED dot matrix is exposed to light,the light intensity displayed gets stronger with the light as shown below.

![](media/11e06a7be799da89a618160183c95973.png)

The 20 in the code is an arbitrary value of light intensity. If the current light level is less than or equal to 20, the moon will appear on the LED dot matrix. If it's bigger than 20, the sun will appear.

If you're running Windows 7 or 8 instead of Windows 10, via Google Chrome won't be able to match devices. You'll need to use the CoolTerm serial monitor software to read data.

You could open CoolTerm software, click Options, select SerialPort, set COM port and baud rate to 115200 (after testing, the baud rate of USB SerialPort communication on Micro: Bit main board V2 is 115200), click OK, and Connect. The CoolTerm serial monitor shows the value of light intensity , as shown in the figures below :

![](media/b7b8a5af7fd7e74320a402117821a6d5.png)

### Project 9: Speaker

![](media/ac515b9ae8891dc32f368a29f194a2fb.png)

**( 1 )Project Description:**

The Micro: Bit main board V2 has an built-in speaker, which makes adding sound to the programs easier. We can program the speaker to air all kinds of tones ,such as playing the song, "Ode to Joy" .

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3 )Test Code：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor.

(1)  Enter“Basic”module to find “show icon”and drag it into “on start”block;

Click the little triangle to find “![](media/7f7aa904c35f83b61c7c560ad1e40d2a.png)”

![](media/fed4c4f6e66e6d53fa2d8e10f01268fd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2) Enter“Music”module to find and drug“play sound giggle until done” into “forever”block;

Enter“Basic”module to find and drug“pause(ms) 100” into “forever” block ;

Change 100 into 1000;

![](media/2a264656778216144131c75fabbbabf2.png)

( 3 ) Copy ![](media/39f8b940e6a1a3e8dbfa8eae70aa10c3.png) three times and place it into “forever” block ;

Click the little triangle to select “happy”,”hello”,”yawn”;

![](media/a8cee1c98866343f817d29e2ed97c584.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

![](media/ebd84db5c527208b9fa4c7bfd91c50a5.png)

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/984405217312d495104129a784ef76de.png)

![](media/99449615712dcb5903fe116a8255204b.png)

**( 4 )Test Results:**

After uploading the test code to micro:bit main board V2 and powering the board via the USB cable, the speaker utters sound and the LED dot matrix shows the logo of music.

### Project 10: Touch-sensitive Logo

![](media/644695850097c5ade080bb4848b4b481.png)

**( 1 )Project Description:**

The Micro: Bit main board V2 is equipped with a golden touch-sensitive logo, which can act as an input component and function like an extra button.

It contains a capacitive touch sensor that senses small changes in the electric field when pressed (or touched), just like your phone or tablet screen do. When you press it , you can activate the program.

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3 )Test Code：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor,

( 1 ) Delete block“on start”and“forever”;

( 2 )Enter“Input”module to find and drag“on logo pressed” ;

Click the little triangle to find “touched”’;

![](media/b228ddd2c400e6cc11be3a87636c27be.png)

( 3 ) Enter module “Variables”→choose“Make a Variable”→input “start”→click “OK”

The variable“start”is established;

Enter“Variables”module to find and drag “set start to 0” into “on logo touched”block;

![](media/f425f9f9545f2d8300fbb0c8946b9ea3.png)

( 4 )Enter“Input”module →click “more”→ find and drag“running time(ms)” into the “0”of“set start to 0”block;

![](media/7af1f7fa05580ed5d588daf80351182c.png)

( 5 )Enter“Basic”module to find and drag“show icon![](media/f496ba08ff8af3164cdbd5fc56cc5abb.png)” into “on logo touched”block;

![](media/931663a2485eca2baa411b43484e5cc3.png)

( 6 )Enter“Input”module to find and drag“on logo pressed”→choose “released”→ establish variable “time”;

Enter“Variables”module to find and drag “set time to 0”into “on logo pressed”block;

Enter“Math”module to find and drag “0-0”into the “0”of“set start to 0”block;

![](media/f2b9c02043be64c98da2e0ded2181082.png)

( 7 )Enter“Input”module→ “more” → find and drag “running time(ms)” into “0”on the left side of “0-0”;

Enter“Variables”module to find and drag“start” into “0”on the right side of “0-0”;

![](media/09e205a5774658821e5a988b63b39203.png)

( 8 )Enter“Basic”module to find and drag“show number” into “on logo released”block;

Enter“Math”module to find and drag“square root 0” into “0”; Click the little triangle to find”integer÷”;

![](media/5056fe4add2914acf570df6706ce0bb7.png)

( 9 ) Enter“Variables”module to find and drag“time” into “0”on the left side of “0-0”and change the “0”on the right side to”1000”;

![](media/a2247b14f9957f856485a927cfa7186e.png)

Complete Program：

![](media/bb847ad951cd721972d24fe0b90631a1.png)

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/15d6364778e29d2a05442c6cf01cc88d.png)

![](media/f63f0917317e2f8542961a88a5e6827f.png)

**( 4 )Test Results:**

After uploading the test code to micro:bit main board V2 and powering the board via the USB cable, the LED dot matrix exhibits the heart pattern when the touch-sensitive logo is pressed or touched and displays digit when the logo is released.

### Project 11: Microphone

![](media/7f0741158e734ff8449d5b87d5ba85f4.png)

**( 1 )Project Description:**

The Micro: Bit main board V2 is built with a microphone which can test the volume of ambient environment. When you clap, the microphone LED indicator will turn on. Since it can measure the intensity of sound, you can make a noise scale or disco lighting changing with music. The microphone is placed on the opposite side of the microphone LED indicator and in proximity with holes that lets sound pass.When the board detects sound, the LED indicator lights up.

**( 2 )Components Needed:**

-   Micro:bit main board V2 \*1

-   Micro USB cable\*1

**( 3 )Test Code 1：**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor.

( 1 ) Delete block“on start”and“forever”;

( 2 ) Enter“Input”module to find and drag“on loud sound”;

Enter“Basic”module to find and drag “show number”into “on loud sound”block ;

![](media/4fc47e876fa715d7e18b42f81aaf2f75.png)

( 3 )Copy ![](media/c7e2c46845a453f1de63b5e6f16af7fc.png) once;

Click the little triangle of “lond” to choose”quiet”;

Click the little triangle of “![](media/f496ba08ff8af3164cdbd5fc56cc5abb.png)” to choose”![](media/9a40d2f51ed0a372a82e559cdb2ca0dd.png)”;

![](media/2aa3293670d895afc772871026303399.png)

Complete Program：

![](media/b48689241988a3fda8de4e26ebd9a4ed.png)

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/e366483e9d5c574f3ec520f30e31e5cd.png)

![](media/fcba6eada2f29e11eee49a42987ab23e.png)

**( 4 )Test Results 1:**

After uploading test code to micro:bit main board V2 and powering the board via the USB cable, the LED dot matrix displays pattern“<img src="media/f496ba08ff8af3164cdbd5fc56cc5abb.png" style="zoom:50%;" />”when you claps and pattern ![](media/04fdfc9060943954e7938bb1a741d626.png) when it is quiet around.

**( 5 )Test Code 2:**

Link computer with micro:bit board by micro USB cable, and program in MakeCode editor.

( 1 )Enter“Advanced”module→ choose“Serial”to find and drag“serial redirect to USB ”into “on start”block ;

![](media/8c0cfdd76322ebf7febafa519e98b76f.png)

( 2 )Enter“Variables”module→ choose“Make a Variable”→ input “maxSound”→click “OK”,variable ”maxSound”is established;

Enter“Variables”module to find and drag“set maxSound to 0”into “on start”block ;

![](media/39347e31badf7d15710fc12f581ce7e1.png)

( 3 )Enter“Logic”module to find and drag“if true then...else”into “forever” block ;

Enter“Input”module to find and dragbutton A is pressed”into “then” ;

![](media/643d739679dd8891a240feda70868302.png)

( 4 )Enter“Basic”module to find and drag“show number”into “then” ;

Enter“Variables”module to find and drag“maxSound”into “0” ;

![](media/eff0b22497be40e1826bccef95ceb0a4.png)

( 5 )Establish variable“soundLevel”;

Enter“Variables”module to find and drag“set soundLevel to 0”into “else”;

Enter“Input”module to find and drag“sound level” into “0”;

![](media/c84fcdd7bfc4b545e420fa2d6a975bfe.png)

( 6 )Enter“Led”module to find and drag“plot bar graph of 0 up to 0” into “else”;

Enter“Variables”module to find and drag“soundLevel”into the“0”behind “of”;

Change the “0”behind “up” to “255”;

![](media/adc684949503c334c505157743fdbc7b.png)

( 7 )Enter“Logic”module to find and drag“if true then”into “else”block ;

Enter“Logic”module to find and drag“0 \> 0”into “then” ;

Enter“Variables”module to find and drag“soundLevel”into “0”on the left side of “0-0” ;

Enter“Variables”module to find and drag“maxSound” into “0” on the right side;

![](media/928f828756c965def348b56ef5299749.png)

( 8 )Enter“Variables”module to find and drag“set maxSound to 0”into the second “then” ;

Enter“Variables”module to find and drag“soundLevel”into the “0” ;

![](media/d62369e61dcc9dba69b80c93b1c7c7e8.png)

Complete Program：

![](media/c42455108c20d4ae51546957ab4198bb.png)

Select“JavaScript" and“Python”to switch into JavaScript and Python language code:

![](media/4e327f5f9ed716e6cf27cccba674f1c3.png)

![](media/e4adb50417583440e2620c1bb50528e1.png)

**( 6 )Test Results 2:**

Upload test code to micro:bit main board V2, power the board via the USB cable and click “Show console Device”as shown below.

![](media/e22507af4953df977269bbdb2463d69e.png)

When the sound is louder around, the sound value shows in the serial port is bigger as shown below.

![](media/50b81518d9f7925b0c20476ab1f64185.png)

What’s more, when pressing the button A, the LED dot matrix displays the value of the biggest volume( please note that the biggest volume can be reset via the Reset button on the other side of the board ) while when clapping, the LED dot matrix shows the pattern of the sound.

### Project 12: Bluetooth Data Reading

![](media/55b2424d88ba1ba8a711c49418ca8dc6.png)

**( 1 )Project Description:**

The Micro: Bit main board V2 comes with a nRF52833 processor (with built-in Bluetooth 5.1 BLE(Bluetooth Low Energy) device) and a 2.4GHz antenna for Bluetooth wireless communication and 2.4GHz wireless communication. With the help of them, the board is able to communicate with a variety of Bluetooth devices, including smart phones and tablets.

In this project, we mainly concentrate on the Bluetooth wireless communication function of this main board. Linked with Bluetooth, it can transmit code or signals. To this end, we should connect an Apple device (a phone or an iPad) to the board.

Since setting up Android phones to achieve wireless transmission is similar to
that of Apple devices, no need to illustrate again.

**( 2 ) Preparation**

- Attach the Micro:bit main board V2 to your computer via the Micro USB cable.
- An Apple device (a phone or an iPad) or an Android device;


**( 3 ) Procedures:**

For Apple devices, enter this link <https://www.microbit.org/get-started/user-guide/ble-ios/> with your computer first, and then click “Download pairing HEX file”to download the Micro: Bit firmware to a folder or desk, and upload the downloaded firmware to the Micro: Bit main board V2.

![](media/cfaf7f8ae83cbe2636c39162a78adc7f.png)

![](media/6c1cef08d31fe3c4876b90ecc11554ff.jpeg)

![](media/63f1faf124af4949b31d7a84cee19a92.png)

Search “micro bit”in your App Store to download the APP micro:bit.

![](media/66d1f34d8d4c52e2b7c0ce10e602a063.png)

Connect your Apple device with Micro: Bit main board V2:

Firstly, turn on the Bluetooth of your Apple device and open the APP micro:bit to select item “Choose micro:bit” to start pairing Bluetooth.

Please make sure that the Micro: Bit main board V2 and your computer are still linked via the USB cable.

![](media/34f5fbb1c0c371970d1aec6c59c5cbb5.png)

Secondly, click “Pair a new micro:bit”;

![](media/e20270a0ade9c00b61198b26fc2fd83b.png)

Following the instructions to press button A and B at the same time(do not release them until you are told to) and press Reset & Power button for a few seconds.

Release the Reset & Power button, you will see a password pattern shows on the LED dot matrix. Now , release buttons A and B and click Next.

![](media/c00520400ecd1f20f958c1c6d1a3c907.png)

![](media/cabc60d7f8a030f5c9d86ac7de6c7bd7.png)

Set the password pattern on your Apple device as the same pattern showed on the matrix and click Next.

![](media/9411a5280e6f3b0d45306a31f80c1b38.png)

Still click Next and a dialog box props up as shown below. Then click "Pair". A few seconds later, the match is done and the LED dot matrix displays the "√" pattern.

![](media/f72e83dc6276d520e82c349659106e1a.png)

After the match with Bluetooth, write and upload code with the App.

Click “Create Code” to enter the programming page and write code.

Click <img src="media/f3e9cc7884f7bba807fa4633c429422b.png" style="zoom:50%;" /> and the box ![](media/e081360be7c91b7a156b01a787e4a58c.png) appears, and then select “Create √”.

![](media/d54bf2d1c01cd3c18544009b1f9dc5a0.png)

![](media/4e7a5d06a5f9a5a209ef5fbc005e9f62.png)

![](media/5bd84e8d293bf8c0c999c7f4e756cf30.png)

![](media/bd19bb4c97ad2a5bc300412b8eb93ede.png)

Name the code as “1 “and click ![](media/a32c2d832ab38d19eb623108143c744e.png) to save it.

![](media/25cf76f891c5eac7381b8095363a2748.png)

Click the third item“Flash”to enter the uploading page. The default code program for uploading is the one saved just now and named "1" and then click the other "Flash" to upload the code program "1".

![](media/c1661720ea2eaa521ff31a778501eb23.png)

![](media/350abcbb09d431d40427f34c3764f2eb.png)

![](media/4863bf826f119805a6a9bf9c12d5ec81.png)

If the code is uploaded successfully a few seconds later, the App will emerge as below and the LED dot matrix of the Micro: Bit main board V2 will exhibit a heart pattern.

![](media/ebfd31347a0553de0be4e01636652a15.png)

Projects below all conduct with the built-in sensors and the LED dot matrix while the following ones will carry out with the help of external sensors.

 **(Attention: to avoid burning the the Micro:bit main board V2, please remove the USB cable and the external power from the board before fix it with a T-shaped shield; likewise, the USB cable and the external power should be cut from the main board before disconnect the shield from the board.)**

### Project 13：LED Blinks

1.  **Description：**

Making LED blink is one of the primary project. We used to control the LEDs of the dot matrix built in the micro:bit board to flash. But in this lesson, we plan to link the board with an external LED and control it. Thus, we also need to block the dot matrix when we conduct this experiment.

2.  **LED（light-emitting diode）：**

![](media/a0ebee62d4cc660e16d4a39c4fe02850.png)

![](media/2024c5664818309253e93c2333ab9306.png)

LED is a type of semiconductor called "Light Emitting Diode "which is an electronic device made of semiconductor materials (silicon, selenium, germanium, etc.). 

It features unidirectional conductivity, that is, the positive voltage is applied to the anode (long leg) and the cathode (short leg) of the diode. when the voltage of its anode is higher than the voltage of its cathode, thus, the diode is turned on(LED is on). When a reverse voltage is applied to the anode and cathode, the diode is disconnected(that is, the LED is off). 

Therefore, the disconnection and connection of the diode is equivalent to turning on and off LED. Light-emitting diodes have an anode (+) and a cathode (-), and they can only allow current to flow from one anode to the cathode. The components will be damaged if LED is directly connected to the power supply. It’s essential that a certain resistor must be connected in series in the LED circuit.

**3. Resistor**

Resistor is the electronic component in the circuit, which limits and regulates current flow. Its unit is (Ω). 1 mΩ= 1000 kΩ，1kΩ= 1000Ω.

![image-20230517112140883](media/image-20230517112140883.png)

It is used to protect the sensitive elements, like LED. The color ring on its body represents a number. You could follows the resistor color chart.

<img src="media/8aeaf2bcb08bb1a52d223bf0d2d20a5c.png" alt="电阻-1K 10K
220R" style="zoom: 33%;" />

![](media/49b0d9908b030ea77386c726ebc30f7b.png)

Under the same voltage, there are smaller or higher current.

The relationship between current, voltage, and resistor can be expressed by the formula: I=U/R. In the figure below, the current flowing through R1: I = U / R = 3 V / 10 KΩ = 0.000 3A = 0.3mA.

![](media/b3eec552e4dfad361833730698621776.png)

Don’t connect resistor with low resistance to the ends of power, which will damage electronic components due to high current. There is no difference of positive or negative poles for resistors.

**4. Breadboard**

Breadboard is the essential tool in building circuit. The reasonable use of breadboard highly boost the efficiency.

Firstly, let’s the basic knowledge of breadboard.

![](media/3919e26b350dfa838bd22425c97550d8.jpeg)

A breadboard is used to build and test circuits quickly before finalizing any circuit design. The breadboard has many holes into which circuit components like ICs and resistors can be inserted. A typical breadboard is shown below:

![](media/079e74208ca277290d6e55b7d7cfb829.png)

The bread board has strips of metal which run underneath the board and connect the holes on the top of the board.The metal strips are laid out as shown below. Note that the top and bottom rows of holes are connected horizontally while the remaining holes are connected vertically.

![](media/349c42b5651bf6045d3f032879699ff8.png)

To use the bread board, the legs of components are placed in the holes. Each set of holes connected by a metal a strip underneath forms anode.

A node is a point in a circuit where two components are connected. Connections between different components are formed by putting their legs in a common node.

The long top and bottom row of holes are usually used for power supply connections. The rest of the circuit is built by placing components and connecting them together with jumper wires.

ICs are placed in the middle of the board so that half of the legs are on side of the middle line and half on the other.

**5. Components List:**

| Micro:bit Main board\*1                                      | keyestudio Micro:bit T type shield                           | Red LED\*1                                                   | Micro USB cable\*1                                           |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![image-20230517112901520](media/image-20230517112901520.png) | ![image-20230517112906082](media/image-20230517112906082.png) | ![image-20230517112911231](media/image-20230517112911231.png) | ![image-20230517112918510](media/image-20230517112918510.png) |
| 220Ω Resistor\*1                                             | Breadboard\*1                                                | Breadboard wire                                              |                                                              |
| ![image-20230517112924981](media/image-20230517112924981.png) | <img src="media/f32f93059a62afc627fa558417bdbdae.png" style="zoom: 25%;" /> | <img src="media/172e3c00f7c2fa2e068f1162c254a915.png" style="zoom: 50%;" /> |                                                              |

6.  **Schematic Diagram：**

<img src="media/3e86c06eaac1925e893000749013742d.png" style="zoom:50%;" />

7.  **Wiring graph：**

![](media/579f258a01072c9b6feef9d1f346d932.png)

8.  **Test Code：**

Wire up in the terms of the above graph, LED is linked with P9, and power on.

A. Click“Led”→“more”→“led enable false”;

B. Place it into“on start”block

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Advanced”→“Pins”，

B. Select“digital write pin P0 to 0”and leave it into“forever”block.

![](media/615af77e1a0a8aa25f07c3df2287e20b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Set P9 because LED is attached to P9, and change 0 into 1.

![](media/5b0537024a0b4fa7538fb7717451939a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Basic”→“pause (ms) 100”;

B. Lay it down into“forever”block and set to 1000ms.![](media/82d59fecc6c8b1088c506e9c7accd9b5.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy![](media/ea7c7581287b0f9553ecf7cfa945ef55.png)once and alter 1 into 0(turn off LED). Then put it down below the“pause(ms)1000”.

![](media/9732602d0d91b5d86dcc6113ab3d9842.png)

Complete Program：

| ![](media/899c8ad9ae5174e76219a56a3ec41a0f.png) | “on start”: command block runs once to start program.<br /><br />Turn off all LEDs dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set P9 to high level(1) to light on LED<br /><br />Set P9 to low level(0) to go off LED<br /><br />Delay in 1000ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", the corresponding JavaScript code is shown below:
![](media/42c58cd2b5f64691fd6df87e1f2b1cfa.png)

Then click drop-down triangle button and select“Python”to view the Python language code.

![](media/724d303dbbd311a8cdb9d649b23153af.png)

9.  **Test Results：**

Upload code and power on, the external LED flashes at 1s interval.

10.  **Extension Project：**

Connect LED to P2 and make LED flicker at 0.5s interval.

![](media/3c02df2f88887693d3dd84fa1c283ca4.png)

### Project 14： Traffic Light

1.  **Description：**

Traffic lights are closely related to people's daily lives.    In the process of learning Micro:bit board, we often use three external red, green and yellow LED circuits to simulate the roadside traffic lights. They traffic light is generally composed of red, yellow, and green (green is blue and green) lights, which is used to govern the traffic. 

There are two types of traffic lights, the one is for motor vehicles are called motor vehicle lights. Another one is the pedestrian crossing lights.

When the green light is on, vehicles are allowed to pass. When the yellow light is flashing, which warns that the signal is about to change to red, with some jurisdictions requiring drivers to stop if it is safe to do so, and others allowing drivers to go through the intersection if safe to do so. When the red light is on, vehicles should stop then proceed when safe.

2.  **Components List:**

| Micro:bit Mainboard\*1                                       | keyestudio Micro:bit T type shield                           | Red LED\*1                                                   | Yellow LED\*1                                                | Green  LED\*1                                                |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![image-20230517113402867](media/image-20230517113402867.png) | ![image-20230517113408376](media/image-20230517113408376.png) | ![image-20230517113358131](media/image-20230517113358131.png) | ![image-20230517113342324](media/image-20230517113342324.png) | ![image-20230517113350301](media/image-20230517113350301.png) |
| 220ΩResistor\*3                                              | Breadboard\*1                                                | Breadboard wire                                              | Micro USB cable\*1                                           |                                                              |
| ![image-20230517113413861](media/image-20230517113413861.png) | ![image-20230517113420726](media/image-20230517113420726.png) | ![image-20230517113423798](media/image-20230517113423798.png) | <img src="media/b5c263347e4d6c6513d4020f4a4e91e8.jpeg" style="zoom:33%;" /> |                                                              |



**3. Schematic Diagram：**

<img src="media/6c0bc9358832c650293d2b5afa5b53b2.png" style="zoom:50%;" />

**4. Wiring Graph：**

![](media/8c8ec0c97d46892d8ef391a2d5ff96b9.png)

**5. Test Code：**

Hook the components up in compliance with the above diagram, separately connect green LED, yellow LED and red LED to P6, P4 and P2.

Click “Led”→”more”→“led enable false”；

Combine it with“on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“Advanced”→“Pins”→“digital write pin P0 to 0”into“forever”，and set to“digital write pin P6 to 1”.

![](media/7b64c1dfa94b9272d72ba1c2bcecd4cb.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to“Basic”to drag out“pause (ms) 100”into“forever”block set to 500ms.

![](media/f510b96d00571656023d57a42bc4efeb.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Replicate“digital write pin P6 to 1”once and put it beneath the“pause(ms)5000”block，alter 1 into 0.

![](media/ec52ced608c84ba1d3197aafb23cdcc5.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Tap“Loops”to select“repeat 4 times do”and lay it down below the“digital write pin P6 to 0”block :

![](media/1141fa898231361dd249c71ff87ef196.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
Duplicate“pause (ms)5000”and ![](media/928d6643067296153ae29902ec46eefe.png)

once again and keep them into“repeat 4 times do”. Yellow LED is linked with P4 and blinks 3 times, so set code string as follows:

![](media/198423e53c25d2c7b30dd3d0d4d9896c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy ![](media/e473ef90c3b0d818d49441d4894d39ac.png)code string once, and set to P2, change the last 500 into 5000.

![](media/1ed5a50bcff547da5e6148641122cd7d.png)

Complete Program：

| ![](media/4fdd920a238edf99b4fc0bf38bfb5dda.png) | “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set P6 to high level(1), make green LED on<br />Delay in 5000ms<br /><br />Set P6 to low level(0), make green LED off<br />Repeat 3 times under “do” block<br /><br />Set P4 to high level(1), light on yellow LED<br />Delay in 500ms<br /><br />Set P4 to low level(0), turn off green LED<br /><br />Set P2 to high level(1), turn on yellow LED<br />Delay in 5000ms<br /><br />Set P2 to low level(0), turn off red LED |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript" to check the corresponding JavaScript code:

![](media/16dca2c0c36c9f60119a6fa29bbec9a3.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/034519117b1d83b84e13e66f3e726d7e.png)

6.  **Test Results：**

Upload code and power on, the green LED is on for 5s then goes off, next, yellow LED blinks for 3 times and red LED lights up for 5s then goes off, cyclically.

7.  **Extension Project：**

Simulate the traffic light, make green LED light up for 5s, then flicker for 3s and finally light on red LED.

![](media/38413c7d55544414df6dcb51f061f1d7.png)

### Project 15：Flow Light

1.  **Description：**

Flow light, also called advertisement lights, emits light like flowing water.

In this project, we just need to add more LEDs and control the order and time to perform the phenomenon of flow light.

2.  **Component List:**

| Micro:bit Main board\*1  | keyestudio Micro:bit T Type Shield | Red LED\*6                                                   | Micro USB cable\*1       |
| ------------------------ | ---------------------------------- | ------------------------------------------------------------ | ------------------------ |
| ![img](media/wps312.jpg) | ![img](media/wps313.jpg)           | ![img](media/wps314.jpg)                                     | ![img](media/wps315.png) |
| 220Ω Resistor\*6         | Breadboard\*1                      | Breadboard wires                                             |                          |
| ![img](media/wps316.jpg) | ![img](media/wps317.jpg)           | ![image-20230517113948691](media/image-20230517113948691.png) |                          |

3.  **Schematic Diagram：**

<img src="media/51598c82a4dfca606b9a1e9d04305e0c.png" style="zoom:67%;" />

4.  **Wiring Graph：**

![](media/6c63da7a3916c0c3da3a52202d100f13.png)

**5. Test Code：**

According to the above graph, 6 red LEDs are respectively attached to P2, P3, P4, P5, P6 and P7, enter Micro: bit online programming too to design code:

1.  Click “Led”→”more”→“led enable false”;

2.  Combine it with “on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter “Advanced”→“Pins”→“digital write pin P0 to 0”

B. Drag it into“forever”and set to “digital.....P7 ...to 1”.

![](media/906b984ea28f660fd0f26d0fe45c16cc.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to“Basic”to drag out“pause (ms) 100”below the block digital.....P7 ...to 1”, then set to 500ms.

![](media/dda0a6dec08a22887e4a93705f87c562.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy code string![](media/e64ddd0b7c708b7f28d78da373b67f06.png)for 5 times and, put it down into“forever”，separately set to P6, P5, P4, P3 and P2.

Then duplicate code string![](media/528e1878f51fff9bf43b17428a9d801b.png)once, change 1 into 0.

Complete Program：

| ![](media/ddd4864c680e535224e285c5b9ec3e1a.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set P7, P6, P5, P4, P3 and P2 to high level(1), <br />make 5 red LEDs on.<br /><br />The delay time is 500ms. <br />And every LED lights turns on at interval of 500ms.<br /><br />Set P7, P6, P5, P4, P3 and P2 to LOW level(0), <br />make 5 red LEDs OFF, <br />and every LED lights turns off at interval of 500ms. |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click “JavaScript" to look through the corresponding JavaScript code:

![](media/b7e88fd24fcce5dd611857035c126904.png)

Then click the triangle button and select“Python”and check the Python language code:

![](media/99ee83224a1bf2d131036f4135fbe252.png)

6.  **Test Results：**

Upload code and power on, the external LED lights up one by one, then gets dark orderly.



### Project 16： Breathing Light

1.  **Description：**

In the previous lesson, we control LEDs on and off and make them blink.

In this project, we will control LED brightness through PWM to simulate breathing effect. Similarly, you can change the step length and delay time in the code so as to demonstrate different breathing effect.

PWM is a means of controlling the analog output via digital means. Digital control is used to generate square waves with different duty cycles (a signal that constantly switches between high and low levels) to control the analog output. 

In general, the input voltage of port are 0V and 5V. What if the 3V is required? Or what if switch among 1V, 3V and 3.5V? We can’t change resistor constantly. For this situation, we need to control by PWM.

For the Arduino digital port voltage output, there are only LOW and HIGH, which correspond to the voltage output of 0V and 5V. You can define LOW as 0 and HIGH as 1, and let the Arduino output five hundred 0 or 1 signals within 1 second.

If output five hundred 1, that is 5V; if all of which is 1, that is 0V. If output 010101010101 in this way then the output port is 2.5V, which is like showing movie. The movie we watch are not completely continuous. It actually outputs 25 pictures per second. In this case, the human can’t tell it, neither does PWM. If want different voltage, need to control the ratio of 0 and 1. The more 0,1 signals output per unit time, the more accurately control.

![](media/704984700612966b997127cb9bde5c96.jpeg)

Pulse width modulation (PWM) has many applications: lamp brightness adjustment, motor speed adjustment, sound generation, etc. The following are the three basic parameters of PMW:

<img src="media/b14db369936f55eef1dd18b050682a10.png" style="zoom:33%;" />

(1) Amplitude of pulse width (minimum/maximum)  

(2) Pulse period (the reciprocal of pulse frequency within 1 second)  

(3) Voltage level (for example: 0V-3V)  

(4) Micro: There are 6 PMW interfaces , namely digital pins P0, P1, P2, P3, P4 and P10.

In this program, we connect red LED to P0 of micro:bit motherboard. And P0 can be input port as well. We could control LED brightness through P0 port. The LED will get bright gradually then dark, alternately, which looks like human breath.

2.  **Components List:**

| Micro:bit Main board\*1  | keyestudio Micro:bit T type shield | Red LED\*1               | Breadboard wire          |
| ------------------------ | ---------------------------------- | ------------------------ | ------------------------ |
| ![img](media/wps318.jpg) | ![img](media/wps319.jpg)           | ![img](media/wps320.jpg) | ![img](media/wps321.jpg) |
| 220Ω Resistor\*1         | Breadboard\*1                      | Micro USB cable\*1       |                          |
| ![img](media/wps322.jpg) | ![img](media/wps323.jpg)           | ![img](media/wps324.png) |                          |

3.  **Schematic Diagram：**

<img src="media/649c565636e7fcd6739fd366e58805e2.png" style="zoom:50%;" />

4.  **Wiring Graph：**

![](media/c37f86252c5ee45468a287a7e2cbc66f.png)

**5. Test Code：**

From the above diagram, LED is connected to P0. Open the Micro:bit online programming tool.

(1)A. Click “Led”→”more”→“led enable false”;

B. Combine it with“on start”.![](media/d380f77697920f174fb819fce502f651.png)

(2) Go to“Loops”to move “while..true...do”into block“forever”. Then click“Logic”to drag“=”into“true”box.

![](media/834cd6007f45870a01d130f1eb05d297.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) Click “Variables”→“Make a Variable...”→“New variable name：”box，input“brightness”in dialog box and tick“OK”，then the
variable“brightness”is produced. Lay down“brightness”to the left box of “=”，change “0”into “1024”，“=”into“\<”.

![](media/0b6ea583e713be774add648de507fc7e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4) A. Follow the above method to create variable“set brightness to 0”, and put it down into“do”block.

B. Enter“Math”to get“+”block and move it into“0” box ，

C. Move out variable“brightness”again into the left“0” box of block “+”, then alter 0 into 1.

![](media/b93f0ce21020cf32e56711005584d4d4.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) A. Go to“Advanced”→“Pins”→“analog write pin P0 to 1023”;

B. Keep it beneath the“set...brightness...1”block, then replace 1023 with“brightness”. 

![](media/f6cc73ca1f7a149387bce72e01426eae.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to “Basic” to drag out “pause (ms) 100”into“while...do”block set to 5ms.

![](media/b5917ee00e1bdf3a80b3cb2050a09843.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy the code string![](media/2900771fe579f9b7880f9bfe82bdd99d.png)once and place it into “do” block. Change“\<”into“\>”, 1024 into 0，“+”into“-”.

![](media/80edf274478124711d90ee2e7593a5b9.png)

Complete Program：

| ![](media/ecbcbbc3192df66241ec0e2bf71209c0.png) | “on start”: command block runs <br />once to start program.<br /><br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” <br />runs cyclically.<br /><br />When brightness<1024, <br />the program in the “do” block will be executed<br />Delay in 5ms<br /><br />When brightness>0, <br />the program in the “do” block will be executed<br />Delay in 5ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will see the corresponding JavaScript code:

![](media/2eb12dde3727346a7f69d29657d57d0f.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/3921a9ebe118e4f2f4f006025ddc92be.png)

6.  **Test Results：**

Hook up via connection diagram, upload the code and plug in power. The external LED lights up gradually then gets dark, alternately, which looks like human breath.

7.  **Extension Project：**

The some LED on 5\*5 dot matrix shows the breathing light effect.

![](media/7dbc4534fda281aacd4dc5bceebe6d82.png)

### Project 17： RGB

1.  **Description：**

![](media/704c9b86d805a1e6dc3a21d42bf15b24.jpeg)

The RGB color mode is a color standard in the industry. It obtains various colors by changing the three color channels of red (R), green (G), and blue (B) and integrating them. RGB denotes the three colors of red, green and blue.  

The monitors mostly adopt the RGB color standard, and all the colors on the computer screen are composed of the three colors of red, green and blue mixed in different proportions. A group of red, green and blue is the smallest display unit. Any color on the screen can be recorded and expressed by a set of RGB values.

Each of the three color channels of red, green, and blue is divided into 256 levels of brightness. At 0, the "light" is the weakest-it is turned off, and at 255, the "light" is the brightest. When the three-color gray values are the same, the gray tones with different gray values are produced, that is, when the three-color gray is 0, the darkest black is generated; when the three-color gray is 255, it is the brightest white tone .

RGB is inclusive of two types. In this project, we adopt a common cathode RGB module and connect it to P4, P3 and P3 of Micro:bit board. The distinct color can be produced and displayed on RGB by changing the input values of P4, P3 and P2.

![](media/32f8cbfbf4349ca8884fb33c07e9e9c6.jpeg)

2.  **Component List：**

| Micro:bit Main Board\*1  | Keyestudio Micro:bit T Type Shield | RGB\*1                                                       | Micro USB Aable\*1       |
| ------------------------ | ---------------------------------- | ------------------------------------------------------------ | ------------------------ |
| ![img](media/wps325.jpg) | ![img](media/wps326.jpg)           | ![img](media/wps327.jpg)                                     | ![img](media/wps328.png) |
| 220Ω Resistor\*3         | Breadboard\*1                      | Breadboard Wire                                              |                          |
| ![img](media/wps329.jpg) | ![img](media/wps330.jpg)           | ![image-20230517120656484](media/image-20230517120656484.png) |                          |

3.  **Schematic Diagram：**

    ![](media/ff2f4d7719f6dfe765b8ffdb4d308726.png)

4.  **Wiring Graph：**

![](media/fe5b4350398bbfa37173e2550386ad62.png)

**5. Test Code：**

Wiring according to the above diagram. The pins of RGB are linked with P4, P3 and P2. Connect computer to Micro:bit motherboard with USB cable. Then enable Micro: bit online programming tool to design the code:

A. Click“Led”→“more”→“led enable false”

B. Drag “led enable false”into “on start”

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click “Advanced”→“Pins”→“analog write pin P0 to 1023 ”

B. Move it into“on start”block, and copy for 2 times.

C. The pins of RGB are separately connected to P4, P3 and P2. Therefore set to P2, P3 and P4. Then the RGB will show white light.

![](media/f834f3d10e4c40b64ff2a05251c7fe83.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy“analog write pin P2 to 1023 ” once and leave it into “forever”, then change 1023 into 0.

![](media/6d4b4f28d7f9a68d7734490dc693c389.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Basic”→“pause (ms) 100”

B. Put“pause (ms) 100”below the block“analog write pin P2 to 0”block, and set to 1000ms.

![](media/15d98060aa1864c2e9b9abe86c5cb53f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Duplicate“analog write pin P2 to 1023”again, and place it as follows:

![](media/396d0fc2e3ad7033f45789f1e332baad.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Replicate![](media/eeb53e523c7121381a23523512249810.png) code string for 2 times, respectively set to P3 and P4. Then combine these code strings as shown below:

![](media/c368101976ee1d89df8dfa3dc3ad856c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Loops”→“repeat 4 times do”

B. Place it into “forever” block.

C. Then drag out the block“for index from 0 to 4...do”from“Loops”, and move it into“repeat 4 times do”block

![](media/6a98faf563c2b5fe38391d571adeaa01.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Copy“analog write pin P2 to 1023 ”once and leave it into“for index from 0 to 4...do”block.

B. Enter“Variables”→“index”；

C. Put it into“1023” box of“analog write pin P2 to 1023 ”block

![](media/24571e2722ed6113ae00ab690202e02f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Copy block“analog write pin P2 to index”once;

B. Set to P3 and delete the variable“index”

C. Go to“Math”→ “-”block

D. Leave it into“1023”box, and change left 0 into 1023

E. Move variable“index into right“0”box

![](media/a4b639134f6e02a0b1a49cd85d12031b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Copy“analog write pin P3 to 1023-index”once

B. Click the triangle button to set P4

C. Change 1023 into 512.

![](media/743ccc2e4a40f38ad98951bcf5bec24a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Basic”to drag out“pause (ms) 100”, then leave it below “analog write..P4.512...index”block. And set to 1ms.

B. Change“repeat 4 times”into“repeat 1 times”, “for index from 0 to 4”into“for index from 0 to 513”

![](media/d6591ea7d84c3b525eb9102acdaa4d5a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Duplicate code string![](media/7d764f09a775be056c0299a13abf8eff.png)once and leave it into“repeat 1 times do”block

Remove“index”behind P2,“1023-index”behind P3 and “512-index”behind P4.

Then respectively put down“index”into 1023 box behind P3, “512-index”into 1023 box behind P2 and“1023-index”into 1023 box behind P4.

![](media/73b7a27890cc33ef1e48a1419404eefa.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Replicate code string![](media/7d764f09a775be056c0299a13abf8eff.png)once and place it into“repeat 1 times do”;

Remove“index”behind P2 , “1023-index”behind P3 and “512-index”behind P4.

Respectively drag them into 1023 boxes behind P4, P3 and P2.

![](media/b98f00aa86d9ecdc4fc52133bd5169bb.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy code string![](media/416aec152e76e4e61ef67687ec4aedb8.png)once and move into“forever”block

Complete Program：

| ![](media/8b25c15b74e2fdf1dedcc8f5c3afe70a.png)<br />![](media/f8f894b6b9abc5e3cf50af86b8e60918.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br />Set the analog value of P2, P3 and P4 to 1023<br /><br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set analog value of P2, P3 and P4 to 0 and 1023.<br />Delay in 1000ms.<br /><br />Repeat the program in the “do” block once.<br /><br />When index is in the range of 0-513, <br />the program in the “do”block will be executed.<br />Set the analog value of P2 and P3 to index and “1023-index”<br />Set P4 to 512-index<br />Delay in 1ms<br /><br />When index value is in the range of 0-513, <br />the next program will be executed<br />Respectively set P2, P3 and P4 to 512-index, index and 1023-index.<br />Delay in 1ms<br /><br />When index value is in the range of 0-513, <br />the next program will be executed<br />Respectively set P2, P3 and P4 to 023-index, 512-index and index<br />Delay in 1ms<br /><br />Set P2, P3 and P4 to 1023 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/f650210895ed327fb8572a65c4d13a2d.png)

Then click the triangle button and select“Python”to see the Python language code:

![](media/a59d38716fd31f8c2c0265cfc6bfd1c3.png)

**6. Test Results：**

Wire up, upload the code and power on. The RGB begins to show white, blue, green and red color, alternately.

**7. Extension Project：**

Make RGB display blue, green, red, yellow, purple and white color at the interval of 0.5s, alternately.

![](media/aaac67a9a588b38aad59a2f1fc08eed6.png)

![](media/f0307647845a9a692edb0b9b94aed00d.png)

### Project 18：Active Buzzer

1.  **Description：**

We can use Micro:bit to make many interactive works of which the most commonly used is acoustic-optic display. All the previous projects have something to do with LED. However, the circuit in this experiment can produce sound. Normally, the experiment is done with a buzzer or a speaker because buzzer is more simpler and easier to use.   

The buzzer we introduced here is a passive buzzer. It cannot be actuated by itself, but by external pulse frequencies. Different frequencies produce different sounds. We can use Micro:bit to code the melody of a song, which is quite fun and simple.

There are two kinds of buzzer, active buzzer and passive buzzer. In this lesson, we will use Micro:bit to drive an active buzzer. The active buzzer inside has a simple oscillator circuit which can convert constant direct current into a certain frequency pulse signal. Once active buzzer receives a high level, it will produce an audible beep.

**Triode:**

Triode, also known as semiconductor triode, bipolar transistor and crystal triode, is a kind of current-controlled semiconductor device. Its function is to amplify weak signals into larger amplitude electrical signals, and also to be used as contactless switches. Crystal triode is one of the basic components of semiconductor. It has the function of current amplification and is the core component of electronic circuit.

The triode is made of two PN junctions which are very close to each other on a semiconductor substrate. The two PN junctions divide the whole semiconductor into three parts, the middle part is the base area, the two sides are the emitter area and collector area, and the arrangement is PNP and NPN.

The NPN triode is composed of 2 N-type and P-type semiconductors, two of which are the launch area and the collect area. And the three pins are called E(Emitter), B (Base) and C (Collector).

![](media/3bace56b6d4c5836d1f334038e88acf1.jpeg)

The commonly used triodes are divided into PNP and NPN triodes.

The S8050 transistor is a low-power NPN silicon tube. The collector-base (Vcbo) voltage can be up to 40V, and the collector current is (Ic) 0.5A.

Its three pins are E(Emitter), B (Base) and C (Collector).

<img src="media/b0121331837fef5bfe4593a12b99a428.png" style="zoom:50%;" />


![image-20230426104159018](media/image-20230426104159018.png)



2.  **Components List**

| ![img](media/wps331.jpg)             | ![img](media/wps332.jpg)             | ![img](media/wps333.jpg) | ![img](media/wps334.jpg) |
| ------------------------------------ | ------------------------------------ | ------------------------ | ------------------------ |
| Micro:bit Main Board*1               | Keyestudio Micro:bit T Type Shield*1 | Active Buzzer*1          | 2.4KΩ Resistor*1         |
| ![img](media/wps335.jpg)             | ![img](media/wps336.jpg)             | ![img](media/wps337.jpg) | ![img](media/wps338.png) |
| S8050 Triode*1                       | Breadboard*1                         | Breadboard Wire          | Micro USB Cable*1        |
| ![img](media/wps339.jpg)             | ![img](media/wps340.png)             | ![img](media/wps341.jpg) |                          |
| Keyestudio Breadboard Power Module*1 | AA Battery Holder*6                  | 5 AA Battery*6           |                          |

3.  **Schematic Diagram：**

    ![](media/b243be8ab7442d6a36125ef107cbef70.png)

4.  **Wiring Graph：**

![](media/13965d7f1b0a01e844f1489d81843ddf.png)

5.  **Test Code：**

Wiring through the above graph, active buzzer is linked with P2. Link computer with micro:bit board. Then enable the online programming tool to design the code.

(1) 1.  Click “Led”→”more”→“led enable false”

2.  Combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2) A. Go to“Advanced”→“Pins”→“digital write pin P0 to 0 ”;

B. Leave it into“forever” , and active buzzer is connected to P2, so set to P2, change o into 1.

![](media/658f0b39fa7d70f59576e19c83ef5dc4.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) Click“Basic”to move“pause (ms) 100”block below “digital write...P2 to 1”block, set to 500ms.

![](media/2ab33e60f5d1011b1520fe4085497124.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4) Duplicate the code string <img src="media/822372479019a9e0a05b3124ddcac0e4.png" style="zoom:80%;" />once and move it below “pause(ms)500”block. Then change 1 into 0.

![](media/27d6b609f0db8430082be8d0f4f530f6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

| ![](media/2bb0dcc8ea78d451a490adc1553dc60e.png) | “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically<br /><br />Set P2 to high level(1) to make active buzzer emit sound<br />Delay in 500ms<br /><br />Set P2 to low level(0) to make active buzzer stop sound<br />Delay in 500ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/f2c3b81dac4caf7fdbf24e90be1f9837.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/a17fb2d2fe73854a99f592cb21a7d2ef.png)

**5. Test Results：**

Upload program and plug in power. Active buzzer emits sound for 0.5s, and stops for 0.5s.

**6. Extension Project：**

Shift the IO port of active buzzer, it makes sound for 0.2s alternately.

![](media/279036d64d0a82792426552a00d5545e.png)

### Project 19：Passive Buzzer

1.  **Description：**

We can use Micro:bit board to make many interactive works of which the most commonly used is acoustic-optic display. The previous lessons are related to LED. However, we will elaborate the Sound in this lesson.

Buzzer is inclusive of active buzzer and passive buzzer.

The passive buzzer doesn’t carry with vibrator inside, so it need external sine or square wave to drive. It can produce slight sound when connecting directly to power supply. It features controlling sound frequency and producing the sound of “do re mi fa so la si”.

A diode should be connected in reverse when driving by the square wave signal source, which will hinder the high-voltage generated to damage other components or service life when the power breaks down.

Frequency is made of a series of pitch names in English letters and Numbers. You can choose different frequencies, that is, tone. The frequency of sound is called pitch.

It involves music knowledge. In music lesson, our teacher taught“1（Do）, 2（Re）, 3(Mi), 4(Fa) , 5(Sol), 6(La), 7(Si)”

| 1（Do） | 2（Re） | 3(Mi) | 4(Fa) | 5(Sol) | 6(La) | 7(Si) |
| :-----: | :-----: | :---: | :---: | :----: | :---: | :---: |
|    C    |    D    |   E   |   F   |   G    |   A   |   B   |

The number depends on high or low tone. The larger the number, the higher the tone. When the number is same, the frequency (tone) is getting higher and higher from C to \_B.

Beats are the time delay for each note. The larger the number, the longer the delay time. A note without a line in the spectrum is a beat, with a delay of 1000 milliseconds. while a beat with an underline is 1/2 of a beat without a line, and a beat with two underlines is 1/4 of a beat without a line.

![](media/a57464c004160236cb89f0deb31f185d.png)

Here is the notation of Ode to Joy.

![](media/4a79470cc28f087a3834d168bc0c343f.jpeg)

**2. Components List:**

| ![img](media/wps342.jpg) | ![img](media/wps343.jpg)                 | ![img](media/wps344.jpg) | ![img](media/wps345.jpg) |
| ------------------------ | ---------------------------------------- | ------------------------ | ------------------------ |
| Micro:bit motherboard*1  | keyestudio Micro:bitT Type Shield*1      | Passive Buzzer*1         | 2.4KΩResistor*1          |
| ![img](media/wps346.jpg) | ![img](media/wps347.png)                 | ![img](media/wps348.jpg) | ![img](media/wps349.png) |
| S8050Triode*1            | AA Battery Holder*6                      | Breadboard wire          | Micro USB cable*1        |
| ![img](media/wps350.jpg) | ![img](media/wps351.jpg)                 | ![img](media/wps352.png) | ![img](media/wps353.jpg) |
| Breadboard*1             | Keyestudio Power module for breadboard*1 | 51ΩResistor*1            | AA Battery*6             |

**3. Schematic Diagram：**

**（Note: On Micro:bit motherboard，Passive Buzzer is only connected to P0）**

<img src="media/7515520eb94520c587cb6a49f3e92782.png" style="zoom:67%;" />

**Wiring Graph:（Note： On Micro: bit mainboard，Passive Buzzer is only connected to P0）**

![](media/9605bbdeeba40ef571a731a554dffd8c.png)

**4. Test Code：**

Wiring through the above graph, passive buzzer is linked with P0. Link computer with micro:bit board. Then enable the online programming tool to design the code.

Click “Led”→”more”→“led enable false”, combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“Music”→“play tone Middle C for 1 beat”， leave it into“forever”block，then tap “Middle C”, then appear<img src="media/11c6b50086b6d6327916554f55c4f79b.png" style="zoom:67%;" />code.

Choose“High E”and set to “1 beat”.

![](media/656e8c737018a47d11ab497483a808ef.png)

![](media/8eb86db29abd1058de4547b2835f7051.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

According to the above music score, copy“play tone High E for 1 beat”124 times, separately change “High E”of“play tone High E for 1 beat”into“High E”,“High F”,“High G”,“High G”,“High F”,“High E”,“High D”,“High C”,“High C”,“High D”,“High E”,“High E”,“High D”,“High D”,“High E”,“High E”,“High F”,“High G”,“High G”,“High F”,“High E”,“High D”,“High C”,“High C”,“High D”,“High E”,“High D”,“High C”,“High C”,“High D”,“High D”,“High E”,“High C”,“High D”,“High E”,“High F”,“High E”,“High C”,“High D”,“High E”,“High F”,“High E”,“High D”,“High C”,“High D”,“Middle G ”,“High E”,“High E”,“High E”,“High F”,“High G”,“High G”,“High F”,“High E”,“High D”,“High C”,“High C”,“High D”,“High E”,“High D”,“High C”,“High C”,“High D”,“High D”,“High E”,“High C”,“High D”,“High E”,“High F”,“High E”,“High C”,“High D”,“High E”,“High F”,“High E”,“High D”,“High C”,“High D”,“Middle G”,“High E”,“High E”,“High E”,“High F”,“High G”,“High G”,“High F”,“High E”,“High C”,“High C”,“High C”,“High D”,“High E”,“High D”,“High C”,“High C”,“High D”,“High C”,“High C”,“High G”,“High F”,“High E”,“High E”,“High C”,“High B”,“High A”,“High A”,“High F”,“High D”,“High C”,“Middle B”,“High D”,“Middle B”,“Middle A”,“Middle G”,“Middle A”,“Middle B”,“High C”,“High E”,“High D”,“Middle B”,“High C”,“High C”,“High C”,“High C”.

Then set beat to: “1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1/2”,“1”,“1”,“1”,“1/2”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1/2”,“1”,“1”,“1”,“1/2”,“1/2”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1/2”,“1”,“1”,“1”,“1/2”,“1”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1/2”,“1”,“1/2”,“1/4”,“1”.

Complete Program：

| ![](media/92a9ebb890e32033434669765286d176.png)<br />![](media/bfb63d87ff6b10a71dc5aaec192e2029.png)<br />![](media/79acaee4559fadfc7c1278d03dbef0d8.png)<br />![](media/20a0a38a3b4bf3aa73e58a97061c541d.png) |
| ------------------------------------------------------------ |
|                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/dcfffbbaba391e6835cd746b74cf5601.png)

![](media/192662152fb847885b75af2192c76905.png)

![](media/dcdfb628441e829befbbb1d15f9713d5.png)

![](media/584c9458c1e84c1007eb44b4aa3e6e7d.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/f55e5802dbb8f7f679f78e1c4c5db575.png)

![](media/e14668427de366893454e74a4a3a4aa3.png)

![](media/4521ffdcf151cfa99a81cd39342d7af0.png)

![](media/67eab94a4c3d89897e3ec1cf5a218839.png)

**5. Test Results：**

Wire up through the above graph and plug in power. The “Ode to Joy” is played by passive buzzer.

**6. Extension Project：**

Make passive buzzer emit two kind sounds.

![](media/f6012f0884ca100b65f833d0fcec25e5.png)

### Project 20：1-digit Tube Module

1.  **Description：**

LED segment display is a semiconductor light-emitting device. Its basic unit is a light-emitting diode (LED). LED segment display can be divided into 7-segment display and 8-segment display according to the number of segments. 8-segment display has one more LED unit ( for decimal point display) than 7-segment one.

In this experiment, we use a 8-segment display. According to the wiring method of LED units, LED segment displays can be divided into display with common anode and display with common cathode. Common anode display refers to the one that
combine all the anodes of LED units into one common anode (COM).  

For the common anode display, connect the common anode (COM) to +3V. When the cathode level of a certain segment is low, the segment is on; when the cathode level of a certain segment is high, the segment is off. For the common cathode display, connect the common cathode (COM) to GND. When the anode level of a certain segment is high, the segment is on; when the anode level of a certain segment is low, the segment is off.

The anodes of each LED are a,b,c,d,e,f,g and dp((decimal point). There are 2 segments to show number and one segment to display decimal point. In this project, we use a common anode 8-segment display. The each pin of anode must be connected to 220Ω resistor.

1-digit tube module has 8 light-emitting diodes (LED) corresponding to 8 pins. As shown below, light emitting diode a equals to pin a, LED b is equivalent to pin b, and so on. Connect pin a to P13 on the Micro:bit motherboard, pin b to P14, pin c to P8, pin d to P9, pin e to P10, pin f to P12, and pin g to P11, pin dp to P7, as long as you control the high and low level of the corresponding interface, you can control the display of the digital tube. In the experiment, we let the digital tube gradually display 10 numbers from 0-9.

![Img](./FILES/KS4007-KS4008.md/img-20230413163526.png)

**2.Components needed:**

| ![img](media/wps354.jpg) | ![img](media/wps355.jpg)             | ![img](media/wps356.jpg) | ![img](media/wps357.jpg) |
| ------------------------ | ------------------------------------ | ------------------------ | ------------------------ |
| Micro:bit mainboard*1    | keyestudio Micro:bit T Type Shield*1 | 1 digit tube module*1    | 2.4KΩ Resistor*1         |
| ![img](media/wps358.png) | ![img](media/wps359.jpg)             | ![img](media/wps360.jpg) |                          |
| Micro USB cable*1        | Breadboard*1                         | Breadboard wires         |                          |

**3. Schematic Diagram：**

<img src="media/c0889008dfd99bd0b767e30f64ad6ac1.png" style="zoom:50%;" />

**4.Wiring Graph：**

![](media/5f07242560f4946d52f60cffad320b4c.png)

**5.Test Code：**

Link computer with micro:bit board. Then enable the online programming tool to design the code.

A. Click“Led”→“more”→“led enable false”；

B. Place it into“on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A . Enter “Advanced”→“Functions”→“Make a Functions...”→“Edit Function”dialog box

B. For block![](media/131cceb8a56ebf526402123c78e906df.png), change“do something” into “0” and click “Done √”. Then“function 0”block is created.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  A. Click“Advanced”→“Pins”→“digital write pin P0 to 0”，

2.  Copy it for 7 times and put these code string into“function 0”block.

3.  The pins of 1-digit tube module are connected to P13, P14, P8, P9, P10, P12, P11 and  P7 .
    
4.  Thereby, set to P13, P14, P8, P9, P10, P12, P11and P7 respectively. Then set to 1 from P13 to P12. And remain 0 for P11 and P7 .

![](media/dfe20aec9ae0b0ff1192501c8e1223ce.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

1.  Then replicate the code string ![](media/dfe20aec9ae0b0ff1192501c8e1223ce.png)for 9 times, and design the code as follows:

    ![](media/c584818b287a5eabc800d7867c4455a3.png)
    
2.  Next click“Advanced”and enter“Functions”to find out function block“call 0”, and leave it into“forever”，block“call 0”equals to code string ![](media/dfe20aec9ae0b0ff1192501c8e1223ce.png)，and “call 1”is equivalent to code string ![](media/753afe0b225896a230f87c5534ee82ba.png) and so on.
Move block“pause (ms) 100”from“Basic”and place it below the “call 0”, then set to 500ms.

![](media/15722d6bd7e455f698c26546e67bb9a8.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“Advanced”and go to“Functions”, drag out the function block“call 1”,“call 2”,“call 3”,“call 4”,“call 5”,“call 6”,“call 7”,“call 8”and“call 9 beneath the block “pause(ms) 500”.

![](media/14bf5ba81a824d4d728faa6e911485fd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Then replicate“pause (ms) 500 ”for 9 times and place them into every“call“block.

![](media/6cc442082ccaef6fe8d9e51a6558d744.png)

Complete Program：

| ![](media/4b4e2d4b2158ff86dc2061ad1d885cd5.png)<br />![](media/44a2fe764fd69111afc2af9ac4adff14.png)<br />![](media/d8665605c72b55b26bc3f99a13a987ff.png)<br />![](media/79299d0af80d60c4f3553fa982e0b38d.png)<br />![](media/ca9449b1ff646c438095b4b6f44d1c22.png)<br />![](media/bef30f658db7d88b44e3dcb5286f5c7d.png) |
| ------------------------------------------------------------ |
|                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/090d226d4e0068f90ed2a9e4aa4b34f7.png)

![](media/540a59d3e50d2346604c815a1d114dc1.png)

![](media/7ec6f4defa97b5251bf8ae5d1c25ef06.png)

![](media/5ad3c5e1b3759a25294ff82dc3c17dc8.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/1fccb771f2888e58845527fa9a894518.png)

![](media/4763476dc5aac0b29f3170ec8fd19bac.png)

![](media/5263d3bee6de1ee8fa7e771c293197dd.png)

![](media/d237e4409a57ec4541555e9deabc8207.png)

**6. Test Results：**

Hook up according to diagram, upload the code and power on, the digital tube displays from the number 0 to 9 cyclically.

### Project 21：4-digit Tube Module

1.  **Description:**

The 4-digit digital tube module is mainly composed of a 12pin 4-digit common anode digital tube with a score point. Its driver chip is TM1637.

When in use, we only to make the single-chip microcomputer control a 4-digit or 8-digital tube by 2 signal lines, which greatly saves the IO port resources of the control board.

The control terminal interface of the module is a 4pin header with a pitch of 2.54mm, which facilitates to link with the corresponding control microcontroller. What’s more, the 2 positioning holes of module make it easier to install on the other devices.

This module can be applied to time display, stopwatch display and other devices that need to display numbers.

In this project, we connect the keyestudio 4-digit digital tube module to the keyestudio Micro:bit T Type Shield through the Breadboard, and control the 4-digit digital tube module to display numbers through the Micro:bit motherboard and programming.

2.  **Component List:**

| ![img](media/wps361.jpg) | ![img](media/wps362.jpg)            | ![img](media/wps363.jpg) |
| ------------------------ | ----------------------------------- | ------------------------ |
| Micro:bit motherboard*1  | Keyestudio Micro:bit TType Shield*1 | M-F DuPont lines         |
| ![img](media/wps364.jpg) | ![img](media/wps365.jpg)            | ![img](media/wps366.png) |

**3. Schematic diagram**



![](media/7890a6ad98930d8d2e85e22d467028a5.png)

**4.Wiring Graph：**

**![](media/ee2ba927a9985d6a2deb4768fe2a4f65.png)5. Test Code：**

**Code 1：**

Wiring according to the above diagram, CLK and DIO pins of 4-digit tube module are respectively connected to P1 and P2.

Link computer with micro:bit board. Then enable the online programming tool to design the code.

**How to add the library file of 4-digit tube module:**

Enter the Micro:bit online programming page and click“Extensions”

![](media/c40d36df412558f74eb1adccfe842657.png)

Input TM1637 to search, as shown below and click to download and install the library file.

![](media/da0556c6ccabbce6b081a4b9cf424c21.png)

After installing 4-digit library file successfully, then the corresponding code is shown in the editing area:

![](media/87e87b05c6cd296816e56e9b8fbafe83.png)

1.  Click “Variables”→“Make a Variable...”→“New variable name：”

2.  Enter“item”in the dialog box and click “OK”, then variable“item”is created

3.  Drag“set item to 0”from “Variable”into “on start”block.

![](media/4d94c93ca4723eb9b24c6b8bc68e1a22.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“8 TM1637”block and move“CLK P1 DIO P2 intensity 7 LED count 4”to the 0 box of“set item to 0”.

![](media/d05951c0e6412829ecec09953c300237.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“8 TM1637”to select“turn on item”block, and place it into“forever”block

![](media/340acb7807e520b5ff285fc8480ca463.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“Basic”to move“pause (ms) 100”block below“turn on item”block and set to 200ms. Then copy it once.

![](media/cea950de388578df92441f98b7782d10.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to“8 TM1637”to find out block“item show digit 5 at 0 ”, then place it between the two“pause (ms) 200”blocks“.

![](media/5b44ac5a23e7390ea752a4a4e58f9477.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy the code string ![](media/5244d85f254c9d6679e29142d6049833.png)for 3 times, and move them into“forever”block. Set to “at 1, at 2, at 3”, as shown:![](media/8a312ac347d50cea9da3c9b54534c258.png)

Drag“turn off item”from“8 TM1637 into“forever”block. Duplicate “pause (ms) 200”once and leave it beneath block “turn off item”.

![](media/6c2cd16a439916fdd865aba78098163a.png)

Complete Program：

| ![](media/ac30a6d38367bd0db69c3c6caa229994.png) | “on start”: command block runs once to start program.<br />Set item to “CLK P1 DIO P2 intensity 7 LED count 4”.<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Turn on variable “item”<br />Delay in 200ms<br /><br />Digital tube displays 5 at 0 bit<br />Delay in 200ms<br /><br />Digital tube displays 5 at 1 bit<br />Delay in 200ms<br /><br />Digital tube displays 5 at 2 bit<br />Delay in 200ms<br /><br />Digital tube displays 5 at 3 bit<br />Delay in 200ms<br /><br />Turn off variable “item”<br />Delay in 200ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/72817637e7483c3cdfae5755ad03fcab.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/140c91c08fdccddc08351e4f1f593a7f.png)

**Code 2：**

Hook up in compliance with the above graph, the CLK and DIO pins of 4-digit tube module are linked with P1 and P2.

Link computer with micro:bit board. Then enable the online programming tool to design the code.

We’ve added the library file in “Code 1”part. Let’s get started.

1.  Click “Variables”→“Make a Variable...”→“New variable name：”

2.  Enter“item”in the dialog box and click “OK”, then variable“item”is created.

3.  Drag“set item to 0”from “Variable”into “on start” block.

![](media/4d94c93ca4723eb9b24c6b8bc68e1a22.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“8 TM1637”block and move“CLK P1 DIO P2 intensity 7 LED count 4”to the 0 box of“set item to 0”.

![](media/d05951c0e6412829ecec09953c300237.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“8 TM1637”to select “item show number 0”block, and place it into“on start”block

![](media/77be3e6a5d3faba201e788b1dbe9dd5d.png)

Go to“8 TM1637”to move“item DotPoint at 1 true”into “forever”block

![](media/1a6f3981f852db56d537d40c461de06b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“Basic”to drag“pause (ms) 100”block below the block “item DotPoint at 1 true”, then set to 200ms.

![](media/4ee775b18d12a6b9271bdfb3c4201f34.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy the code string![](media/e84cc008ff9e0cfc31a01516db9219c3.png)once and leave it below the “pause(ms)200”, click the button next to“true”to select“false”.

![](media/4c3bedeec6eee33529b11be1792ccedd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

| ![](media/008a869f910ac448fb75848762e19f44.png) | “on start”: command block runs once to start program.<br /><br />Set item to “CLK P1 DIO P2 intensity 7 LED count 4”.<br /><br />4-digit tube module shows 1234.<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Show “DotPoint”<br /><br />Delay in 200ms<br /><br />Hide DotPoint<br /><br />Delay in 200ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/e2f98d6bdc3405c8c3aec2da6241da7f.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/e88a2ccbd1fd5019f576b6e7ac2fb7a3.png)

**6. Test Results：**

Wire up via diagram, upload code 1 and power on, the 4-digit tube module shows“5”from 0 bit to the third bit(From left to right are 0, 1, 2, and 3 bits). then the number“5555” flickers.

Upload code 2, the character string“13：14” is shown and the middle symbol ”:”flashes.

### Project 22：8\*8 Dot Matrix

1.  **Description：**

8\*8 Dot matrix module can be used as display screen, like bus station display, advertising screens and bulletin boards.

On the screen there are 64 circles. And inside each circle has an LED light. There are 64 LEDs, pins on the side, 8 on each. You can see other models like 16\*16 Dot matrix, 32\*32 Dot matrix.

These 64 LEDs can be lit separately, or lit together. Lighten different LED to show different icons.

The single 8\*8 dot matrix comes with 8 LEDs on each row and each cols. There are 16 pins on the side, 8 on each.

Connect all the positive pins or negative pins of 8 LEDs on each row, leading out a line; and the pins not connected on each cols also connect together, leading out a line; so the single dot matrix screen has 16 pins. In this lesson, we will make dot matrix show 11.

![Img](./FILES/KS4007-KS4008.md/img-20230413163900.png)

![](media/3baa69a29e885b6b2ace77e097cc5047.jpeg)

2.  **Components List:**

| ![img](media/wps367.jpg) | ![img](media/wps368.jpg)             | ![img](media/wps369.jpg) | ![img](media/wps370.jpg) |
| ------------------------ | ------------------------------------ | ------------------------ | ------------------------ |
| Micro:bit motherboard*1  | keyestudio Micro:bit T Type Shield*1 | 8*8 Dot Matrix *1        | 220ΩResistor*8           |
| ![img](media/wps371.jpg) | ![img](media/wps372.png)             | ![img](media/wps373.jpg) |                          |
| Breadboard*1             | Micro USB cable*1                    | Breadboard wires         |                          |

3.  **Schematic Diagram：**

![](media/ee1fa3d9953a7d2eb0c7983663d58494.png)

4.  **Wiring Graph：**

![](media/b3c01eb40bb302a62c73e983588eff0f.png)

5.  **Test Code：**

Wiring according to the above connection diagram. Link computer with micro:bit board. Then enable the online programming tool to design the code.

A. Click “Led”→”more”→“led enable false”;

B. Combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter “Advanced”→“Pins”→“digital write pin P0 to 0”, Then drag it into“forever”.

![](media/615af77e1a0a8aa25f07c3df2287e20b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Seen from the above the graph, the pin B of 8\*8 dot matrix is connected to P5, click the drop-down triangle to set P5.

![](media/ee107bac096069dbf1dbd60eaae439de.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy“digital write pin P5 to 0”for 9 times. The pins of dot matrix are connected the corresponding ports are displayed as follows:

| Pins of dot matrix | Connected Pins |
| :----------------: | :------------: |
|         G          |      P14       |
|         7          |       P3       |
|         6          |       P6       |
|         5          |       P1       |
|         4          |       P7       |
|         3          |      P11       |
|         0          |       P8       |
|         1          |      P13       |
|         2          |       P0       |

Then respectively set to P14, P3, P6, P1.....P0. and remain 1 from P3 to P8(as shown below). 

![](media/9d2ca0a3985024cc21d2c7d5f6ccb59a.png)

Complete Program：

| ![](media/c7bba58bf8eee56d7193e611f667a8ca.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set p5 and P14 to low level(0)<br /><br />Set to high level (1) from P3 to P8 |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/1ac3f6cf683db34fae31e417d41cf965.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/2fe2690cea072435fb0752030d368316.png)

6.  **Test Results：**

Upload the entire program and power on, the number is displayed on dot matrix.

7.  **Extension Project：**

Change the above code to make 8\*8 Dot matrix display the Chinese“二”.

![](media/a13164fea0f3ea94ddb3184bcb7a2af6.png)

### Project 23：Control Flow Light by 74HC595N

1.  **Description：**

To put it simply, 74HC595 is a combination of 8-digit shifting register, memorizer and equipped with tri-state output. Here, we use it to control 8 LEDs.

You may wonder why use a 74HC595 to control LED? Well, think about how many I/O it takes for an Arduino to control 8 LEDs? Yes, 8.    For an Arduino, it has only 20 I/O including analog ports. So, to save port resources, we use 74HC595 to reduce the number of ports it needs. Using 74HC595 enables us to use 3 digital I/O port to control 8 LEDs!

The 74HC595 devices contain an 8-bit serial-in, parallel-out shift register that feeds an 8-bit D-type storage register. The storage register has parallel 3-state outputs. Separate clocks are provided for both the shift and storage register.  

The shift register has a direct overriding clear (SRCLR) input, serial (SER) input, and serial outputs for cascading. When the output-enable (OE) input is high, the outputs are in the high-impedance state. Both the shift register clock (SRCLK) and storage register clock (RCLK) are positive-edge triggered. If both clocks are connected together, the shift register always is one clock pulse ahead of the storage register.

![](media/be6dcdef6b615713ff418877f2d15de7.jpeg)

![](media/858b189f06ad68afe051b15043b2affd.png)

**Pins Description：**

|     PIN     | FUNCTION                                                     |
| :---------: | ------------------------------------------------------------ |
|  13 pin OE  | The output Enable is used to turn off the outputs. <br />Must be held low for normal operation |
|  14 pin SI  | It it the pin receiving data of 74HC595. <br />Only 1 bit is input each time, therefore, a byte can be generated when inputting 8 times constantly |
| 10 pin SCLR | Clear all the data in the shift register. when it is low level. <br />This is generally not used, so it is directly connected to VCC, high level |
| 11 pin SCK  | This is the clock pin to which the clock signal has to be provided from MCU/MPU |
| 12 pin RCK  | The Latch pin is used to update the data to the output pins. It is active high |
|  9 pin SQH  | This pin is used to connect more than one 74hc595 as cascading |

2.  **Components List**

| ![img](media/wps374.jpg) | ![img](media/wps375.jpg)             | ![image-20230517135058914](media/image-20230517135058914.png) | ![img](media/wps377.jpg) |
| ------------------------ | ------------------------------------ | ------------------------------------------------------------ | ------------------------ |
| Micro:bit motherboard*1  | keyestudio Micro:bit T Type Shield*1 | Red LED*8                                                    | 220ΩResistor*8           |
| ![img](media/wps378.jpg) | ![img](media/wps379.jpg)             | ![img](media/wps380.jpg)                                     | ![img](media/wps381.png) |
| 74HC595N chip*1          | Breadboard*1                         | Breadboard wires                                             | Micro USB cable*1        |

3.  **Schematic Diagram：**

![](media/aca192e4315b3bcad33d4a49c23fc494.png)

4.  **Wiring Graph：**

![](media/74570f2ba5c9add908457aa388294b2b.png)

5.  **Test Code：**

Wiring according to the above connection diagram. Therefore, SI, RCK, and SCK pins of 74HC595N are linked with P0, P1 and P2. Link computer with micro:bit board. Then enable the online programming tool to design the code.

**How to add the 74HC595N library file**

Enter the Micro:bit online programming page and click“Extensions”Click “Extensions”to add the library file.

![](media/792e3ec83c270dffdae7758a0721600d.png)

Enter 74hc595 to search, as shown below. Click library file to download and install library file automatically.

![](media/93c3b945eeabaf3ee6ddf0c527a3adb1.png)

The corresponding block appears in the code-editing area, after successful installation

![](media/f2a4d033c32d2af9832b2259c8c3a28d.png)

![](media/d380f77697920f174fb819fce502f651.png)

A. Click “Led”→”more”→“led enable false”;

B. Combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“Freenove”→“Shift Out”to drag“set 74hc595 data pin at P0 launch pin at P0 clock pin at P0”into“on start”.

Pin S1 of 74HC595N chip is connected to P0, RCK is linked with P1, SCK with P2. (Note: data pin equals to pin S1, launch pin is given to RCK, clock pin is SCK.)

Therefore, we set block to set 74hc595 data pin at P0 launch pin at P1 clock pin at P2.

![](media/88144c687ef152fd89d4e2dc9b065ee4.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Go to“Freenove”→“Shift Out”→“write 0 from highest bit”；

B. Leave it into“forever”and change 0 into 255.

![](media/7fbcbd1180ae3454a5390225da2677b2.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Drag out “pause (ms) 100” from “Basic”block, then place it into “forever”and set to 300ms.

![](media/82464b6831364229573ccebea309342a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Duplicate code string![](media/4a283906df214059496b944893e3b519.png)for 8 times. And separately alter 255 into 127, 63, 31, 15, 7, 3, 1 and 0.

![](media/7e490399f47f9e8046f020727b9b59a2.png)

Complete Program：

| ![](media/image-20230517135211973.png)![image-20230517135235087](media/image-20230517135235087.png) | “on start”: command block runs <br />once to start program.<br /><br />Turn off LED dot matrix<br /><br />Set the pin of 74HC595N chip.<br /><br /><br /><br /><br />The program under the block “forever” runs cyclically.<br /><br /><br />Write 255, 127, 63,31, 15, 7, 3, 1 and 0 from highest bit |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/924eb22032b29b1c3246d4c467e8e605.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/0e2881df67328916b656af7e9ddaab36.png)

6.  **Test Results：**

Upload the program and plug in power, 8 LEDs start lighting up together then go off one by one,alternately.

7.  **Extension Project：**

8 LEDs light up together then go off at same time.

![](media/49380ef54d2dd06f3cb4aafd420c6db7.png)

### Project 24：A Desk Lamp

1.  **Description**

The button switch is the most universal component in the circuit. In the project 4, we have elaborated the working principle of the button switch. In this lesson, we will use an external button to control an external LED.

2.  **Components List:**

| ![img](media/wps382.jpg) | ![img](media/wps383.jpg)            | ![img](media/wps384.jpg) | ![img](media/wps385.jpg) | ![img](media/wps386.jpg) |
| ------------------------ | ----------------------------------- | ------------------------ | ------------------------ | ------------------------ |
| Micro:bit Main Board*1   | Keyestudio Micro:bitT Type Shield*1 | 10KΩResistor*1           | 220ΩResistor*1           | Red LED*1                |
| ![img](media/wps387.png) | ![img](media/wps388.jpg)            | ![img](media/wps389.jpg) | ![img](media/wps390.jpg) | ![img](media/wps391.jpg) |
| Micro USB Cable*1        | Breadboard*1                        | Breadboard Wire          | Button*1                 | Button Cap*1             |

**3. Schematic Diagram：**

<img src="media/ac7db667f76b9e8cb50695aa2657ef19.png" style="zoom:50%;" />

**4. Wiring Graph：**

![](media/bf9abe9737aaabafcfef24dd9053f3a8.png)

5.  **Test Code：**

**Code 1：**

Wiring according to the above diagram. Button is connected to P0. Link computer with micro:bit board. Then enable the online programming tool to design the code.

A. Click“Basic”→“more”→“clear screen”;

B. Put it into the block“on start”.

![](media/c417bb6b47a2397f3420697b99d72c8f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Drag“show number 0”from“Basic”and place it into“forever”block.

![](media/e5973d226056815cbf7f4a5562290491.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“Advanced”→“Pins”→“digital read pin P0 ”；B. Leave it into the 0 box.

![](media/ef818aa3ef053e7d679a58f156879f3d.png)

Go to“Basic”to drag“pause (ms) 100”into“forever”, set to 100ms.

![](media/031f7f280b5357175fbd3ac92eac0593.png)

Click“Serial”under the“Advanced”block, and get“serial write value“x”=0”, leave it below the block“pause(ms)100”.

Change“x”into“digital signal”.

Copy“digital read pin P0”once and keep it into“0”box of “serial write value“x”=0”

![](media/d68cc5e8e0197cf12d8225053e6c27d9.png)

Complete Program：

| ![](media/85c26ac4c9fd98220079c0829fd1c035.png) | “on start”: command block runs <br />once to start program.<br />Clear screen<br /><br /><br />The program under the block “forever” <br />runs cyclically.<br /><br />LED dot matrix shows the digital signal <br />read by P0（1/0）<br />Delay in 100ms<br />Serial write digital signal=digital signal <br />read by P0（1/0） |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/eb5ce60bd24b42d1c0dabebd5b6d241b.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/1c2b8bdd298a22bcc582a84512e76c57.png)

Wire up through the connection diagram, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test).

Click “OK” and “Connect”. When the button is pressed, button sends 1 and serial port and Micro:bit board display 1; when unpressed, the button sends 0, 0 are shown on serial port and Micro:bit board

![](media/e7703bb10f45bac4033ab44958dcb248.png)

**Code 2：**

Hook up according to the above connection diagram, red LED and button switch are connected to P4 and P0 respectively.

Link computer with micro:bit board. Then enable the online programming tool to design the code.

(1)) A. Click “Led”→”more”→“led enable false”,

B. Combine it with“on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2) A. Enter “Variables”→“Make a Variable...”→“New variable name：”;

B. Then input“Push Counter”in the blank box and click “OK” to create variable“PushCounter”. In addition, both variables“State”and “Laststate” can be generated in same way.

C. Drag “set Laststate to 0”into“on start”and copy it twice. Respectively click drop-down triangle button to choose “PushCounter” and “State”. As shown below:

![](media/e87d3680ef340474032453193d3d968b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) Click“Serial”under the block“Advanced”to drag“serial write value“x”=0” into “forever”. Then go to“Variables”to move “PushCounter” into 0 box.

![](media/7563b21d64d83f7956b96a1f268cd127.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4) A. Click“Variables”to move“set Laststate to 0”into “forever”.

B. Click the drop-down triangle button to select“State”;

C. Then enter“Advanced”→“Pins”→“digital read pin P0 ”

D. Place“digital read pin P0 ”into“0” box

![](media/775c23099529caabaa7536eaf22519b9.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) A. Go to“Logic”→“if..true..then”block and“=”

B. Leave“if..true..then”beneath the“set..digital...pin P0” block . Then move out “=” into“true”box.

![](media/f6a742bb6a3772848e18b0e9340bee1d.png)

Click“Variables”to get“State”, then place it at the left “0” box. Then move out “Laststate” to right 0 box.

Then click the drop-down triangle button to set “≠”.

![](media/1749bd438e8e7b1c7adf566afc839dba.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy ![](media/5d0c3cbaee067032f53590c2e7c1ddba.png)once and place it into“if State≠Laststate then”block, delete “Laststate”, change 0 into 1, click the drop-down triangle button to select “=”.

![](media/8e86183d3ad42264d306a8ab3c29fc44.png)

A. Replicate“set PushCounter to 0”once and put it into block“if State=1 then”block.

B. Then go to“Math”to drag out “+”

C. Click“Variables”to move out“PushCounter”to the left box 0 of “+”, and change right 0 into 1.

![](media/ffc0cb006b9d0795465f1d2fdcb11f40.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Basic”to drag out“pause (ms) 100”into“forever”;

B. Then copy“set Laststate to 0”once and leave it beneath the“pause (ms) 100”. Then drag out“State”to replace 0.

![](media/1e1adbda561c6e5799da9faed4c4490c.png)

A. Go to“Logic”→“if..true...then...else”

B. Put it into“forever”. And move “=”block into“true”box.

![](media/708194a4d39220833881979bc0b6a76b.png)

(11) A. Click “Math”→“remainder of 0 ÷1”；

B. Leave it to the left 0 box.

C. Replicate the“PushCounter”once and remain it at the left 0 box of “÷”. Alter 1 into 2.

![](media/2ba3e0a71e72f41f3fa0f0edce8b4f84.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“Advanced”→“Pins”→ “digital write pin P0 to 0”, and place it below the block “if remainder...then”;

Red LED is connected to P4, therefore, click the drop-down triangle button to select P4.

Then copy“digital write pin P4 to 0”once and leave it beneath “else”block. Change 0 into 1.

![](media/4ef8a221e35f074d38df1b7df821ed87.png)

Complete Program：

| ![](media/71e262b12b17cd95dbc188a5cdbb1a21.png)<br />![](media/2132535a7617eb64245c9c8e877e9760.png) | “on start”: command block runs once<br /> to start program.<br />Turn off LED dot matrix<br />Set “PushCounter”, “State” and “Laststate” to 0<br /><br /><br />The program under the block “forever” <br />runs cyclically.<br /><br />The written value “x”=the value of PushCounter<br /><br />Set State to digital signal (1/0) read by P0<br /><br />When State≠Laststate, <br />the next program will be executed<br />When State=1, <br />the next program will be executed<br />Set PushCounter to PushCounter+1<br />Set variable “Laststate” to State<br /><br />When the remainder of PushCounter <br />divided by 2 is equal to 0, <br />the the program under “remainder...then”<br />will be executed.<br />Set P4 to low level, Red LED goes off.<br /><br />When the remainder of PushCounter <br />divided by 2 is not equal to 0, <br />the program under “else”will be executed.<br />Set P4	to high level, Red LED lights up. |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/6d103c84eb582c45f26a183231d18613.png)

Then click the triangle button and select“Python”to see the Python language code：

![](media/4b6a7479be66c6830414e6ee1c4620de.png)

**6. Test Results：**

Hook up, upload the code, plug in power and press the button. The external LED lights up, press the button again, the LED goes off, alternately.

**7. Extension Project：**

Press button, red LED gradually gets brighter.

![](media/f576371bc6b429e70c7f37f8c016f45b.png)

### Project 25：PIR Motion Alarm

1.  **Description：**

In this lesson, we use the Keyestudio PIR motion sensor to detect if someone moves nearby. If it does, the signal terminal of sensor will output a high level 1, otherwise a low level 0 will be output. Pay attention that this sensor can only detect the human body in motion rather in static state. The detection distance is up to 3 meters.

In the project, we connect the Keyestudio PIR motion sensor to the Keyestudio Micro:bit T type shield through the breadboard to control the active buzzer.

2.  **Components List:**

| ![img](media/wps392.jpg) | ![img](media/wps393.jpg)             | ![img](media/wps394.jpg) | ![img](media/wps395.jpg) |
| ------------------------ | ------------------------------------ | ------------------------ | ------------------------ |
| Micro:bit board*1        | keyestudio Micro:bit T Type Shield*1 | Active buzzer*1          | 2.4KΩResistor*1          |
| ![img](media/wps396.jpg) | ![img](media/wps397.jpg)             | ![img](media/wps398.jpg) | ![img](media/wps399.jpg) |
| S8050 Triode*1           | Breadboard *1                        | Breadboard wire          | Dupont wire              |
| ![img](media/wps400.jpg) | ![img](media/wps401.png)             | ![img](media/wps402.png) |                          |
| AA Battery*6             | KeyestudioPIR motion sensor*1        | 6 AA battery holder*1    |                          |
| ![img](media/wps403.png) | ![img](media/wps404.jpg)             |                          |                          |
| USB cable*1              | Specialized power module*1           |                          |                          |

3.  **Schematic Diagram：**

<img src="media/ac9c666dc60bf75d17bd6a6c3fd02aff.png" style="zoom:50%;" />

4.  **Wiring Graph**：

**(Note: the specialized power module should be connected to breadboard, and the DIP switch is dialed to +3V)**

![](media/f8d9dc13b147b5fb5a1645d4e083c776.png)

**5. Test Code：**

**Code 1：**

Hook up according to the above graph. The S end of PIR motion sensor is connected to P1. Link computer with micro:bit board. Then enable the online programming tool to design the code.

![](media/c417bb6b47a2397f3420697b99d72c8f.png)

(1) A. Go to “Basic”→“more”→“clear screen”;

B. Place it into “on start” block

(2) Enter“Basic”to move“show number 0”block into“forever”block.

![](media/e5973d226056815cbf7f4a5562290491.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) A. Click “Advanced”→“Pins”→“digital read pin P0；

B. Drag it into 0 box, PIR motion sensor is attached to P1, so set to P1.

![](media/bd6779cdaf23e794de6627787b6f0283.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4) Click“Basic”to move“pause (ms) 100”block below “digital write...P2 to 1”block, set to 500ms.

![](media/1ff38ceefa4c600fea3d5f73ed08a85a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Advanced”→“Serial”→“serial write value “x”=0”；

B. Drag it into“forever”

C. Copy“digital read pin P1”and move it into 0 box

D. Change“X”into“digital signal”.

![](media/5a479782aa5b9e7b75a36a6b8e4874cc.png)

Complete Program：

| ![](media/210ad5ffaceaaa73ce73ede133400e43.png) | “on start”: command block runs <br />once to start program.<br />Clear the screen<br /><br />The program under the block <br />“forever” runs cyclically.<br /><br />LED Dot matrix shows the digital <br />signal(1/0）read by P1. <br />Delay in 500ms<br /><br />The digital signal serial writes=the digital <br />signal(1/0）read by P1. |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/3e407d79b7e6e0fd77e21b4a402b8085.png)

Then click drop-down triangle button and select“Python”to see the Python language code

![](media/e69010ab4c1337af6fed0d980acd6ce8.png)

Hook up, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate(115200). Click“OK”and “Connect”

When the PIR motion sensor detects people around, serial monitor and Micro:bit board will show “1”; otherwise both of them display “0”

![](media/6073f5ee860986fb8ba4e37d3a84e6d4.png)

**Code 2：**

Hook up according to the above graph. The S end of PIR motion sensor is connected to P1 and active buzzer is linked with P2. Link computer with micro:bit board. Then enable the online programming tool to design the code.

![](media/c417bb6b47a2397f3420697b99d72c8f.png)

A. Go to“Basic”→“more”→“clear screen”;

B. Place it into“on start”block

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Go to“Logic”→“if...true..then...else”.

B. Move it into“forever”

C. Drag out“=”block into“true”box

![](media/de3f43e60bd873ab2ad906f57fba5e4e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Advanced”→“Pins”→“digital read pin P0”

B. Place it into left“0”box.

C. PIR motion sensor is connected to P1, so set to P1

D. Alter right 0 into 1.

![](media/81d4fd3b528fa6192d7960132be8d631.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Advanced”→“Pins”→“digital write pin P0 to 0”

B. Place it below the“digital read pin...1..then”block

C. Active buzzer is connected to P2, so set to P2

D. Alter right 0 into 1.

![](media/cfcc1d2dc6a23050c544a003ebcfd428.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) Click“Basic”to move“show icon”below the block “digital write....P2..1”

![](media/b18165e6ea4e4141d2e50e439f9e1b72.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6) A. Duplicate the code string ![](media/ce14a886b01a56c4a158f5aea80ca807.png)once and move it below the“else”block.

B. Change 1 into 0. Click the drop-down triangle button to choose“![](media/1a20abb47ef4f75b1b8f3cbd775547ba.png)”

![](media/5a92954b6e1fbd7ea442340fe2df28bd.png)

Complete Program：

| ![image-20230426105928932](media/image-20230426105928932.png) |
| ------------------------------------------------------------ |
| “on start”: command block runs once to start program.        |
| Clear the screen.                                            |
| The program under the block “forever” runs cyclically.       |
| When the digital signal read by P1 is 1, the program under “if digital read pin....then” will be executed. |
| Set P2 to high level(1), active buzzer emits sound.          |
| LED shows a heart pattern.                                   |
| When the digital signal read by P1 isn’t equal to 1, the program under “else” will be executed |
| Set P2 to low level(0), active buzzer doesn’t emit sound.    |
| Dot matrix shows“![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml12036\wps405.jpg)”. |

Click “JavaScript", you will view the corresponding JavaScript code:

![](media/f7a0d0d61e4fa872928bcbb06e1600b5.png)

Then click drop-down triangle button and select“Python”to see the Python language code：

![](media/58c8a32924f2cbf346904a9ef3984dc5.png)

**6. Test Results：**

Wire up, upload the code and power on. When PIR motion sensor detects people around, active buzzer will emit sound and Micro:bit will show <img src="media/wps406.jpg" alt="img" style="zoom:50%;" />pattern; otherwise, buzzer stops emitting sound and <img src="media/wps407.jpg" alt="img" style="zoom:50%;" /> appears on Micro:bit board.

7.  **Extension Project：**

When sensor detects people around, make Micro:bit cyclically shows the pattern <img src="media/wps408.jpg" alt="img" style="zoom:50%;" />and <img src="media/wps409.jpg" alt="img" style="zoom:50%;" />; otherwise, the patter<img src="media/wps410.jpg" alt="img" style="zoom:50%;" />will be displayed.

![](media/617da555e0b21170f485f32b7f2cce6f.png)

### Project 26： Flame Alarm

1.  **Description：**

There is inevitable accident in our life, like fire disaster. What should we do to avoid this grave incident?

The flame sensor can tackle this problem.

As it fairly sensitive to flame, flame sensor (IR receiving triode) is generally applied to search for fire sources. It utilizes specific infrared receive tube to detect flame, and then converts the brightness into changed level signal.

Therefore, when detecting the fire nearby, it will alarm to remind people to put out the fire in time. Moreover, it can control the fire extinguisher to quell the fire automatically as well when connected to fire annihilator.

Note: Flame sensor (IR receiver Triode) can detect flames or light sources with a wavelength in the range of 760nm to 1100 nm, and its detection angle is about 60 degrees.

**2. Components List:**

| ![img](media/wps411.jpg)              | ![img](media/wps412.jpg)             | ![img](media/wps413.jpg) | ![img](media/wps414.jpg)              |
| ------------------------------------- | ------------------------------------ | ------------------------ | ------------------------------------- |
| Micro:bit motherboard*1               | keyestudio Micro:bit T Type Shield*1 | Passive Buzzer*1         | Flame sensor（IR receiving triode）*1 |
| ![img](media/wps415.jpg)              | ![img](media/wps416.jpg)             | ![img](media/wps417.jpg) | ![img](media/wps418.jpg)              |
| S8050 Triode*1                        | Breadboard*1                         | Breadboard wire          | Red LED*1                             |
| ![img](media/wps419.jpg)              | ![img](media/wps420.png)             | ![img](media/wps421.png) | ![img](media/wps422.jpg)              |
| Breadboard Specialized power module*1 | 6 AA Battery Holder*1                | Micro USB cable*1        | AA Battery Holder*6                   |
| ![img](media/wps423.jpg)              | ![img](media/wps424.jpg)             | ![img](media/wps425.png) | ![img](media/wps426.jpg)              |
| 2.4KΩResistor*1                       | 220ΩResistor*1                       | 51ΩResistor*1            | 10KΩ Resistor*1                       |

**3. Schematic Diagram: **

**(Special note: both ends of breadboard specialized power module must be inserted into breadboard, and dial the DIP switch to +3V on power module )**

<img src="media/c8f5f4e112fae5aa7c3313c46917babd.png" style="zoom:50%;" />

**4. Wiring Graph：**

 **(Special note: both ends of breadboard specialized power module must be inserted into breadboard, and dial the DIP switch to +3V on power module )**

![](media/0a8e0567a587da5b6317cbdb32f4768c.jpeg)

![](media/5bf1f1f05cedd907261bb93e986d193b.png)

**5. Test Code：**

**Code 1：**

Wire up according to the above diagram, flame sensor is connected to P2. Link computer with micro:bit board. Then enable the online programming tool to design the code.

A. Go to “Basic”→“more”→“clear screen”;

B. Place it into “on start” block

![](media/c417bb6b47a2397f3420697b99d72c8f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“Basic”to move“show number 0”block into“forever”block.

![](media/e5973d226056815cbf7f4a5562290491.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click “Advanced”→“Pins”→“digital read pin P0；

B. Drag it into“0” box. Flame sensor is attached to P2, so set to P2.

![](media/211f1c9adaf0bfcbfda257ff294bc0c2.png)

Click“Basic”to move“pause (ms) 100”block below “digital read...P2”block, set to 500ms.

![](media/0ced59f60827894d57814d69385da976.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Advanced”→“Serial”→“serial write value “x”=0”；

B. Drag it into“forever”

C. Copy“digital read pin P2”and move it into 0 box

D. Change “X”into“digital signal”.

![](media/12848d7718416c1a6f0a07b0ce5635f0.png)

Complete Program：

| ![](media/1aa41ccbf22108b994d7bfdf1541bf31.png) | “on start”: command block runs <br />once to start program.<br />Clear screen<br /><br />Under the block“forever”，<br />program runs cyclically.<br /><br />LED Dot matrix shows the digital <br />signal(1/0）read by P2. <br />Delay in 500ms<br />The digital signal serial writes=the <br />digital signal(1/0）read by P2. |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:
![](media/971c6b2a1453b86d54d8765cc555b1c0.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/8b5d0f08112390cd1d7ecd0e0de919d7.png)

Hook up, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate to 115200 (the baud rate of USB serial communication of Micro:bit is 115200 through the test). 

Click“OK”and “Connect”

When the flame sensor detects the flame, serial monitor and Micro:bit board will show “1”; otherwise both of them display “0”

![](media/dd7c195cd5e2f30c095ccfbb46bd280c.png)

**Code 2：**

Hook up according to the above connection diagram, passive buzzer is linked with P0, red LED is connected to P1 and flame sensor is linked with P2. Link computer with micro:bit board. Then enable the online programming tool to design the code.

A. Go to “Basic”→“more”→“clear screen”;

B. Place it into “on start” block![](media/c417bb6b47a2397f3420697b99d72c8f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Go to“Logic”→“if...true..then...else”.

B. Move it into“forever”

C. Drag out“=”block into“true”box

![](media/de3f43e60bd873ab2ad906f57fba5e4e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Advanced”→“Pins”→“digital read pin P0”

B. Place it into left o box

C. Flame sensor is connected to P2, so set to P2

D. Alter right 0 into 1.

![](media/3364755bfef5634673dbd36e5ba52d7b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“Basic”to move“show icon”below the block “digital read P2..1...then”; then click the triangle button to select“![](media/88ba75d49842b1954ba698144998963d.png)”pattern

![](media/ba8b1a47cbc94f6d37bdc342e572338b.png)

A. Enter“Music”→“play tone Middle C for 1 beat”

B. Place it beneath the“show icon” block

C. Separately click “Middle C”and“1 beat”to set“High C”and “1/4”

![](media/b740de10a32fe132c13c1f30297ee7e7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Advanced”→“Pins”→“digital read pin P0 to 0”

B. Place it under the block“if digital read pin P2=1 then”

C. Red LED is connected to P1, so set to P1

D. Alter right 0 into 1.

![](media/0f81a9b33fd7ac9de501a21c7e575a4d.png)

Click“Basic”to move“pause (ms) 100”block below the“digital write...P1 to 1”block

![](media/610acac8f5b01b69a52bac8d8765ae9c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Duplicate code string ![](media/0277896466762b80f396c6d272418a97.png)once and place it beneath “pause(ms)100”block, then change 1 into 0.

![](media/01067e28f6a086d7ed9a3d7a9f9fbe9f.png)

Replicate code“digital write pin P1 to 0”twice and leave them below the “else”block.

Passive buzzer is linked with P0, so set to P0.

![](media/e3db9f0640801525a71a2daba3135f2d.png)

Click“Basic”to move“show icon”below“digital write pin P1 to 0”block.

Then click the triangle button to set“![](media/214004b6a0dbbb45475899bc86854663.png)”.

![](media/96eb3eaf236e3115436179513a2f8779.png)

Complete Program：

| ![](media/9d5ae5114d3315bcf1eebd864df27f5e.png) | “on start”: command block runs once to start program.<br /><br />Clear screen<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />When the digital signal read by P2 is 1, <br />the program under “if digital...then”will be executed.<br />Dot matrix shows “ ![img](media/wps427.jpg)”<br />Play tone high c for 1/4 beatSet P1 to high level(1), <br />red LED lights up<br />Set P1 to low level(0), red LED goes off<br /><br />When the digital signal read by P2 isn’t 1, <br />the program under “else” will be executed.<br />Set P0 to low level(0), passive buzzer doesn’t emit sound<br />Set P1 to low level(0), red LED goes off<br />Dot matrix shows“![img](media/wps428.jpg)” |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/08395b81706ec36fa1500cbd937e1175.png)

Then click drop-down triangle button to select “Python”to see the Python language code:

![](media/b9ed336f7c931ebaa8cafea12773f156.png)

**6. Test Results：**

When the flame is detected, Micro:bit board displays <img src="media/cd96d9dd07c109ac1dd21ef9803c95d0.png" style="zoom:33%;" />, passive buzzer rings and red LED flashes simultaneously; otherwise, <img src="media/175414b3ac9ce30ed0e78f1d83643fdb.png" style="zoom:33%;" /> appears, passive buzzer and red LED don’t response.

### Project 27：Seesaw Movement

1.  **Description：**

There are 2 tilt switches which adopt SW-200D vibration component in this kit.

![](media/e4dab002b7cbcc2f24fb13dd230cb25b.png)

The SW-200D vibration switch element adopted on this module is the ball type tilt induction unidirectional trigger switch, one end of which is gold-plated(trigger end), another one is silver-plated (conductive end). 

When the module is in the horizontal position or inclined to the conductive end (silver-plated), the switch element is in OFF state and the signal end outputs the high level; when the module is tilted to the trigger terminal (gold-plated), the switch element is ON state, and the signal terminal outputs the low level.

In the project, we connect tilt switch, breadboard and Micro:bit T type shield together. By reading the result on the serial monitor, we observe the two LED brightness.

**2. Components List:**

| ![img](media/wps429.jpg)             | ![img](media/wps430.jpg) | ![img](media/wps431.jpg) | ![img](media/wps432.png) | ![img](media/wps433.jpg) |
| ------------------------------------ | ------------------------ | ------------------------ | ------------------------ | ------------------------ |
| Micro:bit Main Board*1               | Breadboard*1             | Red LED*2                | Tilt Switch*2            | 10KΩResistor*2           |
| ![img](media/wps434.jpg)             | ![img](media/wps435.jpg) | ![img](media/wps436.jpg) | ![img](media/wps437.png) |                          |
| Keyestudio Micro:bit T Type Shield*1 | Breadboard Wire          | 220ΩResistor*2           | Micro USB Cable*1        |                          |

**3. Schematic Diagram：**

![](media/c94d6e9b093b6dc6e4cb7f0bddce2a35.png)

**4. Wiring Graph：**

**![](media/af0c312c81dd63da6b08732c65a3e287.png)5. Test Code：**

**Code 1：**

Hook up according to the above connection diagram, the two tilt switches are attached to P6 and P0.

Link computer with micro:bit board. Then enable the online programming tool to design the code.

Click “Led”→”more”→“led enable false”；

Combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click “Advanced” to go to “Serial”, and drag“serial write value “x”=0”into “forever”.

![](media/fe7e64859506fdee1166cac790d75691.png)

Enter “Advanced”→“Pins”→“digital read pin P0”

Keep it into 0 box.

The tilt switch is attached to P6, therefore, set to P6. And change“x”into“digital signal”.

![](media/69e350936af9eb2ff40fb22d0be02d36.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click “Basic”to drag out“pause (ms) 100”, then leave it below “serial write.......P6”block. And set to 300ms.

![](media/267043dfa7ffb87dd69e10182c3c3741.png)

Complete Program：

| ![](media/ddf1350d5dab12eb6dd500623fd86aa9.png) | “on start”: command block runs <br />once to start program.<br />Turn off LED dot matrix<br /><br />The program under the block <br />“forever” runs cyclically.<br /><br />digital signal that serial writes equals <br />to the digital signal read by P6（1/0）<br />Delay in 300ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/db7b9949de92ee7c4159830658da7836.png)

Then click drop-down triangle button to select “Python”to see the Python language code:

![](media/328cf9de4a89d0ab2842d7c9a6031c89.png)

Hook up, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate to115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test). Click“OK”and “Connect”.

When the tilt switch is inclined to the transmitting end, serial monitor will show “1”; when it tends to conductive end or in horizontal, the serial monitor will display “0”. As shown below:

![](media/7d289e12e29ea15a2c4800ffca2dff34.png)

**Code 2：**

Hook up according to the above connection diagram, the two tilt switches are attached to P6 and P0 and 2 LEDs are linked with P2 and P4.

Link computer with micro:bit board. Then enable the online programming tool to design the code.

1.  Click “Led”→”more”→“led enable false”; combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](media/9282863d7f73553853b90e167f6ae8e1.png)

2.  A. Click“logic”and move out “=”and“if.true..then”.

B. Lay down“if..true...then” into “forever”.

C. Then drag the“and”block into“true”box.

D. Copy “=”twice and leave them to the left and right boxes of “and”block.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Go to“Advanced”→“Pins”→“digital read pin P0”

2.  Place it at the first “0”box.

3.  The tilt switch is connected to P6, so set to P6.

4.  Change the second “0” into 1.

![](media/dde247887183e8003a2bcbe7643a27ae.png)\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)

1.  Click “Variables”→“Make a Variable...”→“New variable name：”.

2.  Enter“brightness1”in the blank box and click“OK”. Then the
    variable“brightness1”is generated.

3.  Move“brightness1”to the third“0”box. Click the button at the second “=”block to set“≠”.
    
4.  Finally, change 0 into 1023.

![](media/92e05a1b5f3a95367262f84bb96d8b23.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) Go to“Variables”to get“set brightness1 to 0”, place it beneath the block“if digital read pin P6=1.......1023”
![](media/74e45a26e8df296412f6822589853cb2.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6) Click“Math”to move“+”block into 0 box.
![](media/8d4f272df9d70304cb39719477650c92.png)

Enter“Variables”to find out“brightness1”, then lay down it to the left“0”box and change right“0” into 1. ![](media/9d11518a0645dfeabfa88d810c8aaf09.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(7)

1.  Enter “Advanced” →“Pins”→“analog write pin P0 to 1023”；

2.  Keep it below the block“set brightness....1”

3.  Red LED is linked with P4, so set to P4

4.  Copy the“brightness1”once and drag it into 1023 box.
    ![](media/48d7f0307369ee45de60a528a3d309d3.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
(8)

1.  Click“Advanced”to enter“Control”and drag“wait (us) 4”beneath the block “analog..... to brightness 1”
    
2.  Change 4 into 10.

![](media/2dd91156ecf9594f0f2198a5a478812a.png)

(9) Duplicate the code string <img src="media/20c29694930ded5033b3b0903f537b5d.png" style="zoom:67%;" />once and put it into“forever”, and change“digital read pin6 1”into “digital read pin6 0”and 1023 into 0. Then set to ![image-20230517142505831](media/image-20230517142505831.png).

![](media/d0268585d4a72524258aab92ea70960e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(10)

And let’s create the variable“brightness2”in same way.
Replicate the code string: <img src="media/202ce650aed37845db098764f8b8cc0c.png" style="zoom:67%;" /> once and place it into “forever”block.

The tilt switch is attached to P0, and the red LED is linked with P2.

Set to“digital read pin P0=1”and “analog write pin P2”, change “brightness1” into “brightness2”.

![](media/07a28421318575296ff274f2d31b311d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(11) Duplicate code string ![](media/eb199d2837bdf660e4ccdff4508acfc7.png) once and keep it into“forever”. Change 0 into 1023.

Set to“digital read pin P0=0” and“set brightness2 to brightness+1”

![](media/2ecc23acea6b080abe555c2b1cb55a40.png)

Complete Program：

| ![](media/0b39a48837a14f6627e574573f34b4d8.png)![](media/29bcc91027f6736c6ab5d2d057f0aec8.png) |
| ------------------------------------------------------------ |
| **“on start”: command block runs once to start program.**    |
| Turn off LED dot matrix                                      |
| **The program under the block“forever”runs cyclically.**     |
| When the digital signal read by P6 is 1 and brightness1 isn’t equal to 1023. <br />The program under“if..1..and.1023..then”block will be executed. |
| Set variable brightness1 to brightness1+1                    |
| Set the analog value of P4 to brightness1                    |
| Delay in 10us                                                |
| When the digital signal read by P6 is 0 and brightness1 isn’t equal to 0. <br />The program under “if..0..and.0..then”block will be executed. |
| Set variable brightness1 to brightness1-1                    |
| Set the analog value of P4 to brightness1                    |
| When the digital signal read by P0 is 1 and brightness2 isn’t equal to 0. <br />The program under“if..1..and.0..then”block will be executed. |
| Set variable brightness2 to brightness2-1                    |
| Set the analog value of P2 to brightness2                    |
| Delay in 10us                                                |
| When the digital signal read by P0 is 0 and brightness2 isn’t equal to 1023. <br />The program under“if..1..and.1023..then”block will be executed. |
| Set variable brightness2 to brightness2+1                    |
| Set the analog value of P2 to brightness2                    |
| Delay in 10us                                                |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/f2c80f561982749f07b1b05d458946ea.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/2c6e82548b2f256b93be688f3698f4cd.png)

**6. Test Results：**

Hook up, upload the code and plug in power. When two tilt switches are inclined to one side, one LED gets dim gradually, another one get bright instead. And finally, one LED is off, and another one is brightest

**7. Extension Project：**

Two tilt switches control 2 LEDs. When they aren’t inclined. A LED lights up, and another one goes off. On the contrary, the LED that lights up will go off, and another one will be on.

![](media/d92c1ca880a6a08e640c402e2e2314a8.png)

### Project 28：Night Lamp

1.  **Description：**

In our daily life, we find that many lamps in the public automatically light up at night, and go off during the day.

Are these lights controlled by someone? In fact, they are are equipped with a photosensitive element, which can detect the brightness of the ambient light.

The photocell sensor (photoresistor) is a resistor made by the photoelectric effect of a semiconductor. It is very sensitive to ambient light, thus its resistance value vary with different light intensity.

We use its features to design a circuit and generate a photoresistor sensor module. The signal end of the module is connected to the analog port of the microcontroller. When the light intensity increases, the resistance decreases, and the voltage of the analog port rises, that is, the analog value of the microcontroller also goes up. Otherwise, when the light intensity decreases, the
resistance increases, and the voltage of the analog port declines. That is, the analog value of the microcontroller becomes smaller. Therefore, we can use the photoresistor sensor module to read the corresponding analog value and sense the light intensity in the environment.

It is widely applied to various light-controlled circuits, such as the control and adjustment of lights, as it is generally used for light measurement, light control and photoelectric conversion.

We connect photoresistor, keyestudio Micro:bit T Type shield and Breadboard together. The test results will be displayed on serial monitor or dot matrix.

2.  **Components List:**

| ![img](media/wps438.jpg)             | ![img](media/wps439.jpg) | ![img](media/wps440.jpg) | ![img](media/wps441.jpg) | ![img](media/wps442.jpg) |
| ------------------------------------ | ------------------------ | ------------------------ | ------------------------ | ------------------------ |
| Micro:bit motherboard*1              | Photoresistor*1          | Red LED*1                | 220ΩResistor*1           | 10KΩResistor*1           |
| ![img](media/wps443.jpg)             | ![img](media/wps444.jpg) | ![img](media/wps445.png) | ![img](media/wps446.jpg) |                          |
| keyestudio Micro:bit T Type Shield*1 | Breadboard wire          | Micro USB cable*1        | Breadboard*1             |                          |

**3. Schematic Diagram：**

<img src="media/e16984215862e7be5d2760e63cb962c9.png" style="zoom:67%;" />

**4. Wiring Graph：**

![](media/cd3c44f6075d983d688b31328c505ceb.png)

5.  **Test Code：**

As we know, there are digital and analog ports in Arduino.

For Micro:bit board, there are some pins for reading analog vale. As shown below:

<img src="media/a3fe86b3bc62e6b1ff4c8b5c06528792.png" style="zoom:67%;" />

We measure the analog value of P2 by photoresistor, then change the ambient light intensity, the analog value is shown on serial monitor(CoolTerm). The LED brightness is controlled by photoresistor.

**Code 1：**

Hook up according to the above connection diagram, photoresistor is connected to P2. Link computer with micro:bit board. Then enable the online programming tool to design the code.

Click“Led”→“more”，and find out“led enable false”, then put it in the block“on start”

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter “Advanced”→“Serial”→“serial write value “x”=0”.

Move it into“forever”

![](media/fe7e64859506fdee1166cac790d75691.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“Advanced”→“Pins”→“analog read pin P0”

B. Place it at the “0”box

C. The photoresistor is lined with P2, therefore, set to P2

D. The left “x” is changed into“analog signal”.

![](media/83b8e10b1c05139de47addb918667ae7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Go to “Basic”→“pause (ms) 100”

B. Lay down it into“forever”, set to 200ms.

![](media/a1811e0d2e32e4b0f5d4c9627156487d.png)

Complete Program：

| ![](media/44056436843707d084e3a9300200e8d8.png) | “on start”: command block runs once <br />to start program.<br />Turn off LED dot matrix<br /><br />forever: The program runs cyclically.<br /><br />The analog signal that serial writes is <br />equivalent to the analog signal read <br />by P2.<br /><br />Delay in 200ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/b5319feab2938de357afe14cdf0ea274.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/20f91fae57d41802160b199c12d5398c.png)

Hook up, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test). Click“OK”and “Connect”.

Serial monitor shows the corresponding value. The analog value increase gradually as the ambient light intensity gets weak slowly; otherwise, the analog value reduces bit by bit. As shown below:

![](media/8c171307244fb86b2184ea235be3802e.png)

**Code 2:**

Note: You could set the analog value through the test result.

Connect photoresistor to P2, red LED to P4. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

（1）A. Click“Led”→“more”，and find out“led enable false”

B. Put it in the block“on start”

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)A. Enter“Logic”→“if...true...then...else”.

B. Move it into“forever”and drag “=”into“true”box

![](media/5c8c54d326c184705c0ffb4f74bff652.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) A. Go to“Advanced”→“Pins”→“analog read pin P0”，

B. Put it into the left “0”box

C. The photoresistor is attached to P2, then set to P2.

D. Click the drop-down triangle button of “=” to select “\>”, alter 0 into 400.

![](media/77985029d03e2bb7156e58b1d7c6c37f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Go to“Advanced”→“Pins”→“digital write pin P0 to 0”

B. Leave it beneath“analog .....P2\>400 then”block.

C. The red LED is attached to P4, then set to P4 and revise 0 into 1.

![](media/e551c56bd7ba07c71ce57cdf3d5981c7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) Duplicate“digital write pin P4 to 1”once, then keep it beneath “else” block. Change 0 into 1.

![](media/95742b614bc649afad091f6637043373.png)

Complete Program：

| ![](media/637ae0fca94895e7472ac88713fba352.png) | “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />When the signal read by P2 is greater than 400, <br />the next program will be executed.<br />Set P4 to high level to turn on LED<br /><br />When “the signal read by P2 is greater than 400” is not met, <br />the program below the else will be executed.<br />Set P4 to low level to turn off red LED |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/42c323ef0120d55335a87d1f23f7dc68.png)

Then click drop-down triangle button and select“Python”to see the Python language code：

![](media/6724675d0676fe0ca570991a52c8c376.png)

6.  **Test Results：**

Hook up via connection diagram, upload the program and power on. When the ambient light intensity gets weak, the photoresistor’s input value is greater than or equal to 400, LED will be on; on the contrary, LED will go off.

7.  **Extension Project：**

Connect one more passive buzzer at P0. When the detected analog value of the light intensity is greater than 400, the LED light is on and the passive buzzer plays "1 (Do), 2 (Re ), 3(Mi), 4(Fa), 5(Sol), 6(La), 7(Si)”; when the analog value is greater than 100 and less than or equal to 400, the LED flashes and passive buzzer doesn’t work instead; when the analog value is greater than or equal to 100, the LED light and the passive buzzer don’t work.

![](media/181fc523b0d77cce252148de23399b0d.png)

![](media/fbfbc57dd6c52ec8f17e419280ad2ebf.png)

### Project 29：DIY Voice-controlled Light

1.  **Description：**

The sound sensor mainly adopts a high-sensitivity microphone element and LM386 chip. High-sensitivity microphone components are used to detect external sounds. The LM386 chip can amplify the sound detected by the high-sensitivity microphone, and the maximum multiple is 200 times.

When in use, we can adjust the multiple of the sound by rotating the potentiometer on the sensor. When adjusting the potentiometer clockwise to the end, the magnification is maximized.

Therefore, it can be used to make voice-activated robots, switches and alarms, etc.

In this project, we connect the signal of the sound sensor to P0 of the Micro:bit board, and detect the magnitude of the external sound by reading the analog value of the P0 terminal. During the detection, the louder the external sound, the greater the analog value; the smaller the external sound, the smaller the analog value.

Simultaneously, we will display the measured analog value on the serial monitor and control LED brightness.

**2. Components List:**

| ![img](media/wps447.jpg) | ![img](media/wps448.jpg)             | ![img](media/wps449.jpg)   | ![img](media/wps450.jpg) | ![img](media/wps451.jpg) |
| ------------------------ | ------------------------------------ | -------------------------- | ------------------------ | ------------------------ |
| Micro:bit motherboard*1  | keyestudio Micro:bit T Type Shield*1 | keyestudio  sound sensor*1 | Red LED*1                | 220ΩResistor*1           |
| ![img](media/wps452.jpg) | ![img](media/wps453.jpg)             | ![img](media/wps454.png)   | ![img](media/wps455.jpg) |                          |
| Breadboard*1             | Breadboard wire                      | Micro USB cable*1          | Breadboard wire          |                          |

**3. Schematic Diagram:**

<img src="media/c0866304e0b6013a64c265921bb9fef1.png" style="zoom:50%;" />

**4. Wiring Graph：**

![](media/81c47c34dec45431d51eda327c0709fe.png)

**5. Test Code：**

**Code 1：**

Hook up according to the above connection diagram, the S end of sound sensor is attached to P0. Link computer with micro:bit board. Then enable the online programming tool to design the code.

Click“Led”→“more”，and find out“led enable false”.

Put it in the block“on start”

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter “Advanced”→“Serial”→“serial write value “x”=0”.

B. Move it into“forever”

![](media/fe7e64859506fdee1166cac790d75691.png).

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Enter“Advanced”→“Pins”→“analog read pin P0”.

B. Place it at the “0”box

C. Change“x”into“Sound analog value”

![](media/1d73d45b05591fd0c8ea1e9038b1734c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) A. Go to“Basic”→“pause (ms) 100”

B. Lay down it into“forever”block.

![](media/24d0a7b6ff92ca81dd8ba6630060ec37.png)

Complete Program：

| ![](media/39b6be6fa563011c6e1ea8bbec408693.png) | “on start”: command block runs <br />once to start program.<br />Turn off LED dot matrix<br /><br /><br />Forever: The program runs cyclically.<br /><br />The Sound analog value that serial <br />writes equals to the analog signal <br />read by P0.<br />Delay in 100ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click “JavaScript", you will view the corresponding JavaScript code:

![](media/5e716a39deff0259d66b573c20601539.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/cf9c5bc976afd7526d709d196673375c.png)

Wire up, upload the program, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200 (the baud rate of USB serial communication of Micro:bit is 115200 through the test). Click“OK”and“Connect”.

Change the ambient sound intensity and the displayed result will be on the serial monitor, as shown below:

![](media/e897ea4e9c7904c6d1a7866693440bc4.png)

**Code 2:**

Note: You could set the analog value through the test result.

Connect sound sensor to P0, red LED to P2. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

Click“Led”→“more”，and find out“led enable false”

Put it in the block“on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“Logic”→“if...true...then...else”.

Move it into“forever”and drag “=”into“true”box![](media/5c8c54d326c184705c0ffb4f74bff652.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to“Advanced”→“Pins”→“analog read pin P0”，

Put it into the left“0”box

Click the drop-down triangle button of “=” to select “\>”, alter 0 into 100

![](media/2e1114adc9bc4515a4542575dfa94345.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*


![](media/52b7d3bd92abb1ebba6775436bf93964.png)

Go to“Advanced”→“Pins”→“digital write pin P0 to 0”，

Leave it beneath“analog.... P0\>100 then” block.

The red LED is attached to P2, then set to P2 and revise 0 into 1.



![](media/53901e13fea7f17e34ff6b31d6ce8c53.png)

Go to “Basic”→“pause (ms) 100”

Lay down it beneath “digital write P2 to 1”, set to 1000ms.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Replicate“digital write pin P2 to 1” once and leave it beneath “else”block, change 1 into 0.

![](media/79ed37626d1749135e8d08aa9d414245.png)

Complete Program：

| ![](media/286f1f9958cce7f07b9ccc18923f65d5.png) | “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br /><br />The program under the block “forever” runs cyclically.<br /><br />When the analog signal read by P0 is greater than 100, <br />the program under “if...P0..100..then” will be executed.<br />Set P2 to high level(1), LED is on.<br />Delay in 1000ms<br /><br />When the analog signal read by P0 is not greater than 100, <br />the program under the “else” block will be executed. <br />Set P2 to low level(0), red LED will go off |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:
![](media/742d474bfeec191cb04b5c4fbc748746.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/ce26e2d8a7d284330d9f39a0c49d2c56.png)

**6. Test Results：**

Hook up, upload the program and plug in power. When the analog value of sound intensity is greater than 100. LED will be on 1s; otherwise, LED will go off.

**7. Extension Project：**

When the analog value of sound intensity is greater than 150,LED will light up for 5s and Micro:bit board shows<img src="media/9a8fabd3c621427d2532fdd7111a9af5.png" style="zoom:33%;" />；Otherwise，LED will go off and pattern <img src="media/42f68dfdf1488bbefc6d002459aa6b0f.png" style="zoom:33%;" /> will appear on Micro:bit board.

![](media/2605dc16066b7a9e345096b859f06275.png)

### Project 30： Dim Lamp

1.  **Description：**

When we do the experiment, we often use the adjustable potentiometer which is equivalent to a 10K adjustable resistor. Rotating the potentiometer essentially changes its resistor value. Then the change of resistor value is converted into the change of voltage.

We connect the signal terminal of the adjustable potentiometer to P0 of the Micro:bit board. By reading the analog value of the P0 terminal and rotating the potentiometer, the measured analog value is displayed on the CoolTerm serial monitor.  

Next, we control the LED brightness by the potentiometer. When designing the code, we need to set up. The range of the analog value is 0-1023; the brightness of the LED is in the range of 0-255. In addition, we need to use the mapping function to map the values in the 0-1023 to 0-255.

After setting well, we can control the brightness of the LED by rotating the potentiometer.

2.  **Components List:**

| ![img](media/wps456.jpg) | ![img](media/wps457.jpg)             | ![img](media/wps458.jpg)   | ![img](media/wps459.jpg) |
| ------------------------ | ------------------------------------ | -------------------------- | ------------------------ |
| Micro:bit motherboard*1  | keyestudio Micro:bit T Type Shield*1 | Adjustable potentiometer*1 | Red LED*1                |
| ![img](media/wps460.jpg) | ![img](media/wps461.jpg)             | ![img](media/wps462.jpg)   | ![img](media/wps463.png) |
| 220ΩResistor*1           | Breadboard*1                         | Breadboard wire            | Micro USB cable*1        |

3.  **Schematic Diagram：**

<img src="media/8d5c6e4611f7d5c3369d941c9996d959.png" style="zoom:50%;" />

4.  **Wiring Graph：**

![](media/d6b47a635e769171d5d57670fa179b30.png)

**5. Test Code：**

**Code 1：**

Link adjustable potentiometer with P0, connect computer to Micro:bit board. Then enable the online programming tool to design the code.

(1)
1.  Click“Led”→“more”，and find out“led enable false”

2.  Put it in the block“on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

（2）

1.  Enter “Advanced”→“Serial”→“serial write value “x”=0”.

2.  Move it into“forever”![](media/fe7e64859506fdee1166cac790d75691.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Click“Advanced”→“Pins”→“analog read pin P0”

2.  Place it at the “0”box.

3.  The left“x”is changed into “analog signal”.

![](media/969a558aae91ae0d71107b4098210436.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“Basic”to drag out“pause (ms) 100”, then leave it below“serial write.......P0”block. And set to 300ms.

![](media/5e68835adbb862d9f796b663eaaf33ff.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

| ![](media/66ab1d6259dd53b5b54d2c0d47e8e9a0.png) | “on start”: command block runs <br />once to start program.<br />Turn off LED dot matrix<br /><br />The program under the block <br />“forever” runs cyclically.<br /><br />The analog signal that serial writes <br />equals to the analog signal read by P0 <br /><br />Delay in 300ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:
![](media/d04b0d9c0b64292c83d676322d87d3c6.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/a4e5256c3904bf412077a96ed3ffabc0.png)

Hook up, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test). Click “OK” and “Connect”.

Serial monitor displays the corresponding value. When adjusting the potentiometer, the value changes from 1 to 1023. As shown below:

![](media/b28dcbbcb01881908af74a3ed5dac68f.png)

**Code 2：**

Through the above picture, we know that adjustable potentiometer is linked with P0, and red LED is attached to P4.

Link computer with micro:bit board. Then enable the online programming tool to design the code.

(1)

![](media/d380f77697920f174fb819fce502f651.png)

1.  Click“Led”→“more”→“led enable false”,

2.  Put it in the block“on start”.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Enter “Advanced”→“Pins”→“analog write pin P0 to 1023”

2.  Move it into“forever”block.

3.  Red LED is attached to P4, so set to P4.![](media/edbc449551c89fbac88f8993e6049bdc.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Click “Math”→“map 0 from low 0 high 1023 to low 0 high 4”.

2.  Drag it into“1023”box

![](media/1bcf4ada55951b07a3244a1b596d4d36.png)

(4) A. Enter“Advanced”→“Pins”→ ”analog read pin P0 ”

B. Leave it at“0”box next to“map”

![](media/3c92032b65afc842667e28faf2458c54.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5)

1.  The the analog input signal is from 0 to 0123.

2.  The analog output (PWM) is 0-255, so change 4 into 255, as shown below

![](media/4fbade414a1e0ba2edd3029b6b2c1eb1.png)

Complete Program：

| ![](media/e3deaf15394e722e46ae7d02cfdf9d40.png)              |
| ------------------------------------------------------------ |
| “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br />The program under the block “forever” runs cyclically.<br />The input the analog signal 0-1023 is mapped to the analog output 0-255. |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/a77bfd51328a2bb5a6a0f34889f6be75.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/2444b6a0d71597924dc94b353c8172c2.png)

**6. Test Results：**

Wire up, upload the program and power on. When adjust the potentiometer, the LED light intensity changes as well

**7. Extension Project：**

Replace red LED with RGB, the pins of RGB are connected to P1, P2 and P3.

Potentiometer controls the lights with distinct light intensity.

![](media/7511bc670b5242609f13274e9a1e3d32.png)

### Project 31：Gas Alarm

1.  **Description：**

This gas sensor is used for household gas leak alarms, industrial combustible gas alarms and portable gas detection instruments. And it is suitable for the detection of liquefied gas, benzene, alkane, alcohol, hydrogen, etc., and widely used in various fire alarm systems. The MQ-2 smoke sensor can be accurately a multi-gas detector, and has the advantages of high sensitivity, fast response, good stability, long life, and simple drive circuit.

It can detect the concentration of flammable gas and smoke in the range of 300\~10000ppm. Meanwhile, it has high sensitivity to natural gas, liquefied petroleum gas and other smoke, especially to alkanes smoke.

It must be heated for a period of time before using the smoke sensor, otherwise the output resistance and voltage are not accurate. However, the heating voltage should not be too high, otherwise it will cause my internal signal line to blow.

It is belongs to the tin dioxide semiconductor gas-sensitive material, and belongs to the surface ion type N-type semiconductor. At a certain temperature, tin dioxide adsorbs oxygen in the air and forms negative ion adsorption of oxygen, reducing the electron density in the semiconductor, thereby increasing its resistance value. When in contact with flammable gas in the air and smog, if the potential barrier at the grain boundary is adjusted by the smog, it will cause the surface conductivity to change. 

With this, information about the presence of smoke or flammable gas can be obtained. The greater the concentration of smoke or flammable gas in the air, the greater the conductivity, and the lower the output resistance, the larger the analog signal output. The sensor comes with a positioning hole, which is convenient for you to fix the sensor to other devices. In addition, the sensitivity can be adjusted by rotating the potentiometer.

In this project, the signal terminal A0 of the MQ-2 gas sensor is connected to P0 of the Micro:bit board.

MQ-2 gas sensor detects the combustible gas in the air, then the CoolTerm serial monitor shows the analog value.

**2. Components List:**

| ![img](media/wps464.jpg) | ![img](media/wps465.jpg)              | ![img](media/wps466.jpg) | ![img](media/wps467.jpg) |
| ------------------------ | ------------------------------------- | ------------------------ | ------------------------ |
| Micro:bit motherboard*1  | keyestudio Micro:bit T Type Shield*1  | Active buzzer1           | MQ-2 Gas sensor*1        |
| ![img](media/wps468.jpg) | ![img](media/wps469.png)              | ![img](media/wps470.jpg) | ![img](media/wps471.jpg) |
| S8050 Triode*1           | Micro USB cable*1                     | Breadboard wire          | Red LED*1                |
| ![img](media/wps472.jpg) | ![img](media/wps473.jpg)              | ![img](media/wps474.png) | ![img](media/wps475.jpg) |
| F-M dupont lines         | Breadboard Specialized power module*1 | 6 AA Battery Holder*1    | AA Battery Holder*6      |
| ![img](media/wps476.jpg) | ![img](media/wps477.jpg)              | ![img](media/wps478.jpg) |                          |
| 2.4 Ω Resistor*1         | 220ΩResistor*1                        | Breadboard*1             |                          |

**3. Schematic Diagram: **

**(Special note: both ends of breadboard specialized power module must be inserted into breadboard, and dial the DIP switch to +3V on power module )**

![](media/600d6140c8047be5ce7034e319172e13.png)

**4. Wiring Graph：**

**(Special note: both ends of breadboard specialized power module must be inserted into breadboard, and dial the DIP switch to +3V on power module )**

![](media/7fbb29819381ef545235b42e83ad5c9a.png)

5.  **Test Code：**

**Code 1：**

Hook up according to the above connection diagram, the Ao of MQ-2Gas sensor is attached to P0. Link computer with micro:bit board. Then enable the online programming tool to design the code.

Click “Led”→”more”→ “led enable false”.

Combine “led enable false” with “on start”block.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“Advanced”→“Serial”→“serial write value “x”=0”.

Move“serial write value “x”=0”into “forever”.

![](media/fe7e64859506fdee1166cac790d75691.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to“Advanced”→“Pins”→“analog read pin P0”

Place it to the 0 box

Next to change“x”into”analog signal”.

![](media/969a558aae91ae0d71107b4098210436.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“Basic”to move out“pause (ms) 100”then leave it below “serial write.......P0”block. And set to 300ms.

![](media/5e68835adbb862d9f796b663eaaf33ff.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Complete Program：

| ![](media/66ab1d6259dd53b5b54d2c0d47e8e9a0.png) | “on start”: command block runs <br />once to start program.<br />Turn off LED dot matrix<br /><br />The program under the block <br />“forever” runs cyclically.<br /><br />The analog signal that serial writes <br />equals to the analog signal read by P0.<br /><br />Delay in 300ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/4be7c7bf16891584fb6ebe0fdd513f82.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/8c588fd299f265ab0963aa1ac58a3507.png)

Hook up according to the above connection diagram, upload the code and power on.

The LED 2 on the MQ-2 gas sensor lights up green, and you can also adjust the blue cube potentiometer to make the LED1 on the module between off and on When the critical point is the highest sensitivity.

Open CoolTerm, click“Options”and select“SerialPort”. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test). Click “OK” and “Connect”.

Point firelighter to MQ-2 gas sensor, the analog value on serial monitor gets bigger gradually, and LED1 is on.

![](media/ec196643c7b31b91914fa9820d6d54ea.png)

**Code 2：**Note: you could set any analog value through the test result.

Connect A0 of MQ-2Gas sensor to P0, red LED to P9 and active buzzer to P3. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

Click “Led”→”more”to get block“led enable false”, and combine it with“on start”

(1)

1.  Click “Led”→”more”→“led enable false”

2.  Combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Enter“Logic”→“if...true...then...else”.

2.  Move it into“forever”and drag “=”into“true”box

![](media/5c8c54d326c184705c0ffb4f74bff652.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) A. Click“Advanced”→“Pins”→“analog read pin P0”

B. Drag it to the left 0 box.

Click the drop-down triangle to set “\>” and change 0 into 600

![](media/07325d0d5f2b99c96f37128355de1ee7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

 (4)
A. Go to“Advanced”→“Pins”→“digital write pin P0 to 0”block.

B. Active buzzer is connected to P3, therefore set to P3 and change 0 into 1.

![](media/0d9e97ad1b424685af862ff2f7fad6d5.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5)

1.  Duplicate“digital write pin P3 to 1”once

2.  Red LED is linked with P9, then click the drop-down button to set P9. As shown below:

![](media/8bf319f0d4fd7d1dfa7a4c0322f8eebb.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6)A. Enter“Basic”→“pause (ms) 100”

B. Move it below“digital write pin P9 to 1”and set to 100ms.

![](media/d3bbf8a35f1e462c20c4ee63ddd7ceff.png)

(7) 
 A. Copy code string ![](media/a69f83519dcfe498fec495f482d75b1d.png)once and change 1 into 0.

B. Keep it below the“pause (ms) 100”block

![](media/98cba5211d5e4e57d3d09357633216d2.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(8) Replicate code string ![](media/0d5891b46fea4be9018d947c37d4dd36.png)once and place it beneath “else”block, alter 1 into 0.

![](media/c2bdbce44c18fd33d45a761fbe53fb4c.png)

Complete Program：

![](media/4dcb6fa27455c1f111abc19420da23ce.png)

![](media/4dcb6fa27455c1f111abc19420da23ce.png)

Click“JavaScript", you will view the corresponding JavaScript code:
![](media/904fe4b1fcd6d2c923fa27d65688b275.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/2afd1ec49a0b01bba4d917d7fac9691b.png)

**6. Test Results：**

Wire up according to graph, upload the program and power on. Point fire lighter at MQ-2 gas sensor. When analog value is greater than 600, active buzzer sounds, LED blinks and LED1 is on simultaneously ; otherwise, the active buzzer doesn’t
emit sound, LED and LED1 go off.

### Project 32：Water Level Monitoring Alarm

1.  **Description：**

A surge in water level of river or dam will bring out the grave results when the pouring rain and rain storm comes. Nowadays, we could address this challenge by a special sensor--water level sensor to prevent the potential accident.

The water level sensor is analog input module. It is a simple, easy-to-use, compact, lightweight, and cost-effective.

Its principle is to detect the amount of water to determine the water level by bare printed parallel lines on the circuit board.

The conversion of water volume to analog signal and the output analog value can be directly applied by the function in the program.

In this project, we attach the water level sensor to P0 of micro:bit board. The water level can be detected by reading the analog value of P0. The higher the water level, the larger the analog value.

**2. Components List:**

| ![img](media/wps479.jpg) | ![img](media/wps480.jpg)             | ![img](media/wps481.jpg) | ![img](media/wps482.jpg) |
| ------------------------ | ------------------------------------ | ------------------------ | ------------------------ |
| Micro:bit motherboard*1  | keyestudio Micro:bit T Type Shield*1 | Red LED*1                | Yellow LED*1             |
| ![img](media/wps483.jpg) | ![img](media/wps484.jpg)             | ![img](media/wps485.jpg) | ![img](media/wps486.jpg) |
| 220Ω Resistor*3          | Breadboard*1                         | F-M dupont lines         | Breadboard wire          |
| ![img](media/wps487.jpg) | ![img](media/wps488.jpg)             | ![img](media/wps489.png) |                          |
| Green LED*1              | keyestudio Water Level Sensor*1      | Micro USB cable*1        |                          |

**3. Schematic Diagram：**

<img src="media/7ddf25953bde3db02cb68e9bc5f0ab7c.png" style="zoom:50%;" />

**4. Wiring Graph：**

![](media/13d0796f3bfa5e053f75948a2d3727c2.png)

**5. Test Code：**

**Code 1：**

Wire up according to Wiring Graph, water level sensor is linked with P0, Link computer with Micro:bit board. Then enable the online programming tool to design the code.

Click“Led”→“more”，and find out“led enable false”

Put it into the block“on start”

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*


Enter “Advanced”→“Serial”→“serial write value “x”=0”.

Move it into“forever”block

![](media/fe7e64859506fdee1166cac790d75691.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](media/969a558aae91ae0d71107b4098210436.png)

Click“Advanced”→“Pins”→“analog read pin P0”

Place it at the right“0”box

The left “x” is changed into“analog signal”.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*


Go to “Basic”→“pause (ms) 100”

Lay down it into“forever”and set to 200ms. As shown below

![](media/0d188969ef3c4582f2fe7e8289aa1c2c.png)

Complete Program：

![](media/2fc95ba3b489b63a8ecd4911d243166f.png)![img](media/wps490.png)

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/df2773e40e722eb430168a71cdf58638.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/02aeb752fd293a7ab307e6703fc57ce6.png)

When water level sensor isn’t placed into water, the output value is 0. With the sensor submerging gradually into the water, analog value is getting larger; when emerging into the water completely, the output value is about 710. However, the analog value is getting smaller when taking it out of water.

When the sensor is kept from water, the output value is not 0 (the water on the sensor may affect). The value is 0, when the water is wiped off.

Hook up, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200 (the baud rate of USB serial communication of Micro:bit is 115200 through the test). Click“OK”and“Connect”.

![](media/a10d00ae306ffa39daaabf0e7656e2bf.png)

**Code 2：**

Note: you could set the analog value through the test result.

Connect water level sensor to P0, yellow LED to P4, green LED to P6 and red LED to P9. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

(1)
1.  A. Click“Led”→“more”，and find out“led enable false”

2.  Combine it with“on start”block.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

![](media/dff4fee3a0cd9293b06e9cc6b80ae143.png)

1.  Click“Logic”→“if...true....then...else”

2.  Put it down into“forever”and drag out“=”into “true”block

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) Click“Advanced”→“Pins”to find out“analog read pin P0” block , and keep it at the left 0 box. Water level sensor is linked with P0, keep P0 unchanged. Then set to“analog read pin P0 \< 100”

![](media/a6be9976caa83d221f667e5ad87808ff.png)

(3) A. Enter“Advanced”→“Pins”→“digital write pin P0 to 0”

B. Leave it beneath“if...P0..100”block and copy for 2 times.

C. Yellow, green and red LEDs are respectively linked with P4, P6 and P9. So set to P4, P6, P9

![](media/0cd1033211d1396ef759c04df2999e43.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)

A. Replicate code string ![](media/b6d0e47b19a125aee1bfecd5098f1a61.png)once and place it into“forever”，

B. Remove the“analog read pin P0\<100”first.

1.  Go to“Logic”to drag out “and” block and keep it into “true”box.

2.  Place“analog read pin P0\<100”to the left blank box and change “\<” into “≥”；
    
3.  Copy“analog read pin P0\<100”once and set to“analog read pin P0\<200”then move it into right blank box
    
4.  Change 0 into 1 for P4.

![](media/7c8941035c35fdb979166c989cd19d29.png)

*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) Duplicate code string![](media/ab2970beba0ddf7b74aea447389e79b2.png)once and place it into“forever”，alter 100 into 200, 200 into 300.

Change 1 into 0 for P4 and 0 into 1 for P6.

![](media/077d2d564a6101bb8cea44078990160e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6)

Copy the code string ![](media/b6d0e47b19a125aee1bfecd5098f1a61.png)again and leave it into “forever”. Change “\<” into “≥”， 100 into 400 and 0 into 1 for P9.

![](media/05ffcca254f57314bce9f79fa6405285.png)

Complete Program:

| ![](media/31ecba4c26f9ffbc929336da15197972.png)<br />![](media/8126bc9b1c2466963ea53d6fc879af14.png) |
| ------------------------------------------------------------ |
| “on start”: command block runs once to start program.        |
| Turn off LED dot matrix                                      |
| The program under the block “forever” runs cyclically.       |
| When the analog signal read by P0 is less than100, the next program will be executed. |
| Separately set P4, P6 and P9 to low level(0), yellow, green and red LEDs will go off. |
| When condition “100≤ the analog signal read by P0<200” is met, the next program will be executed. |
| Respectively set P6 and P9 to low level (0), green and red LEDs will be on. And set P4 to high level(1), yellow LED will light up. |
| When the condition“200≤the analog signal read by P0<400” is met, the next program will be executed. |
| Separately set P4 and P9 to low level(0), yellow and red LEDs will go off. Set P6 to high level(1), green LED will be on. |
| When the analog signal read by P0 is greater than or equal to 400, the next program will be executed. |
| Respectively set P4 and P6 to low level, green and yellow LEDs will be off. Set P9 to high level(1), red LED will light up. |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/16cf6c9488991e7e3eed312e89c0f3c9.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/103254489e4caf3c72130e12fccdca66.png)

6.  **Test Results：**

Wire up through the connection diagram, upload the code and power on. Insert the water level sensor into water, when the analog value is less than 100, all LEDs are off; when the value is greater than or equal to 100 and less than 200, yellow LED lights up; when the value is greater than or equal to 200 and less than 400, green light will be on. When it is greater than or equal to 400, red LED will light on.

### Project 33：Humidity Detection Device

1.  **Description：**

This is a simple soil humidity sensor aims to detect the soil humidity. If the soil is in lack of water, the analog value output by the sensor will decrease; otherwise, it will increase. If you use this sensor to make an automatic watering device, it can detect whether your botany is thirsty to prevent it from withering when you go out.   

Using the sensor with Arduino controller makes your plant more comfortable and your garden smarter. The soil humidity sensor module is not as complicated as you might think, and if you need to detect the soil in your project, it will be your best choice.

The sensor is set with two probes, when inserted into the soil, the sensor will get resistance value by reading the current changes between the two probes and convert such resistance value into moisture content. The higher moisture (less resistance), the higher conductivity the soil has.

Its service life extends by metallizing the surface,

Insert it into the soil and then use the AD converter to read it. With the help of this sensor, the plant can remind of you: I need water. It comes with 2 positioning holes for installing on other devices.

In this experiment, we connect soil humidity sensor to P10 of Micro:bit board and read the analog value of P10 then detect humidity. The larger the humidity, the larger the value. You could view the analog value on serial monitor

**2. Components List:**

| ![img](media/wps491-168430659632639.jpg) | ![img](media/wps492-168430660779240.jpg) | ![img](media/wps493.png)          |
| ---------------------------------------- | ---------------------------------------- | --------------------------------- |
| Micro:bit motherboard*1                  | keyestudio Micro:bit T Type Shield*1     | keyestudio Soil Humidity sensor*1 |
| ![img](media/wps494.jpg)                 | ![img](media/wps495.png)                 | ![img](media/wps496.jpg)          |
| Breadboard*1                             | Micro USB cable*1                        | F-M dupont lines                  |

**3. Schematic Diagram：**

![](media/5a90eb831c041476e1fcb6f621263a0c.png)

**4. Wiring Graph：**

![](media/2d3656ce0ef42d4a9edcf86411fed55b.png)

5.  **Test Code：**

**Code 1：**

Hook up according to the above connection diagram, s end of Soil Humidity sensor is attached to P10. Link computer with micro:bit board. Then enable the online programming tool to design the code.

(1) 

1.  Click“Led”→“more”→“led enable false”

2.  Put it into the block“on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

A. Click“Advanced”to go to“Serial”, and drag“serial write value “x”=0”into  “forever”.

B. Go to“Advanced”→“Serial”→“serial write value “x”=0”,

C. Leave it into“forever”.

![](media/fe7e64859506fdee1166cac790d75691.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Click“Advanced”→“Pins”→“analog read pin P0”

2.  Leave it into“0”box.

3.  The soil humidity sensor is connected to P10, so click the drop-down button to select P10. Modify the“x” into “analog signal”.

![](media/fc6e96e7fa3c3e8dece629e9e48d2204.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)

Click“Basic”to drag out “pause (ms) 100”and put it into“forever”block, then set to 200ms.

![](media/34ac2c812a87df30b6c5920b9c4a9608.png)

Complete Program：

| ![](media/4377b03803365bacfc0b5c5448195e46.png)              |
| ------------------------------------------------------------ |
| “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br />The program under the block “forever” runs cyclically.<br />The analog signal that serial writes is equal to the analog signal read by P10<br />Delay in 200ms |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/51a74e820bcc7a8bfcdb5778d7ab055a.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/11924809e2eeeacd5d9a839ac779a7c8.png)

Hook up through the wiring graph, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test). Click “OK” and “Connect”.

Insert soil humidity sensor into soil. As the humidity grows gradually, the analog signal of soil humidity sensor will increase as well.

![](media/32253024ad4ecc92b12d7b71d0eeefdf.png)

### Project 34：OLED Display

1.  **Description：**

The 12864 of the OLED module indicates that the screen resolution is 128\*64 pixels, that means that there are 128 columns and 64 rows of pixels on the screen.  

Pixel is px, which is the smallest point (unit color block) in the picture.   Resolution = pixel value in the horizontal direction of the screen \* pixel value in the vertical direction of the screen.

Compatible with the IIC (I2C) interface of the Micro:bit board, the OLED module communicates by IIC (I2C). Its interface is marked with V, G, SDA and SCL. SDA and SCL correspond to P20 and P19 separately.

**2. Components List:**

| ![img](media/wps497.jpg) | ![img](media/wps498.jpg)             | ![img](media/wps499.png)         |
| ------------------------ | ------------------------------------ | -------------------------------- |
| Micro:bit motherboard*1  | keyestudio Micro:bit T Type Shield*1 | Keyestudio OLED Display module*1 |
| ![img](media/wps500.jpg) | ![img](media/wps501.png)             | ![img](media/wps502.jpg)         |
| Breadboard*1             | Micro USB cable*1                    | Breadboard wire                  |

**3. Schematic Diagram：**

<img src="media/3382f79b44dda41d3bce9fcb48f77730.png" style="zoom:50%;" />

**4. Wiring Graph：**

![](media/03a478db4cf1394b0bb54cd971e4c477.png)

**5. Test Code：**

Hook up according to the above connection diagram, the pin SDA and SCL of OLED are attached to P20 and P19. Link computer with micro:bit board. Then enable the online programming tool to design the code.

**How to add the library file of OLED:**

Enter the Micro:bit online programming page and click“Extensions”

![](media/792e3ec83c270dffdae7758a0721600d.png)

Input OLED and search,as shown below. Select the first pattern, download and install library file automatically.

![](media/85abb2ac686b49476ec97dca37b48b22.png)

After installing successfully, and view the corresponding the module in the editing code.

![](media/07032f9f2f3125cd4fa3f55f7656278a.png)

Click “Led”→”more”→“led enable false”, combine it with“on start”.

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Click“OLED”→“initialize OLED with width 128 height 64”;

B. Keep it below“led enable false”block.

![](media/262fcf3cfdca5ad79bdf5839e61d290c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

A. Go to“Loops”→“repeat 4 times do”

B. Move it into“forever”block.

![](media/c8626c34730c3bcd5d04fbbc282ae3fe.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
A. Go to“OLED”→“show (without newline) string”””

B. Leave it into“repeat 4 times do”, then input “ABCDEFGHIJK”character string.

![](media/064512c7641f65f6084b41715ca413e8.png)

Move out“pause (ms) 100”from“Basic”and leave it into “repeat 4 times do”, then set to 500ms.

![](media/02c977686c6c8701a2f060d080d2207a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“OLED”to find out“show string”””, and put it into “repeat 4 times do”.

Input“LMNOPQRST”character string, duplicate“pause (ms) 500”once and place it below“show string “LMNOPQRST”block.

![](media/55815ab8d20ff88420816ce44e3fbfdb.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Enter“OLED”to drag“show (without newline) number””” into“repeat 4 times do”, input“123456789”, and duplicate “pause (ms) 500”once and keep it below “show..123435678”block

![](media/20d2906eab9db94f903902064e4f45e7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“OLED”to move out“show number”into“repeat 4 times do”block.

Enter“10111213”and copy “pause (ms) 500” once, finally remain these blocks into“repeat 4 times do”block

![](media/7c0bfde10863c42d6bab19706b668590.png)

Click “OLED” to find out “clear OLED display”, and place it into “forever”block.

![](media/b0358d5810b76b6ce43fe3cb4f025a27.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Go to“OLED”to get“draw rectangle from x: 0 y: 0 to x: 20 y: 20”, and leave it below“clear OLED display”block, alter 0 into 90. Then copy“clear OLED display1”once and move it into “forever”block.

![](media/b6f173f8c438982edd5a415d549c27b5.png)

Complete Program：

| ![](media/ffacacd005dc6125d4e0f4d80c49fd3a.png)<br />![](media/729b05885a4782c6d3f85fd86d1b4daf.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br />Initialize OLED, 128 in width and 64 height<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Repeat for 4 times<br /><br />OLED shows“ABCDEFGHIJK” <br />Delay in 500ms<br /><br />OLED displays“LMNOPQRST”<br />Delay in 500ms<br /><br />OLED displays“123456789”<br />Delay in 500ms<br /><br />OLED displays“10111213”<br />Delay in 500ms<br /><br />OLED shows numbers<br />Delay in 500ms<br /><br />Clear OLED display<br />Draw a rectangle from the start point <br />x:90 y:90 to the end point x:20 y:20<br /><br />Clear OLED display |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript. code:

![](media/4e3a41d0ea7f3fb3033ff14a0c2e3498.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/c2b5b16f4b6907d7bf16e6edb17b8f99.png)

6.  **Test Results:**

Wire up through the connection diagram, upload code and plug in power. OLED displays the corresponding character strings and patterns.

7.  **Extension Project：**

OLED display shows some characters and patterns.

![](media/0c7a609d2bc4e31b64b1b9c2105f4fb4.png)

![](media/98224786913e70c2f72b4949096176c4.png)

### Project 35： Servo Control

1.  **Description：**

When we make robot car, we often control doors and windows with servos. In this course, we’ll introduce its principle and how to use servo motors.

Servo motor is a position control rotary actuator. It mainly consists of housing, circuit board, core-less motor, gear and position sensor. Its working principle is that the servo receives the signal sent by MCU or receiver and produces a reference signal with a period of 20ms and width of 1.5ms, then compares the acquired DC bias voltage to the voltage of the potentiometer and obtain the voltage difference output.

The IC on the circuit board determines the direction of rotation, and drives the coreless motor to start rotating. The power is transmitted to the swing arm through the reduction gear. At the same time, the position detector sends back a signal to determine whether the positioning has been reached. It is suitable for those control systems that require constant change of angle and can be maintained.

When the motor speed is constant, the potentiometer is driven to rotate through the cascade reduction gear, which leads that the voltage difference is 0, and the motor stops rotating. Generally, the angle range of servo rotation is 0° -180 °

Servo motor has external 3pcs lines which are distinguished from brown, red and orange color. Brown line is grounded, red one is positive power line and the orange is signal line.

The rotation angle of servo motor is controlled by regulating the duty cycle of PWM (Pulse-Width Modulation) signal. The standard cycle of PWM signal is 20ms (50Hz). Theoretically, the width is distributed between 1ms-2ms, but in fact, it's between 0.5ms-2.5ms. The width corresponds the rotation angle from 0° to 180°. But note that for different brand motor, the same signal may have different rotation angle.
![](media/9525f9ee3c8d14d5249fecaf71043236.png)

There are two ways to control servo motor by Micro:bit board.

One is to use a common digital sensor port of Micro:bit board to produce square wave with different duty cycle to simulate PWM signal and use that signal to control the positioning of the motor.

Another way is to directly use the servo function of the Micro:bit board to control the motor. However, you need to control more than one motor by external power as the drive capacity of micro:bit board is limited.

Note that don’t supply power through USB cable. There is possibility to damage the USB cable if the current demand is greater than 500MA. We recommend the external power.

**2. Components List:**

| ![img](media/wps503.jpg)                        | ![img](media/wps504.jpg)             | ![img](media/wps505.jpg)       | ![img](media/wps506.jpg) |
| ----------------------------------------------- | ------------------------------------ | ------------------------------ | ------------------------ |
| Micro:bit motherboard*1                         | keyestudio Micro:bit T Type Shield*1 | keyestudio micro Servo motor*1 | AA Battery Holder*6      |
| ![img](media/wps507.jpg)                        | ![img](media/wps508.png)             | ![img](media/wps509.jpg)       | ![img](media/wps510.png) |
| Breadboard*1                                    | 6 AA Battery Holder*1                | Breadboard wire                | Micro USB cable*1        |
| ![img](media/wps511.jpg)                        |                                      |                                |                          |
| Keyestudio BreadboardSpecialized Power Module*1 |                                      |                                |                          |

**3. Schematic Diagram：**

(Note: wire up servo with breadboard with 3pcs dupont wires)

![](media/e7e9ebb73c99b31cc99ab1de1d34216d.png)

**4. Wiring Graph：**

(Note: wire up servo with breadboard with 3 pcs dupont wires)

![](media/9b596df5075fb672ef64bd393aa8daa2.png)

**5. Test Code：**

Wire up through the connection diagram. Connect servo motor to P3, Link computer with Micro:bit board. Then enable the online programming tool to design the code.

1.  A. Click “Led”→”more”→“led enable false”,

​		B. Combine it with“on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](media/e9010938b73eecc647b0d1092be5f669.png)

2.  Drag out “servo write pin P0 to 180”from“Pins”block under the block“Advanced”. Keep it into“forever”. Servo motor is connected to P3, so set to P3 and change 180 into 0.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

3. Enter “Basic”to drag out “pause (ms) 100”into “on start”, set to 200ms.

![](media/218205c9e267a9cc8e0dda852b641d56.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

4. Copy ![](media/5eb289f35e73ffaa62436a2e5ed18615.png)for 5 times and place them into “forever”, separately set to 0, 45, 90, 135 and 180. Then change 200ms into 1000ms.

![](media/0fef57bbf7fe4c1a3038c84a17df014b.png)

Complete Program：

| ![](media/420752526912105b75fda45681d45bd7.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br />Rotate servo motor P3 to 0°<br /><br />Delay in 200ms<br /><br /><br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Respectively rotate servo motor P3 to 0°, 45°，90°，135° and 180°.<br /><br />Delay in 1000ms respectively |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/ce6eedd7f940c23ba934c52c7c08cbf5.png)

Then click drop-down triangle button and select“Python”to see the Python language code：

![](media/a10280ef1505ad0922db462cd286496f.png)

6.  **Test Results：**

Wire up through the connection diagram, upload the program and power on. Servo motor swings to and fro in the range of 0°\~45°\~90°\~135°\~180°

7.  **Extension Project：**

Servo motor swings to and fro in the range of 0°\~90°

![](media/e7d5b1e4445f4f2e904fa8ffbc91c05e.png)

### Project 36：L293D Driver Motor

1.  **Description：**

L293D is a direct current drive IC, which can be used to drive DC motor or stepper motor in some robot projects.

It has a total of 16 pins and can drive two-channel DC motors at the same time.

Its Input voltage range is 4.5 V \~ 36 V, the output current of per channel is MAX 600mA, which can drive inductive loads. What’s more, its input end can be directly connected and controlled by the single-chip microcomputer.

When driving a small DC motor, the control of two-channel motors and the forward and reverse rotation can be realized by changing the high and low level of the input terminal. There are many motor drive boards using L293D chips on the market, of course, we can also use it via simply connecting.

2. **Pins Description**

![image-20230517150717324](media/image-20230517150717324.png)

|  No  |   Name    | Description                                 |
| :--: | :-------: | ------------------------------------------- |
|  1   | Enable1,2 | Enable pin Input 1(2)and Input 2(7)         |
|  2   |  Input1   | Directly input pin 1via digital circuit     |
|  3   |  Output1  | Connected to one end of motor1              |
|  4   |    GND    | Grounded(0V)                                |
|  5   |    GND    | Grounded(0V)                                |
|  6   |  Output2  | Connected to one end of motor1              |
|  7   |  Input2   | Directly output pin 2 via digital circuit   |
|  8   | Vcc2(Vss) | Connected to voltage pin of motor(4.5V-36V) |
|  9   | Enable3,4 | Enable pin 3(10)and 4(15)                   |
|  10  |  Input3   | Input3 pin, controlled by digital circuit   |
|  11  |  Output3  | Connected to one end of motor2              |
|  12  |    GND    | Grounded(0V)                                |
|  13  |    GND    | Grounded(0V)                                |
|  14  |  Output4  | Connected to one end of motor2              |
|  15  |  Input4   | Input4 pin, controlled by digital circuit   |
|  16  | Vcc1(Vss) | Connect + 5Vto enable IC function           |

3.  **Components List**

| ![img](media/wps512.jpg)                 | ![img](media/wps513.jpg)             | ![img](media/wps514.jpg) | ![img](media/wps515.jpg) |
| ---------------------------------------- | ------------------------------------ | ------------------------ | ------------------------ |
| Micro:bit motherboard*1                  | keyestudio Micro:bit T Type Shield*1 | L293D drive chip*1       | fan*1                    |
| ![img](media/wps516.png)                 | ![img](media/wps517.jpg)             | ![img](media/wps518.png) | ![img](media/wps519.png) |
| DC motor（with soldered dupont lines）*1 | Breadboard*1                         | 6 AA Battery Holder*1    | Micro USB cable*1        |
| ![img](media/wps520.jpg)                 | ![img](media/wps521.jpg)             | ![img](media/wps522.jpg) |                          |
| Keyestudio Breadboard Power module *1    | AA Battery Holder*6                  | Breadboard wires         |                          |

**4. Schematic Diagram：**

<img src="media/a5f0d12e6218f7f5bf23ff38a7946db9.png" style="zoom:50%;" />

**5. Wiring Graph：**

![](media/3c13e2ea67d7597570635355e188fffc.png)

**6. Test Code：**

Hook up according to the above connection diagram, the ernable3 and 4, Input3 and Input4 of L293D drive chip are connected to P0, P1 and P2. What’s more, the red line and black line of motor are attached to Onput3 and Onput4. Link computer with micro:bit board. Then enable the online programming tool to design the code.

(1)

A.Click“Led”→“more”→“led enable false”

B. Put it into the block“on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*


![](media/8a23daef089e55ba5c45297f8649e107.png)

(2)

1.  Enter“Advanced”→“Pins”→“analog write pin P0 to 1023”

2.  Place it into“forever”block

3.  Change 1023 into 800

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)A. Go to“Advanced”→“Pins”→“digital write pin P0 to 0”

B. Place it into“forever”block

C. Copy“digital write pin P0 to 0”once

D. L293D is attached to P1 and P2, set to P1 and P2. And change 0 into 1 for P1

![](media/bda5df22675fb406f81ee7bc9f6227b8.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)

1.  Go to“Basic”→“pause (ms) 100”

2.  Keep it below block “digital write pin P2 to 0”and set to 1000ms

![](media/2d97f320d43eea414f4dff7001a6e81a.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) Duplicate code string ![](media/99ae954168d2d4657b5d31c528eba219.png)once and place it into “forever”, change 1 into 0 for P1, 0 into 1 for P2.

![](media/0179a7c14f6c91b4d4d51dfc8038e209.png)

Complete Program：

| ![](media/d9b553fdac92f43275be2e4698e99661.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set P0 to 800, set P1 to high level(1), P2 to low level(0)<br />Delay in 1000ms<br /><br />Set P0 to 800, set P2 to high level(1), P1 to low level(0)<br />Delay in 1000ms<br /> |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/6b21a0759d369f5b54cd5ff2bd22efe3.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/5dfc58810596f0058222365a4ac4dad0.png)

**7. Test Results：**

Download the program and power on, the motor spins clockwise for 1s and anticlockwise for 1s, alternately.

### Project 37： Control Stepper Motor

1.  **Description：**

Stepper motor is an open-loop control element that converts electrical pulse signals into angular displacement or linear displacement. Under the condition of non-overload, the speed of the motor and the stop position are only tied to the
frequency and number of pulses of the pulse signal, not affected by load changes.  

It is a kind of induction motor. Its working principle is to convert direct current into time-sharing power supply by electronic circuit and multi-phase sequential control current. use this current to power stepper motor, stepper motor can work normally.  

Although widely applied, stepper motors cannot be operated under conventional conditions like ordinary DC motors and AC motors.

Involving with many professional knowledge such as machinery, electrical machinery, electronics and computers, it is not used easily.

As an executive element, stepping motor is one of the essential products of mechatronics and widely applied in various automation control systems.

**2. Features:**

1.  The rotation angle of the stepper motor is proportional to the input pulse; 
    

The stepper motor has full torque when it is stationary (if the winding is energized);  

Precise positioning and motion repeatability, the accuracy of a good stepper motor is -5% of one step, and the error from one step to the next step is not accumulated;

2.  There is an excellent response for start/stop/reverse;  

Very reliable, because there is no contact brush in the stepper motor. Therefore, the life of the stepper motor depends on the life of the bearing;

The stepper motor provides open-loop control in response to the digital input pulse, which makes the stepper motor simpler and lower control cost;  

A very low-speed synchronous rotation can be achieved through a load directly connected to the shaft; 

Since the speed is proportional to the frequency of the input pulse, a wide range of speed can be achieved;

**3. Components List:**

| ![img](media/wps523.jpg)           | ![img](media/wps524.jpg)             | ![img](media/wps525.jpg)                          | ![img](media/wps526.png) |
| ---------------------------------- | ------------------------------------ | ------------------------------------------------- | ------------------------ |
| Micro:bit motherboard*1            | Keyestudio Micro:bit T Type Shield*1 | Keyestudio ULN 2003 Stepper motor driver module*1 | Micro USB cable*1        |
| ![img](media/wps527.jpg)           | ![img](media/wps528.jpg)             | ![img](media/wps529.png)                          | ![img](media/wps530.jpg) |
| Keyestudio 5-wire stepper motor *1 | Breadboard*1                         | 6 AA Battery Holder*1                             | Breadboard wire          |
| ![img](media/wps531.jpg)           | ![img](media/wps532.jpg)             | ![img](media/wps533.jpg)                          |                          |
| Breadboard wire                    | 6 AA Battery *6                      | Keyestudio Breadboard Specialized power module*1  |                          |

**4. Schematic Diagram：**

![](media/dd8db6469ab917cb74289314b44735cd.png)

**5. Wiring Graph：**

Wiring note: VCC and GND are linked with “+”and“-”of Breadboard, IN1, IN2, IN3 and IN4 correspond to P0, P1, P2 and P8 separately.

For the following code, IN0, IN1, 1N2 and IN3 denote 1N1, IN2, IN3 and IN4 of stepper motor module.

![](media/f227d40bfd933c383f17823f18712b31.png)

**6. Test Code：**

Wire up through the connection diagram. Connect Stepper motor driver module to P0, P1, P2 and P8. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

**How to add the library file of stepper motor driver module**:

Enter the Micro:bit online programming page and click  “Extensions”

![](media/792e3ec83c270dffdae7758a0721600d.png)

Enter the file link: <https://github.com/ckmaker-cckk/pxt-ckbase>and search, as shown below, click library file and automatically download and install library files.

![](media/c8ce84d470dcb8546c3264fe6bd58693.png)

After installing the library file successfully, you could check the corresponding blocks int the code editing area.

![](media/c7cf89418cdf75bea2f2a6e969324e81.png)

(1)

1.  Click“Led”→“more”，and find out“led enable false”

2.  Put it into the block“on start”![](media/d380f77697920f174fb819fce502f651.png).

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Go to“Ckmake-Base”→“StepperMotor Init in0 P0 in1 P1 in2 P2 in3 P8”；

2.  Place it into“on start”block

3.  Stepper motor driver module is connected to P0, P1, P2, P8

4.  Then set code string as follows:

![](media/95d4fbd134ff563d6859a85b70d164a7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

Tap “Ckmake-Base”→“set stepper Speed SPEED1”

Move it into“on start”and set to SPEED3

![](media/eb5ec0457ac88b59c2d8a8a8744b9c08.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)A. Click“Ckmake-Base”→“stepper Turn 0”

B. Place it below“set stepper Speed SPEED3”

C. Copy“stepper Turn 0”once.

D. Change 0 into 3 and -3 respectively.

![](media/ee16784ef2b03dbee98a0307e66b12d2.png)

Complete Program：

| ![](media/853e714d496896124ae805670877a7f2.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br />Initialize the stepper motor<br /><br />Set speed of stepper motor to SPEED3<br /><br />Motor spins clockwise for 3 circles<br /><br />Motor spins anticlockwise for 3 circles |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/1641d058b774c6dc1643ebe108e61556.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/5af4babbc14877894803706fe13635f6.png)

**7. Test Results：**

Wire up through the connection diagram. Upload the program and power on, stepper motor spins anticlockwise for 3 circles at the fastest speed then rotates clockwise 3 circles and stops.

**8. Extension Project：**

Make stepper motor spin anticlockwise for 1 circle at the fastest speed then clockwise for 1 circle. Then let it turn anticlockwise 90°, rotate clockwise 180° and stop.

![](media/2ce6634d9ff78303b9c472654275eb48.png)

### Project 38：Automatic Watering System

1.  **Description：**

We’ve learned soil humidity sensor, ,OLED display module, L293D drive and motor. In this lesson, we will combine them to make an automatic watering system.

Under the control of Micro:bit board，the Micro:bit determines if value sent by soil humidity sensor is in the normal humidity range. If the value is less than the minimum, the command of watering will be sent, when the value is between the minimum and maximum vale, pump drains slightly; when it is higher than the maximum, water pump stops watering.

**2. Components List:**

| ![img](media/wps534.jpg)                         | ![img](media/wps535.jpg)             | ![img](media/wps536.png)          | ![img](media/wps537.png) |
| ------------------------------------------------ | ------------------------------------ | --------------------------------- | ------------------------ |
| Micro:bit motherboard*1                          | keyestudio Micro:bit T Type Shield*1 | Keyestudio OLED Display module*1  | Water pump*1             |
| ![img](media/wps538.jpg)                         | ![img](media/wps539.jpg)             | ![img](media/wps540.jpg)          | ![img](media/wps541.png) |
| AA Battery Holder*6                              | L293D Driver chip*1                  | Water pipe*1                      | 6 AA Battery Holder*1    |
| ![img](media/wps542.jpg)                         | ![img](media/wps543.jpg)             | ![img](media/wps544.png)          | ![img](media/wps545.jpg) |
| Keyestudio Breadboard Specialized power module*1 | F-M dupont lines                     | keyestudio Soil Humidity sensor*1 | Breadboard*1             |
| ![img](media/wps546.png)                         | ![img](media/wps547.jpg)             |                                   |                          |
| Micro USB cable*1                                | Breadboard wires                     |                                   |                          |

**3. Schematic Diagram：**

**(Special note: both ends of breadboard specialized power module must be inserted into breadboard, and dial the DIP switch to +3V on power module)**

![](media/05ba4ad12000fe5b5fc60ba0ce9b174c.png) 

**4. Wiring Graph：**

**(Special note: both ends of breadboard specialized power module must be inserted into breadboard, and dial the DIP switch to +3V on power module )**

![](media/a21c092732c188870cc1156ea209fcc0.png)

**5. Test Code** 

Note: you could set any analog value through the test result.

Hook up according to the above connection diagram, s end of soil humidity sensor is attached to P3, SDA and SCL pins are linked with P20 and P19; the ernable3 and 4, Input3 and Input4 of L293D drive chip are connected to P0, P1 and P2. And the red line and black line of water pump are attached to Onput3 and Onput4.

Link computer with micro:bit board. Then enable the online programming tool to design the code.

We’ve added the library file of OLED, so let’s get started.

(1)
1.  A. Click“Led”→“more”→“led enable false”

2.  Put it into the block“on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)  

![](media/262fcf3cfdca5ad79bdf5839e61d290c.png)

1.  Click“OLED”→“initialize OLED with width 128 height 64”

2.  Put it into“on start”block

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Enter“Logic”→“if..true..then...else”

2.  Move it into“forever”block

3.  Click“![](media/2cfd5c6b0c37f0d64308ef1cf4b873e9.png)”and drag “=”block into  “true”block

![](media/008620dce6a5a8f199c77fe38c1d4a20.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)

1.  Enter“Advanced”→“Pins”→“analog read pin P0”

2.  Drag it into left 0 box.

3.  Soil Humidity sensor is attached to P3, so set to P3.

4.  Change “=” into”\<”, 0 into 100

![](media/ec22703035604c93de4b038e0515857c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) Click“OLED”and drag out“clear OLED display”to the below“if analog read pin...then”block

![](media/56f963a98c08152d15ecd1b0de063b21.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6)

1.  Go to“OLED”→“show number”

2.  Move it below“clear OLED display”block

3.  Replicate“analog read pin P3”once and place it into “show number”””block.

![](media/f79acb188937c0e9536f9fcf219d601e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(7)

1.  Enter“Advanced”→”Pins”→“analog write pin P0 to 1023”

2.  Place it below the“show number.....P3”block.

3.  Drag out“digital write pin P0 to 0”and copy once then leave them below the block “analog ...to 1023”.
    
4.  The driver chip of L293D is connected to P0, P1 and P2, so set to P1, P2 and P3.

![](media/ba97b398c8c0bc09812e80e1ccd7d3b1.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(8)

1.  Enter“Logic”to move out“and”block and leave it into the blank box behind“else if”.
    
2.  Copy“analog read pin P3\<100”for 2 times and place them to both sides of“and”block
    
3.  Set“as if analog read pin P3≥100 and analog read pin P3\<400”, as shown below:

![](media/70e382e40e95370a7c25e759c8e91e69.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(9)Copy code string ![](media/b8c7e421c6d8e91f539d2d1ec16b9a67.png)once and place it under the “as if....then” block, change 1023 into 900.

![](media/c2e086cac770ae6dfcdcb588ca43b873.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Replicate code string ![](media/05e782b0e41b41e4ef34fd2575f1889e.png)once, and move it beneath “else” block, set P0 to 0 and change P1 to 1 into P1 to 0.

![](media/29d5b86bbd51391b1689f91196787d44.png)

Complete Program：

![](media/02784e8cd31ba3fe5db6296af1407bb5.png)![img](media/wps548.png)

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/3e55f583200322631f11e7b9428d49cc.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/b60035934e0947356eb86b01f76d15c8.png)

**6. Test Results：**

Wire up through the connection diagram, upload code and power on. Insert soil humidity sensor into soil . OLED shows the detected humidity value. When this value is less than 100, the water pump draws water at the fastest speed; As it is greater than or equal to 100 and less than 400, the speed of pumping water is slowest. However, when the value is greater than or equal to 400, the water pump stops working

7.  **Extension Project：**

Put soil humidity sensor into soil, OLED shows the detected humidity value. When this value is less than 300, the water pump draws water, otherwise, it will stop working.

![](media/2c0b34f99a5e09b8057a08a668cc6f30.png)

### Project 39： Relay Module

1.  **Description：**

This module is an Arduino dedicated module, and compatible with arduino sensor expansion board. It has a control system (also called an input loop) and a controlled system (also called an output loop).

Commonly used in automatic control circuits, the relay module is an "automatic switch" that controls a larger current and a lower voltage with a smaller current and a lower voltage.

Therefore, it plays the role of automatic adjustment, safety protection and conversion circuit in the circuit. It allows Arduino to drive loads below 3A, such as LED light strips, DC motors, miniature water pumps, solenoid valve pluggable interface.

The main internal components of the relay module are electromagnet A, armature B, spring C, moving contact D, static contact (normally open contact) E, and static contact (normally closed contact) F, (as shown in the figure ).

![](media/97319b6bfd2ebf5cef9d1a14d07ae538.jpeg)

As long as a certain voltage is applied to both ends of the coil, a certain current will flow through the coil to generate electromagnetic effects, and the armature will attract the iron core against the pulling force of the return spring under the action of electromagnetic force attraction, thereby driving the moving contact and the static contact (normally open contact) to attract. 

When the coil is disconnected, the electromagnetic suction will also disappear, and the armature will return to the original position under the reaction force of the spring, releasing the moving contact and the original static contact (normally closed contact). 

This pulls in and releases, thus achieving the purpose of turning on and off in the circuit. The "normally open and closed" contacts of the relay can be distinguished in this way: the static contacts on disconnected state when the relay coil is powered off are called "normally open contacts"; the static contacts on connected state are called "normally closed contact". The module comes with 2 positioning holes for you to fix the module to other equipment.

**2. Components List:**

| ![img](media/wps549.jpg)            | ![img](media/wps550.jpg)              | ![img](media/wps551.jpg) | ![img](media/wps552.png) |
| ----------------------------------- | ------------------------------------- | ------------------------ | ------------------------ |
| Micro:bit motherboard*1             | keyestudio Micro:bit T Type Shield*1  | Red LED*1                | Micro USB Cable*1        |
| ![img](media/wps553.jpg)            | ![img](media/wps554.jpg)              | ![img](media/wps555.jpg) | ![img](media/wps556.jpg) |
| keyestudio 1-channel Relay module*1 | Breadboard*1                          | 220ΩResistor*1           | F-M Dupont lines         |
| ![img](media/wps557.png)            | ![img](media/wps558.jpg)              | ![img](media/wps559.jpg) | ![img](media/wps560.jpg) |
| 6 AA Battery Holder*1               | Breadboard Specialized power module*1 | Breadboard wire          | AA Battery Holder*6      |

**3. Schematic Diagram：**

<img src="media/9892d276052952038ef2084e31e92a2e.png" style="zoom:50%;" />

**4. Wiring Graph：**

![](media/f3fa18564a41ea53ab65f0fbf1c9bee9.png)

**5.Test Code：**

Wire up through the connection diagram, connect relay to P0. Link computer with Micro:bit board. Then enable the online programming tool to design the code.


Click “Led”→ “more”→ “led enable false”,

Combine it with“on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“Advanced”→“Pins”→“digital write pin P0 to 0”；

Place it into“forever”block, change 0 into 1.

![](media/c2abbeb0052ef133e4fcefc24476b438.png)

Enter“Basic”and move out “pause (ms) 100”below the block“digital write.......to 1”, and set to 500ms.

![](media/8085067a6a8a4e02dbd095ec223e5b3b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy code string ![](media/6fac7c1acbaa0aab6cd9dd9517f493f0.png)once and put it below“pause (ms) 500”, change 1 into 0.

![](media/0acae4ad57104fc81e87fbd5bd9b4678.png)

Complete Program：

| ![](media/bef3567b2f87a055f4fe3c40176f1cd9.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set P0 to high level(1)<br />Delay in 500ms<br /><br />Set P0 to low level(0)<br />Delay in 500ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:
![](media/8888a2b3762b16074f6601c351a595a7.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/6879dc4c25165a005e482c5162e020eb.png)

**6. Test Results：**

Wire up through the connection diagram, upload the code and power on. The relay will be on(NO on, NC off) for 0.5s and off(NO off , NC on) for 0.5s, alternately. When relay is connected, red LED lights up, if it is disconnected, LED goes off.

### Project 40： Detect Ambient Temperature

1.  **Description：**

For example, when temperature is 0 ℃, it outputs 0V; if increasing 1 ℃, the output voltage will increase 10 mv. Input its output voltage into P2 on micro:bit main board, after formula computing, display the temperature value of current surroundings on the serial monitor. In this way, we will use a serial communication software, Arduino IDE.   

Notice the wiring direction of LM35, or else it will damage the LM35 sensor if reverse.

LM35DZ sensor element is a temperature sensor whose output voltage is proportional to Celsius temperature. The output can start from 0℃, and its sensitivity is 10mV/℃; the output temperature is 0℃～100℃, the conversion formula is as follows:when temperature is 0 ℃, it outputs 0V; if increasing 1 ℃, the output voltage will increase 10 mv.

Its working voltage is 4-30V; the accuracy is ±1℃. The maximum linearity error is ±0.5℃; the quiescent current is 80uA

![image-20230517170209489](media/image-20230517170209489.png)

We detect the ambient temperature and control the dot matrix to display distinct patterns by it.

**2. Components List:**

| ![img](media/wps561.jpg) | ![img](media/wps562.jpg)            | ![img](media/wps563.jpg) | ![img](media/wps564.jpg) |
| ------------------------ | ----------------------------------- | ------------------------ | ------------------------ |
| Micro:bit Motherboard*1  | keyestudio Micro:bitT Type Shield*1 | LM35DZ*1                 | 8*8 Dot matrix *1        |
| ![img](media/wps565.jpg) | ![img](media/wps566.jpg)            | ![img](media/wps567.jpg) | ![img](media/wps568.png) |
| Breadboard wire          | Breadboard*1                        | 220Ω Resistor*8          | Micro USB cable*1        |

**3. Schematic Diagram：**

![](media/ab22a26e1c9e6b29f63e8f1abaaf5bfc.png)

**4. Wiring Graph：**

![](media/bf8f4cda7c91a6d63155068c9534c4b5.png)

**5. Test Code：**

**Code 1：**

Hook up according to the above connection diagram, LM35DZ is attached to P0. Link computer with micro:bit board. Then enable the online programming tool to design the code.

Click “Led”→”more”to get block“led enable false”, and combine it with“on start”

(1)

1.  Click“Led”→“more”，and find out“led enable false”

2.  Put it into the block“on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

![](media/f43a2689b44be35b18f28a3c091cc66a.png)

1.  Click “Variables”→“Make a Variable...”→“New variable name：”

2.  Enter “Temp” in the dialog box, click “OK”, then the variable “Temp” is created.
    
3.  Drag out“set Temp to 0”into“forever”

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Enter“Math”→“square root 0”

2.  Leave it into 0 box.

3.  Click the triangle button to select“integer÷”and we get ![](media/30fb457c98b971a35a2eddad7ac5475d.png)block.
    
4.  Go to“Math”to drag“\*”block into the left 0 box

![](media/782799ed1c13a4b62585419a86de6221.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)

1.  Go to “Advanced”→“Pins”→“analog read pin P0”
2.  Drag it into the second“0”box
3.  Change the first 0 into 300 and the third 0 into 1023.

![](media/f3baa789ad7a425ad41613420346cdb0.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5)  

2.  Enter“Advanced”→“Serial”→“serial write line“ ””and“serial write number“ ””

3.  Leave them into“forever”and enter“Temp”in the “serial write line“ ””block.

4.  Go to“Variables”to move out variable“Temp”into “serial write number”””

5.  Duplicate“serial write line“ ””and input “C”character.

    ![](media/05983156ed658321a6597a0cf0c00ab8.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“Basic”to move out“pause (ms) 100”below“serial write line“C””block，and set to 200ms

![](media/32c0d5f1911747dd3e862c82a7972ff6.png)

Complete Program：

| ![](media/b93b7edd1316923c95820bd9330235c9.png) | “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br /><br />The program under the block <br />“forever” runs cyclically.<br /><br />Set Temp to“300*analog signal <br />integer read by P0÷1023”<br /><br />Serial writes line“Temp”<br />Serial writes number“Temp”<br />Serial writes line“C”<br />Delay in 200ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/29e2cbaa2098445c0486b6da321c0884.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/5ecfe4a4637f67f1a6600a2f29d5360c.png)

Wire up through the connection diagram, upload the code and power on. Open CoolTerm, click“serialPort”, set to COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test). Click “OK” and “Connect”.

Serial monitor shows the ambient temperature, as shown below:

![](media/025edc0a72696ed96664cf161842a53e.png)

**Code 2：**

(Note: you could set the analog value through the test result.）

Hook up through the Wiring Graph, connect LM35DZ sensor to P0. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

(1) 

1.  Click“Led”→“more”，and find out“led enable false”

2.  Put it into the block“on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Go to“Logic”→“if.true..then...else”

2.  Place it into“forever”block

3.  Drag“=”into“true”block.

![](media/2fa8e063c27902baf3af5f69f1726ab3.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Go to“Math”→“square root 0”

2.  Place it into left“0”box

3.  Click the drop-down triangle button to select“integer÷”. Then get block ![](media/780124bffb2863033b88873ebb6a0661.png).
    
4.  Go to“Math”to move out“\*”block to left“0”box.

![](media/c3b8fbc8ab737abb2516abaed2736de7.png)

(4)

1.  Click“Advanced”→“Pins”→“analog read pin P0”

2.  Leave it into the second 0 box, change the first 0 into 300, the third 0 into 1023.
    
3.  Click the drop-down triangle button to select“≤”, change the fourth 0 into 30.

![](media/3024e3b551b6dd14acae8132d4629141.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5)

1.  Enter“Advanced”→“Pins”→“digital write pin P0 to 0”

2.  Keep it below the block“if 300....integer..1023”block

3.  Replicate“digital write pin P0 to 0”for 9 times.

4.  The pin B, G, 7, 6, 5, 4, 3, 2 , 1 and 0 on dot matrix are linked with pin P6, P15, P4, P7, P2, P8, P12, P14 and P9.
    
5.  Set P6, P5 to 0, and the rest of pins to 1.

![](media/1317b18f98ea4d44495c47f0b3de83eb.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6)

1.  Then move out“digital write pin P0 to 0”and replicate for 10 times.

2.  Move the whole code string under the“else”block

3.  The pin B, G, D, 7, 6, 5, 4, 3, 2, 1 and 0 on 8\*8Dot matrix are linked with pin P6, P15, P10, P4, P7, P2, P8, P12, P1, P14 and P9.
    
4.  Respectively set to P6, P15, P10, P4, P7, P2, P8, P12, P1, P14 and P9.

5.  Set P6, P15, P10 to 0 and the rest of pins to 1

![](media/5cf82027cad0aa5ba1cd95743acf8fd2.png)

Complete Program：

| ![](media/28b33392bc99ac0283d552af27bd92ba.png) | “on start”: command block runs <br />once to start program.<br /><br />Turn off LED dot matrix<br /><br /><br />The program under the block <br />“forever” runs cyclically.<br /><br />When“300\*analog read pin0÷1023≤300”is met，<br />the next program will be executed<br />Set P6 and P15 to low level (0), <br />set the rest pins to high level (1)<br /><br />When “300*analog read pin0÷1023≤300”isn’t met，<br />the program under else block will be executed.<br />Set P6 , P150 and P15 to low level (0), <br />set the rest pins to high level (1) |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/417f09f46bd8a0cf21e46965ce2cb46d.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/ac407319227fe337d087e84543565819.png)

6.  **Test Results：**

Wire up through the connection graph, upload the program and power on. When the ambient temperature is less than or equal to 30℃, the 8\*8 dot matrix shows“11”; when the temperature is greater than 30℃, the number“111”is shown.

### Project 41：Temperature and Humidity Watch

1.  **Description：**

This DHT11 Temperature and Humidity Sensor is a composite sensor which contains a calibrated digital signal output of the temperature and humidity.

Its technology ensures high reliability and excellent long-term stability. A high-performance 8-bit microcontroller is connected.

This sensor includes a resistive element and a sense of wet NTC temperature measuring devices. It has excellent quality, fast response, anti-interference ability and high cost performance advantages

In this project, we attach it to P0 of micro:bit board and use specific formulas to calculate the ambient temperature and humidity
values by reading relevant data. The calculated value will appear on the serial monitor. In addition, we combine the DHT11 temperature and humidity sensor with the OLED Display module to make the OLED display module show the humidity and temperature in the external environment.

**2. Components List:**

| ![img](media/wps569.jpg) | ![img](media/wps570.jpg)             | ![img](media/wps571.png)                          | ![img](media/wps572.png)        |
| ------------------------ | ------------------------------------ | ------------------------------------------------- | ------------------------------- |
| Micro:bit motherboard*1  | Keyestudio Micro:bit T Type Shield*1 | Keyestudio DHT11Humidity and Temperature Sensor*1 | KeyestudioOLED Display module*1 |
| ![img](media/wps573.jpg) | ![img](media/wps574.jpg)             | ![img](media/wps575.jpg)                          | ![img](media/wps576.png)        |
| Breadboard*1             | Breadboard wire                      | F-M Dupont Lines                                  | Micro USB Cable*1               |

**3. Schematic Diagram：**

![](media/8b199d2d6453211e273c772e9dc49144.png)

**4.Wiring Graph：**

![](media/5ee83090498c4325bfb7af150fd3345d.png)

**5. Test Code：**

**Code 1：**

Wire up through the connection diagram, DHT11 humidity and temperature sensor is linked with P0. Link computer with Micro:bit board. Then enable the on-line programming tool to design the code.

**How to add the library file of DHT11 temperature and humidity sensor:**

Enter the Micro:bit online programming page and click“Advanced”then“Extensions”.![](media/792e3ec83c270dffdae7758a0721600d.png)

Input DHT11 to search (as shown below). Click library file to download and install automatically.

![](media/ac14d68c5e2b5acdc4384825b5a9b64c.png)

After installing library file successfully, the corresponding blocks are shown in the code editing area.

![](media/1f327af9f32c0e35403289b646c36415.png)

(1)

1.  Click “Led”→”more”to get block“led enable false”, and combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

2.  Click“DHT11/DHT22”to move out blocks“Query DHT11Data pin P0 Pin pull up true Serial output false and wait 2 sec after query true”.
    
3.  Place it into“forever” block

![](media/b7cdf79d8ac7c5efd3c798a63fa5731e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Enter “Advanced”→“Serial”to drag out “serial write value“ ”= 0”.

2.  Put it beneath“wait 2 sec after query true”,

3.  Go to“DHT11/DHT22”to find out“Read humidity”block.

4.  Place it to the right box of “=”. Click the drop-down triangle button to select “temperature”.
    
5.  Input“temperature”character string at left box of“=”block.

![](media/8d143068104da23b5e7d946b132c9cf8.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Copy“serial......“temperature”=Read temperature” once and place it into“forever”block.
    
2.  Change temperature into“humidity”

![](media/a75ba7eb7d838cce7eefea54420bb140.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“Basic”to drag out “pause (ms) 100” below the block “serial...Read humidity”, and set to 200ms

![](media/224fdbec90f909bfab75691531a43f06.png)

Complete Program:

| ![](media/a4ba1bbcf70b490fff6fc685f8db055a.png) | “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Query data from DHT11/DHT22 sensor, <br />if you are using 4 pins/no PCN board versions, <br />you’ll need to pull up the data pin. <br /><br />It is also recommended to wait 1(DHT11) <br />or 2(DHT22) seconds between each query.<br /><br />Serial write value “temperature ”=Read temperature<br />Serial write value“humidity ”=Read humidity<br />Delay in 200ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/c38d38f91afcaa5736601e4f70e96b3e.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/124e54e57b27e234ff152dfbb868783a.png)

Wire up through the connection diagram, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test).

Click “OK” and “Connect”.

DHT11 temperature and humidity sensor detect the ambient temperature and humidity value and the test result will be shown on serial monitor. As shown below:

![](media/109215ebcb4d4102a5684da349c459e3.png)

**Code 2：**

Hook up according to the above connection diagram, S end of DHT11 humidity is attached to P0, SDA and SCL pins of OLED module are linked with P20 and P19. Link computer with micro:bit board. Then enable the online programming tool to
design the code.

Click “Led”→”more”to get block“led enable false”, combine it with “on start”.

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![](media/262fcf3cfdca5ad79bdf5839e61d290c.png)

Click“OLED”to find out“initialize OLED with width 128 height 64”, and place it below“led enable false”block

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“DHT11/DHT22”to find out“Query DHT11 Data pin P0 Pin pull up true Serial output false Wait 2 sec after query true”, and move them into “forever”.

![](media/b7cdf79d8ac7c5efd3c798a63fa5731e.png)

Enter“OLED”to move“clear OLED display”block below “Wait 2 sec after query true”.

![](media/dde005e5aa17b69d48b2465a1c6ff3f0.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Click“OLED”to drag out“show number 0”into“forever”, then tap“DHT11/DHT22”module and drag out“Read humidity”into“show number 0”.

![](media/f6f5c72cb6c9f22b9008ee7985b38dac.png)

Click“OLED”to drag out“show string”””block and place it beneath the block“show number Read humidity”. Then enter “%”into“show string”””block![](media/3c9db91bfb924b7d675e4f6a0a4a2242.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Copy code string![](media/f87f38f54f70c8aa703aa541fa6b81c5.png)once and change“%”into“C”, humidity into “temperature”. Then place it below the “show string“%””block.

![](media/4e2d5d8cb8276f1ef9d842017e82ffea.png)

Complete Program：

| ![](media/17946e5efb52ce4fa79393ce1c498747.png) | “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br />Initialize the OLED,64 in height,128 in width.<br /><br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Query data from DHT11/DHT22 sensor, <br />if you are using 4 pins/no PCN board versions, <br />you’ll need to pull up the data pin. <br /><br />It is also recommended to wait 1(DHT11) <br />or 2(DHT22) seconds between each query.<br /><br />Clear OLED display.<br /><br />Show the read humidity.<br />Display“%”.<br /><br />OLED displays the temperature read by P0.<br />OLED shows “C” |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/6b0d3bc7ce16d6d3ee3bfca769bdb5b8.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/2ec92cf3152eac9faf3eb2df0adac382.png)

**6. Test Results：**

Upload program and power on. OLED displays the detected ambient temperature and humidity value.

### Project 42： IR Remote Control

1.  **Description：**

In our life, we often see people use infrared remote control to control various home appliances, such as refrigerators, stereos, and video recorders.

Infrared remote control is composed of infrared transmitting and receiving systems, that is, an IR remote control, IR receiver and a single-chip microcomputer that can be decoded.

![](media/9980b41f57feddc2e8a9c0346afaaea9.png)

The 38K infrared carrier signal emitted by the IR remote control is encoded by the encoding chip.

When the remote control button is pressed, an infrared carrier signal is sent out. And the IR receiver receives the signal to decode it, and judges which key is pressed by the difference of the data code.

![](media/cab38844eab9d727a68abe43342684dd.png)

In this project,we connect the IR receiver to the P16 of the Micro:bit board and upload the corresponding test code. After powering on, point at the IR receiver and press the button of infrared remote control , and then we can see the corresponding button key value on the serial monitor.

We can control other external sensor modules according to these key values. In this experiment, we connect external RGB, and use the infrared remote control to control the RGB.

2.  **Components List:**

| ![img](media/wps577.jpg) | ![img](media/wps578.jpg)             | ![img](media/wps579.jpg) | ![img](media/wps580.jpg) |
| ------------------------ | ------------------------------------ | ------------------------ | ------------------------ |
| Micro:bit motherboard*1  | keyestudio Micro:bit T Type Shield*1 | RGB*1                    | Breadboard*1             |
| ![img](media/wps581.jpg) | ![img](media/wps582.jpg)             | ![img](media/wps583.jpg) | ![img](media/wps584.png) |
| 220ΩResistor*3           | IR remote control*1                  | Breadboard wire          | Micro USB cable*1        |
| ![img](media/wps585.jpg) |                                      |                          |                          |
| IR receiver Breadboard*1 |                                      |                          |                          |

3.  **Schematic Diagram：**

    ![](media/5f916c03982c6a1837c28df30e36ca95.png)

4.  **Wiring Graph：**

![](media/90f997c8de8572db09997205f5ba8058.png)

**5. Test Code：**

**Code 1：**

Hook up according to the above connection diagram, IR receiver is attached to P16. Link computer with micro:bit board. Then enable the online programming tool to design the code.

**How to add library file of IR receiver:**

Enter the Micro:bit online programming page and click“Advanced”then“Extensions”![](media/792e3ec83c270dffdae7758a0721600d.png)

Input the library file link：https://github.com/mworkfun/pxt-RI-receiver.gitand search, as shown below, click to install the library file.

![](media/77fc0205584870459cfaf0804817af99.png)

After Installing the library file of IR receiver successfully, then the corresponding blocks are displayed in edit column.

![](media/adc47c7b54896e1d024148095c424e45.png)

(1)

Click “Led”→“more”→“led enable false”

Put it into“on start”block.

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

A. Go to“IR Remote”and move out “connect IR receiver at P0”block below the block“led enable false”.

B. IR receiver is linked with P16, so click the drop-down triangle button to select P16.

![](media/a739d14949fa499c731faad609c0b9e4.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
(3)

A. Enter“Variables”→“Make a Variable...”→“New variable name：”，

B. Enter“val”and click “OK”. Thereby, the variable“val” is created.

C. Go to “Variables”to drag“set val to 0”into“forever”block

![](media/31d02e3dd6d88804f30a674bae105133.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4) Click“IR Remote”to move“IR button”into“0”box.

![](media/3a776c1ba367bae034d8f76e9f6a8489.png)

(5)

1.  Go to“Advanced”→“Serial”→“serial write value“x”=0”

2.  Place it below the block “set val to IR button”

3.  Change “x” into “IR”

4.  Move out “val”from“Variables”into “0”box

![](media/a370d0bd351f9da33b81449cbbda4481.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6)A. Click“Basic”→“pause (ms) 100”

B. Place it into“forever”, set to 1000ms.

![](media/026e18c3df530e6bfa58ef3de81c0380.png)

Complete Program：

| ![](media/280c757d398f0e11b23487bf4d2dac65.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br />Connect IR receiver to P16<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set val to IR button<br /><br />Serial write value “IR”= val<br /><br />Delay in 1000ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:
![](media/23bf385ead885b59c701e656c2832e30.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/54ba035e18ca60cb3631ae9ad2245fb5.png)

**6. Code explanation：**

When the button is unpressed, the serial monitor refresh the number 0 constantly; When pressed, the serial monitor shows the corresponding key values

**Special Note:**

1.  Some IR remote control doesn’t come with battery, therefore you need to purchase it yourself. The battery mode is CR2025.
    
2.  Need to make sure IR remote control is OK:

First step: Open camera of cellphone, point IR remote control at camera.

Second step: if there is purple light is flashing, which it indicates “OK”

Wire up through the connection diagram, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test).
Click “OK” and “Connect”.

IR remote control points at IR receiver, press the keys. Then the corresponding key values are shown on serial monitor, as shown below:

![](media/a2c59f8119f9b1659c2bb40833836430.jpeg)

We make a key value table by these key values

![](media/a52aed8032b82cd11c95f34eea8a2a29.jpeg)

**Code 2：**

The IR receiver is connected to P16, the pins of RGB are linked with P0, P1 and P2. Link computer with micro:bit board. Then enable the online programming tool to design the code.

1.  Click “Led”→”more”to get block“led enable false”, combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

2.  Go to “IR Remote”to lay down the block “connect IR receiver at P0” into “on start”. IR receiver is linked with P16, so set to P16.

![](media/a739d14949fa499c731faad609c0b9e4.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Click“Variables”→“Make a Variable...”→“New variable name：”

2.  Enter“val”in the blank box and click“OK”to produce variable“val”.

3.  Variable“val2”is created in same way. Then respectively move out“set val to 0”and“set val2 to 0”into“on start”.

![](media/53e7f291cc00407503a181b7b4840034.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4) Click“Variables”to drag out“set val to 0”into “forever”, then tap“IR. Remote”to move the“IR button”into 0 box

![](media/0c2de80fceb73ad075c177487da8943d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5) Go to “Logic”and find“if. true..then”block. Lay down it into “forever”and drag “=” into“true”box.

![](media/05280f0fc901524722c9f37fb92d37c3.png)

(6) Click“Variables”and move out variable“val”to the left box , then click the drop-down triangle button to choose “≠”.

![](media/714440757f1e1475db4ea3313f707fab.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
(7) A. Enter“Variables”again and find out“set val2 to 0”, put it beneath“if...0..then”block.

B. Drag variable“val” into“0”box of block“set val2 to 0”

![](media/c7113c934b0ab15ada6402db27fd2a12.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(8)A. Tap“Logic”module and move out“if...then...else”to the beneath of“set val2 to val”.

B. Then click“![](media/a7c5c78217692a965e679b2439ab2f3a.png)”icon for 3 times

C. Move out“=” block from“Logic” into“true”box.

![](media/78fb28c9eb24c91a9d6fdbdc2bde5295.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(9)Go to“Variable”to drag ou“val2”and place it to left “0”box of “=”, change right“0”into 70.

![](media/c68d483dba85fc4dd164b26ba7bc5bc8.png)

(10)

1.  Go to“Advanced”→“Pins”→“analog write pin P0 to 1023”

2.  Leave it below the“if...val2...then”block and copy it for 2 times.

3.  RGB is linked with P0, P1 and P2. So set to P0, P1 and P2. Set P1 and P2 to 0, and keep P0 unchanged.

![](media/2b6771152f7757425bac0f83b85ac038.png)

(11)

1.  Copy block“val2=70”once and place it into the blank box behind the first“else if..then”, change 70 into 68.
    
2.  Then copy the code string![](media/57832b6c9ba0475e23ac733f0db75225.png)once and leave it beneath the first “else if ...then”block.
    
3.  Set P0 to 0, P1 to 1023.

![](media/62a456ac77bb94d1565c13e1707d0eaa.png)

(12)

1.  Duplicate block“val2=68”once and place it into the blank box behind the second“else if...then”block, change 68 into 67.
    
2.  Then copy the code string![](media/d6ea1a76560417ec268ef63a2b83b678.png)once and leave it beneath the second“else if ...then”block.
    
3.  Set P1 to 0 and P2 to 1023.

![](media/94bd0bcb19ec9e4fe0d8a9e6039ab392.png)

(13)

1.  Replicate block“val2=67”once and place it into the blank box behind the third“else if...then”block, change 67 into 64.
    
2.  Then copy the code string![](media/85ec481fde25e21ddbbd0ff48bf51b42.png)once and leave it beneath the third“else if ...then”block.
    
3.  Set P0 to 1023.

![](media/944b64abc96986239656964c57c24f65.png)

(14)

Copy the code string![](media/66a4e5538ed2e3fd8695b6540cd9e9b7.png)once and keep it below the “else” block. Set P0, P1 and P2 to 1023.

![](media/f77186b9bdec5344672fe42afbaf1fbf.png)

Complete Program：

| ![](media/f2c9c8b71b14257d2e8c91715d41c03a.png)<br />![](media/fcb9dd88a9b4e10ddc9814eb9c71e147.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br />Connect IR receiver to P16<br /><br />Set val and val2 to 0<br /><br /><br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set val to IR button.<br /><br /><br />When val≠0, <br />the program under “if val1...then”block will be executed.<br /><br />Set val2 to val<br /><br />When val2=70, <br />the program under “if val2...then” block will be executed.<br /><br />Set P0, P1 and P2 to 1023,0 and 0<br /><br />When val2=68, <br />the program under “if val2.68..then” block will be executed.<br /><br />Set P0, P1 and P2 to 0, 1023 and 0<br /><br />When val2=67,<br />the program under “if val2.67..then” block will be executed.<br /><br />Set P0, P1 and P2 to 0, 0 and 1023 <br /><br />When val2=64, <br />the program under “if val2.64..then” block will be executed.<br /><br />Set P0, P1 and P2 to 1023, 0 and 1023 <br /><br />Otherwise, <br />the program under the else block will be executed <br /><br />Set P0, P1 and P2 to 1023 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/628d330da34d1294ddbcfce2cae8785c.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/f093a8dd13ff6c1f6935f7c799f3274d.png)

7.  **Test Results：**

Wire up through the connection diagram, upload the program and plug in power. Point IR remote control at IR receiver. Then press the corresponding keys. When press keys separately, RGB LED shows red, green, blue and purple color. When other keys are pressed, RGB displays white color.

8.  **Extension Project：**

Point IR remote control at IR receiver. Then press the corresponding keys. When press![](media/c94e3dbf10fc001326ce1cd32590249b.png),![](media/cadda42d6a7ea7ddbeba79950a9706e2.png),![](media/87f8c1ec0c06adf99cce7cc5dd4d1e9e.png) keys separately, RGB LED shows red, green, blue and purple color. When ![](media/d42962cdd257f8b880198f6d5c8ee5db.png) is pressed, RGB displays white color

![](media/07feed6708c6dd7f1b009952c94a96aa.png)

### Project 43： Electronic Clock

1.  **Description：**

The DS1302 trickle-charge timekeeping chip contains a real-time clock/calendar and 31 bytes of static RAM. It communicates with a microprocessor via a simple serial interface. The real-time clock/calendar provides seconds, minutes, hours, day, date, month, and year information. The end of the month date is automatically adjusted for months with fewer than 31 days, including corrections for leap year. The clock operates in either the 24-hour or 12-hour format with an AM/PM indicator.  

Interfacing the DS1302 with a microprocessor is simplified by using synchronous serial communication. Only three wires are required to communicate with the clock/RAM: CE, I/O (data line), and SCLK (serial clock). Data can be transferred to and from the clock/RAM 1 byte at a time or in a burst of up to 31 bytes. The DS1302 is designed to operate on very low power and retain data and clock information on less than 1µW.  

The DS1302 is the successor to the DS1202. In addition to the basic timekeeping functions of the DS1202, the DS1302 has the additional features of dual power pins for primary and backup power supplies, programmable trickle charger for VCC1, and seven additional bytes of scratchpad memory. ，

The DS1302 and the MCU can simply communicate in a synchronous serial manner, and only three ports are needed: RST reset, DAT data line and CLK serial clock. The module comes with a positioning hole, which is convenient for you to fix it to other equipment.

DS1302 is practically clock module. When setting time, it cam move.

2. **Components needed**

| ![img](media/wps586.jpg) | ![img](media/wps587.jpg)             | ![img](media/wps588.png) | ![img](media/wps589.jpg)          |
| ------------------------ | ------------------------------------ | ------------------------ | --------------------------------- |
| Micro:bit *1             | keyestudio Micro:bit T Type Shield*1 | DS1302 Clock Module*1    | Keyestudio 4-digit Tube Module *1 |
| ![img](media/wps590.jpg) | ![img](media/wps591.jpg)             | ![img](media/wps592.jpg) | ![img](media/wps593.png)          |
| Breadboard*1             | Breadboard Wire                      | F-M Dupont lines         | Micro USB Cable*1                 |

**3. Schematic Diagram：**

![](media/b05435bfc20d482faad8a8c6f411cdd6.png)

**4. Wiring Graph：**

![](media/2adbc726fce41ef335a44d27926edea6.png)

**5. Test Code：**

**Code 1：** **(Note: The DAT pin on the DS1302Clock module equals to the DIO pin, the RST pin is the CS pin, and the CLK pin is the CLK pin )**

Wire up through the connection diagram, DS1302Clock module is connected to P13, P14 and P15. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

**How to add the library file of DS1302Clock module:**

Enter the Micro:bit online programming page then click”Variables”and“Extensions”

![](media/c40d36df412558f74eb1adccfe842657.png)

Input DS1302 to search, as shown below , click to download and install the library file.

![](media/da3535db8e419bbcdffba9633749631a.png)

After installing the library file successfully, the corresponding blocks are displayed in the code editing column.

![](media/025aa0eee9fd3973879d4dc7846b1022.png)

(1)

1.  Click“Led”→“more”，and find out“led enable false”

2.  Put it into the block“on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Click“Variables”→“Make a Variable...”→“New variable name：”，

2.  Input“ds”and click“OK”, then variable“ds”is generated. C. Drag“set ds to 0”from“Variables”into block“on start”
    ![](media/d3ebc0050c4812618c2abcc8fdfc67bc.png)

**(Note: The DAT pin on the DS1302Clock module equals to the DIO pin, the RST pin is the CS pin, and the CLK pin is the CLK pin )**

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Enter“RTC DS1302”→“CLK P13 DIO P14 CS P15 ”；

2.  Move it into 0 box of“set ds to 0”block.

3.  DS1302Clock module is connected to P13, P14 and P15.

![](media/e14a6415c861117ed421145fcf6a38db.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)

1.  Go to“Advanced”→“Serial”→“serial write value“x”=0”；

2.  Place it into“forever”block

3.  Move out“ds get year”from“RTC DS1302”and leave it into “0”box.

![](media/264144cdd88fb06f21f1aeb6503e08e6.png)

(5)

A. Then duplicate“serial write value“Year”=ds get year”for 6 times and place them into“forever”;

B. Separately change“Year”into “Month, “Weekday”,“Day”,“Hour”,“Minute”,“Second”.

C. Then drag out the corresponding blocks“ds get month”,“ds get weekday”,“ds get day”,“ds get hour”,“ds get minute”,“ds get second”from “RTC DS1302”.

D. Set code string as follows:

![](media/e5b2a839defcaf12686aaed327aa28e3.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6) Click“Basic”to move “pause (ms) 100”block below“serial .....second”block

![](media/4ac8bac8dc429ba74d9718210f6ac4bd.png)

Complete Program：

| ![](media/355b1b0504da4706c7eb31a86d12b316.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br />Set “ds” to “CLK P13 DIO P14 CS P15”<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Serial write value Year=ds get year<br />Serial write value Month=ds get month<br />Serial write value Day=ds get day<br />Serial write value Weekday=ds get weekday<br />Serial write value Hour=ds get hour<br />Serial write value Weekday=ds get weekday<br />Serial write value Hour=ds get hour<br /><br />Delay in 100ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/8694945f3bb3197d54d2af7bbb8a6374.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/e658cf4eaefeba9a63f5384812dee253.png)

Wire up through the connection diagram, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test).

The serial monitor shows the time（year, month, day, week, hour, minute, second)，as shown below.

![](media/d4882cc744a4b7d2c66b8cbc97242c86.png)

**Code 2：**

**(Note: The DAT pin on the DS1302Clock module equals to the DIO pin, the RST pin is the CS pin, and the CLK pin is the CLK pin )**

Wire up through the connection diagram, the pin CLK, DAT and DAT of DS1302Clock module are attached to P13, P14 andP15

nk computer with Micro:bit board. Then enable the online programming tool to design the code as follows:

Add the library file of DS1302Clock module first, and refer to the“Code 1”. In addition, we also need to import the library file of 4-digit tube module(Project18)

(1)

1.  Click“Led”→“more”，and find out“led enable false”

2.  Put it into the block“on start”![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Click “Variables”→“Make a Variable...”→“New variable name：”

2.  Input“ds”and click“OK”, then variable“ds”is generated.

3.  Generate the variable“tm”in same way.

4.  Drag“set tm to 0”from“Variables”into block“on start” , and copy it for once. Then click the triangle button to select “ts”![](media/660731aef156d64283297594ec3ea8fc.png)

(3)

1.  Enter“RTC DS1302”→“CLK P13 DIO P14 CS P15 ”；

2.  Place it into“0”box of“set ds to 0”block.

3.  Click“TM1637”to get “CLK P1 DIO P2 intensity 7 LED count 4”and leave it into “0” box of“set tm to 0”block.

![](media/50f26c2431a3ab6f0bfc9b587ebfbb6b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)

1.  Go to“TM1637”to get“tm show digit 5 at 0”and place it into“forever”block.

2.  Enter“Math”to move out“÷”block into“5”box

3.  Click“RTC DS1302”to drag“ds get hour”into left“0”box

4.  Then set“ds get hour÷ 10”

![](media/50f50661d05e30d6b72582d097ed68da.png)

(5)

1.  Copy block “tm show digit ds get hour÷10 at 0”block.

2.  Remove“ds get hour÷ 10”block

3.  Enter“Math”to move out“remainder of 0 ÷ 1”block into “5”box.

4.  Go to“RTC DS1302”to drag“ds get hour”into “0”box of“remainder of 0 ÷ 1”, then set to“tm show digit reminder of get hour÷ 10 at 1”.

![](media/736ec86f149841d570ff7d17effedaaa.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6) Copy code string![](media/c85ae5842c8d93b427930b8708751f4d.png)once and place it into“forever”block，

Then go to“RTC DS1302”to move out“ds get minute”and replace“ds get hour”block，separately change 0 into 2 and 1 into 3:

![](media/fd6cd3562d5412f48da1f74c8024eb54.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(7)Enter“8 TM1637”to get“item DotPoint at 1 show true”and leave it into“forever”block

![](media/968a0c0bd555a4a871ccda1117754657.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(8) Click“Basic”to drag“pause (ms) 100”below the block “item DotPoint at 1 show true”, and set to 500ms.

![](media/81b1bf0f53b339cb666a91a1ff480b8d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(9)Duplicate code string![](media/a99a2516e812a60c348907c70ca7ea54.png)again, and place it into“forever”block，click the triangle button to select “false”.

![](media/3a6e89cc432c677720f458246ef743de.png)

Complete Program：

![](media/967e102c99901a27f5e3e8927b1cc186.png)

![](media/967e102c99901a27f5e3e8927b1cc186.png)

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/35e58b219da64bbb41ccd086ce13be46.png)

Then click drop-down triangle button and select“Python”to see the Python language code：

![](media/b85c60e7b2f9704efd0c10a34610fe59.png)

6.  **Tests Results：**

Wire up through the connection diagram, upload the program and power on, the time is shown on 4-digit tube module

### Project 44：Micro: bit Somatosensory Gloves

1.  **Description：**

Integrating 3-axis magnetometer and accelerator, micro:bit board can measure the rotation speed of 3-axis, detect the acceleration, tilt and free fall, etc.

3-axis magnetometer communicate with the outside by I2C port. Its range can be set to ±2g, ±4g, ±8g, and the maximum data update rate is 800Hz.

When the Micro:bit board is in static or uniform motion, it can only detect gravitational acceleration. When in slight vibration, the detected acceleration is far smaller than the acceleration of gravity. Thereby, in a sense, we primarily detect change of gravitational acceleration at x, y and z axis when using Micro:bit board.

**2. Components List:**

| ![img](media/wps594.jpg) | ![img](media/wps595.jpg)             | ![img](media/wps596.jpg) | ![img](media/wps597.jpg) |
| ------------------------ | ------------------------------------ | ------------------------ | ------------------------ |
| Micro:bit *1             | keyestudio Micro:bit T Type Shield*1 | RGB*1                    | 220Ω Resistor*3          |
| ![img](media/wps598.jpg) | ![img](media/wps599.jpg)             | ![img](media/wps600.png) |                          |
| Breadboard*1             | Breadboard wire                      | Micro USB Cable*1        |                          |

3.  **Schematic Diagram：**

    <img src="media/6e48380b2d9601ae9a82d0bcfa527ed8.png" style="zoom:50%;" />

4.  **Wiring Graph：**

    ![](media/32f8cbfbf4349ca8884fb33c07e9e9c6.jpeg)

![](media/e6447f92671e37aea9682dcc346afcc0.png)

**5. Test Code：**

**Code 1:**

**Micro:bit motherboard primarily demonstrates 3 axis magnetometer (electronic compass) function**

Wire up through the connection diagram, upload code, the pins of RGB are connected to P0, P1 and P2. Link computer with Micro:bit board. Then enable the online programming tool to design the code as follows

(1)

Click“Led”→“more”to get block“led enable false”;

Combine it with“on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2) Go to“Input”to get“on shake”, then click the triangle button to select“logo up”.

1.  Click“Advanced”→“Pins”→“analog write pin P0 to 1023”

2.  Place it into“on logo up”block

3.  Copy“analog write pin P0 to 1023”for 2 times.

4.  RGB are connected to P0, P1 and P3, therefore, set to P0, P1, P2.

5.  Then set P1 and P2 to 0, keep P0 unchanged.

![](media/f15a8eb28a5126cb28a164b4970d741d.png)

(3)

1.  Duplicate code string ![](media/f15a8eb28a5126cb28a164b4970d741d.png)for 6 times.
    
2.  Separately set to“logo down”,“screen up”,“screen down”,“tilt left ”,“tilt right”and“shake”
    
3.  Then set P0 to 0, 0, 1023, 1023,0,1023; P1 to 1023, 0, 1023, 0, 1023, 1023; P2 to 0, 1023, 0, 1023, 1023,1023.

![](media/42676b27814e60f3528cf8f21a3f4a1b.png)

Complete Program：

| ![](media/ffcefe8b6f76b03c530eb7d19624b6f0.png)<br />![image-20230517173642228](media/image-20230517173642228.png) | “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br /><br />The logo of Micro:bit board is toward up.<br />Set P0, P1and P2 to 1023, 0,0 <br /><br />The logo of Micro:bit board is toward down.<br />Set P0, P1and P2 to 0, 1023, 0<br /><br />The screen of Micro:bit board is toward up.<br />Set P0, P1and P2 to 0, 0, 1023<br /><br />The screen of Micro:bit board is toward down.<br />Set P0, P1and P2 to 1023, 1023, 0<br /><br />Micro:bit board is inclined to left side.<br />Set P0, P1and P2 to 1023, 0,1023<br /><br />Micro:bit board is inclined to right side.<br />Set P0, P1and P2 to 0,1023, 1023<br /><br />Vibrate Micro:bit board<br />Set P0, P1and P2 to 1023,1023, 1023 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/5ab655eda936e5f96c2bd40d6193343c.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/9f2ec872706ee2c0678aa5cc323a4d4e.png)

![](media/c52f425318d32146e5e71a7e32d3438b.png)

Wire up, upload the code and plug in power power. When the logo of micro:bit board is up and down, RGB lights up red and green green.

When the screen of micro:bit board is up and down, RGB respectively displays blue and yellow color; when micro:bit board is tilted to left and right side, purple and whit color are displayed.

**Code 2：**

**Micro:bit motherboard primarily demonstrates 3 axis magnetometer (electronic compass) function**

Hook up according to the above connection diagram, link computer with micro:bit board. Then enable the online programming tool to design the code.

1.  Click “Led”→”more”to get block“led enable false”, and combine it with“on start”.
2.  ![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Click“Variables”→“Make a Variable...”→“New variable name：”

2.  Enter“X” and click“OK”, then variable “X”is produced.

3.  Then go to“Variables”to drag out“set X to 0”into“forever” block.

4.  Create variable“Y”and“Z”in same way.

![](media/4a84674b7d6a02debea19af90ebb25a3.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3) Enter“Input”to drag out “acceleration(mg) x”out and place it into “0”box

![](media/f3bc4008a36ea3dfbeb9f21428597fc9.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4) Copy“set X to acceleration(mg) x”block for 2 times. Then click triangle button to set to Y and Z.

![](media/f7c18f3f390ec678883997a1346cdd00.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5)

1.  Click“Advanced”→“Serial”→“serial write line”””

2.  Place it into“forever”

3.  Go to“Advanced”→“Text”→“join Hello World”

4.  Move it into“serial write line”””

5.  Drag variable “X” into “world” box, and change “Hello”into“X====” .

![](media/fff92de9d8a5c31104bbd9f2f06eaa8d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6)

1.  Copy block“serial write line join X====X”for 2 times

2.  Respectively change“X====”into“Y====”and“Z====”

3.  Click the triangle button to select“y”and“z”

![](media/139e49b6b8abc701d6c01668d766d97b.png)

Complete Program：

| ![](media/8eacb8b5d910c3170ed7a8e8d6a8aec0.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set X to acceleration(mg) x<br />Set Y to acceleration(mg) y<br />Set Z to acceleration(mg) z<br /><br />Write a character string “X\==\==x” on serial  <br />Write a character string “Y\==\==y”on serial <br />Write a character string “Z==\==z” on serial |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/d7e89f92013ed13ccac24de0b82382c1.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/01f212843315fe73d618a89e84d6ac0a.png)

Wire up through the connection diagram, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test).

Click “OK” and “Connect”.

With the angles change of micro:bit board, the values of X, Y and Z vary as well, as shown below:

![](media/82dcbe085dcfa460dd13c2b7c65e600e.png)

### Project 45：Joystick Control

1.  **Description：**

The joystick sensor module uses original high-quality metal PS2 joystick potentiometer, with (X, Y) 2-axis analog output and (Z) 1-channel button digital output. Combing with sensor shield, you can make a remote control or other interactive projects.

It is compatible with various MCU, like Micro:bit board. We connect keyestudio Micro:bit T Type Shield and Micro:bit board and this module together. The X, Y and Z end of joystick module are connected to the Pin 0, Pin1 and Pin2 of Micro:bit board. The results are shown on serial monitor.

2.  **Components List:**

| ![img](media/wps601.jpg) | ![img](media/wps602.jpg)             | ![img](media/wps603.png)     | ![img](media/wps604.jpg) |
| ------------------------ | ------------------------------------ | ---------------------------- | ------------------------ |
| Micro:bit *1             | keyestudio Micro:bit T Type Shield*1 | Keyestudio Joystick Module*1 | Breadboard wire          |
| ![img](media/wps605.png) | ![img](media/wps606.jpg)             | ![img](media/wps607.jpg)     |                          |
| Micro USB Cable*1        | Breadboard*1                         | F-M DuPont wires             |                          |

3.  **Schematic Diagram：**

<img src="media/6ac09008896337775a25c1c8aa66617a.png" style="zoom:50%;" />

4.  **Wiring Graph：**

![](media/9d0f7dd35070f858af43d3326236c957.png)

**5. Test Code：**

Wire up through the connection diagram, connect joystick module to P0, P1 and P2. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

(1)

 Click“Led”→”more”to get block“led enable false”, and combine it with“on start”

![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Click“Advanced”→“Serial”→“serial write value “x”=0”;

2.  Move it into“forever”block

![](media/fe7e64859506fdee1166cac790d75691.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Enter“Advanced”→“Pins”→“analog read pin P0”；

2.  Leave it into“0”box

3.  Change“x”into“X”

![](media/69ef9f38662a33cb8dfa0b4af8e966f8.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4) A.Copy block“serial write value “X”=analog read pin P0”for 2 times.

B. Separately set“X”to P0,“Y”to“P1 and“B”to P2.

![](media/4a634d9f0b4a63a2a358f6ca0f77d630.png)

(5) Click “Basic” to move “pause (ms) 100” block below “serial..”B”..P2” block.

![](media/03f049dd31ce82757b6eaee6ab72213a.png)

Complete Program：

| ![](media/556582472a6d46d03387a30b437cc69a.png) | “on start”: command block runs once to start program.<br />Turn off LED dot matrix<br /><br />The program under the block “forever” runs cyclically.<br /><br />Serial write value “X”= analog read pin P0<br />Serial write value “Y”= analog read pin P1<br />Serial write value “Z”= analog read pin P2<br /><br />Delay in 100ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click “JavaScript", you will view the corresponding JavaScript code:

![](media/eafb24b370ce2d9ded3bbdf180370dba.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/b02a9d8fc296ded6fcde67018fd54dfa.png)

6.  **Test Results：**

Wire up through the connection diagram, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test).

Click “OK”and “Connect”.(the baud rate of USB serial communication of Micro:bit is 115200 through the test)

Control Joystick Module then we could see the corresponding the displayed result on serial monitor

![](media/73dcd20c5605a6ed6cbecb5fb1a0d107.png)

### Project 46： Analog Car Movement

1.  **Description：**

In previous project, we’ve learned the control principle of joystick. In this lesson, we put the theory to the practice and simulate the car movement by joystick.

Let’s connect the x and y ends of joystick module to P3 and P4 of Micro:bit board. B is linked with P5.

**2. Components List:**

| ![img](media/wps608.jpg) | ![img](media/wps609.jpg)                         | ![img](media/wps610.jpg)             | ![img](media/wps611.jpg)          | ![img](media/wps612.jpg) |
| ------------------------ | ------------------------------------------------ | ------------------------------------ | --------------------------------- | ------------------------ |
| Micro:bit *1             | Keyestudio Micro:bit T Type Shield*1             | ULN2003 Stepper Motor Driver Board*1 | Keyestudio5-wire Stepper motor *1 | RGB*1                    |
| ![img](media/wps613.png) | ![img](media/wps614.jpg)                         | ![img](media/wps615.jpg)             | ![img](media/wps616.jpg)          | ![img](media/wps617.jpg) |
| Joystick module *1       | Keyestudio Breadboard Specialized Power Module*1 | AA Battery Holder*6                  | Breadboard wire                   | 220ΩResistor*3           |
| ![img](media/wps618.jpg) | ![img](media/wps619.jpg)                         | ![img](media/wps620.png)             | ![img](media/wps621.png)          |                          |
| F-M dupont Lines         | Breadboard*1                                     | Micro USB Cable*1                    | 6-Slot AA Battery Holder*1        |                          |

3.  **Schematic Diagram：**

<img src="media/cd3f86af38b21052728da8433cb70c5a.png" style="zoom:50%;" />

4.  **Wiring Graph：**

**Note: the ends of specialized power module should be connected to breadboard, and the DIP switch on power module should be dialed to +3V end**

![](media/c90dcc7b0eb8344e6d999b1bb47d258a.png)

**5. Test Code：**

Wire up through the connection diagram, link computer with Micro:bit board. Then enable the online programming tool to design the code.

|         Joystick module         |      |   Connected Pin   |
| :-----------------------------: | ---- | :---------------: |
|                X                |      |        P3         |
|                Y                |      |        P4         |
|                B                |      |        P5         |
|                                 |      |                   |
| **Stepper motor driver module** |      | **Connected Pin** |
|               IN1               |      |        P0         |
|               1N2               |      |        P1         |
|               IN3               |      |        P2         |
|               IN4               |      |        P8         |
|                                 |      |                   |
|             **RGB**             |      | **Connected Pin** |
|             RED pin             |      |        P6         |
|            GREEN PIN            |      |        P7         |
|            Blue pin             |      |        P9         |

For adding the library file of stepper motor driver module, refer to the method of project 34 please.

(1)

1.  Click “Led”→”more”→“led enable false”,
2.  Combine it with “on start”block.
2.  ![](media/d380f77697920f174fb819fce502f651.png)

(2) A. Enter“Ckmake-Base”→“StepperMotor Init in0 P0 in1 P1 in2 P2 in3 P8”;

B. Drag it below the block“led enable false”

![](media/95d4fbd134ff563d6859a85b70d164a7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)A. Enter“Ckmake-Base”→“set stepper Speed SPEED1”

B. Place it into“on start”block, click the drop-down triangle button to choose SPEED3.

![](media/eb5ec0457ac88b59c2d8a8a8744b9c08.png)

(4)

A. Go to“Logic”→“if..true..then”

B. Move it into “forever”, then drag“=”block into“true”box.

![](media/c8880170266b37f51f4c540feb308993.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5)

1.  Go to“Advanced”→“pins”→“analog read pin P0”.

2.  Put“analog read pin P0”to the left “0”box of “=”block;

3.  Joystick module is attached to P4, so click the triangle button to select P4. Change “=” into “\>”, 0 into 1000.

![](media/45c718cf9f494b4ca004a1c1eafdc6a6.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6)

1.  Go to“Advanced”→“Pins”→“digital write pin P0 to 0”

Lay down it below“analog read pin 4\>1000 then”block and duplicate three times.

2.  RED,GREEN and BLUE pins of RGB are separately linked with P6, P7 and P9. Therefore, set P6 , P7 and P9. Alter 0 into 1 for P6.

![](media/641a6801e4eae56f1de234d4df3f2931.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(7)

1.  Click “Ckmake-Base”→“stepper Turn 0”.

2. Keep it beneath“digital write pin P9 to 0”block. 0 is altered into 1.

![](media/5362a62b7f653a87186ac635961c86b9.png)

(8)

1.  Duplicate code string ![](media/e48ca6206bf748b923997080ce989e8c.png)once,

2.  Put it into “forever”, change “\>”into “\<”, 1000 into 500. Set P6 to 0, P7 to 1 and“stepper turn” to -1.

![](media/c86c020a3b6277d9e4f8ffcac3df0d9e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(9)

1.  Replicate the code string ![](media/e48ca6206bf748b923997080ce989e8c.png)once and move it into“forever”，delete.
    
2.  Go to“Advanced”→“Pins”→“digital write pin P0”.

3.  B end of joystick module is linked with P5, so set to“digital write pin P5”, then replace“analog read pin P4”with it.
    
4.  Set to “=”, change 1000 into 1, 1 into 0 for P6 and 0 into 1 for P9;

5.  Delete“stepper Turn 1”block.

![](media/bd150a4744792dc9178bf0dcab7a5171.png)

Complete Program：

| ![](media/078363b08511fa87995fb9b88b6d29c9.png)<br />![](media/a83b96a04a72f1adf5bedb96d426a12c.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br />Set the speed of stepper motor to SPEED3<br /><br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />When the analog signal read by P4>1000, <br />the next program will be executed<br /><br />Set P6 to high level(1), RGB lights up red color<br />Set P7 to low level(0)<br />Set P9 to low level(0)<br /><br />Stepper motor revolves anticlockwise for 1 circle.<br /><br />When the analog signal read by P4<500, <br />the next program will be executed.<br /><br />Set P6 to low level(0)<br />Set P7 to high level(1), RGB lights up green color.<br />Set P9 to low level(0)<br /><br />Stepper motor revolves clockwise for 1 circle<br /><br />When P5 is high level(1), <br />the program undre “if...1...then”will be executed.<br /><br />Set P6 to low level(0)<br />Set P7 to low level(0), RGB lights up blue color.<br />Set P9 to low level(0) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/1ff0cd6bc3fb4f7bd099678bf360a550.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/a31c7aa7c898c31a6692f8425d25e11e.png)

**6. Test Results：**

Upload the program and power on. When pushing joystick forward, RGB lights up red color and stepper motor revolves anticlockwise for 1 circle; when pushing it backward, RGB lights up green color and stepper motor revolves clockwise for 1
circle. However, when it is pressed, RGB displays blue color.

**7. Extension Project：**

When the joystick is moved to the left, RGB lights up red color, and the stepper motor rotates 180° counterclockwise; when it is moved to the right, RGB lights up green color, and the stepper motor turns 180° clockwise; when the joystick is pressed, RGB displays white light.

![](media/4284a92891c80b04b8ae3c97237e80cb.png)

![](media/a67ed250c5d82e27c4816818813c6308.png)

### Project 47： Ultrasonic Ranging

1.  **Description：**

Ultrasonic sensors emit short, high-frequency sound pulses at regular intervals. These propagate in the air at the velocity of sound. If they strike an object, then they are reflected back as echo signals to the sensor, which itself computes the distance to the target based on the time-span between emitting the signal and receiving the echo.

In this lesson, we will firstly link the HC-SR04 ultrasonic sensor with the keyestudio mini T-shaped shield, which is used to test the distance between the ultrasonic sensor and the obstacle in front and display it on the CoolTerm serial port. Then connect the OLED display module so as to show the obstacle distance.

**2. Components List:**

| ![img](media/wps622.jpg)                         | ![img](media/wps623.jpg)             | ![img](media/wps624.png)    | ![img](media/wps625.jpg) |
| ------------------------------------------------ | ------------------------------------ | --------------------------- | ------------------------ |
| Micro:bit *1                                     | keyestudio Micro:bit T Type Shield*1 | HC-SR04 Ultrasonic Sensor*1 | F-M dupont Lines         |
| ![img](media/wps626.jpg)                         | ![img](media/wps627.jpg)             | ![img](media/wps628.png)    | ![img](media/wps629.jpg) |
| Keyestudio OLED Display Module*1                 | Breadboard*1                         | 6 AA Battery Holder*1       | BreadboardWire           |
| ![img](media/wps630.jpg)                         | ![img](media/wps631.jpg)             |                             |                          |
| Keyestudio Breadboard Specialized power module*1 | AA Battery Holder*6                  |                             |                          |

**3. Schematic Diagram：**

**(Note: the ends of specialized power module should be connected to breadboard, and the DIP switch on power module should be dialed to +5V end)**

<img src="media/3bca31dc04b26be3289fb18126f3ec24.png" style="zoom:50%;" />

**4. Wiring Graph：**

**(Note: the ends of specialized power module should be connected to breadboard, and the DIP switch on power module should be dialed to +5V end)**

![](media/352b61481e455c92dd65174e59f2020d.png)

**5. Test Code：**

**Code 1：**

Wire according to connection diagram. Connect HC-SR04 ultrasonic sensor to P2 and P1. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

(1)  

1.  Click“Led”→“more”→“led enable false”
2.  Put it in the block“on start”block

![](media/107f39ec8a41b7833f0f6ac79f99d180.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)Enter“Advanced”→“Pins”→“digital write pin P0 to 0”

1.  Leave it into“forever”block

2.  HC-SR04 ultrasonic sensor is linked with P2, so click the triangle button to choose P2.

![](media/87dad3ae73c88faea72a6a93529192c7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Click“Advanced”→Control”→“wait (us) 4”;

2.  Put it below“digital..P2..0”block and change 4 into 2.

    ![](media/6c30fd90cd71eac64389d3eaf17a1d04.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)Copy code string![](media/7c5d2d191984b4cff0a9009d6f6a7661.png)once and drag it into“forever”block，set the code string as follows:

![](media/5bf81e57b19414063caf5fc14a6dbd81.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5）Duplicate“digital write pin P2 to 0”once and leave it below “wait (us) 10”block：

![](media/3c77df880298eb3eacf6a61090b1e299.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6)

1.  Enter ”Variables”→“Make a Variable...”→“New variable name：”

2.  Enter“distance” in the dialog box and click“OK”, then the variable“distance” is generated.
    
3.  Move block“set distance to 0”from“Variables”and keep it below “digital...P2..0”block, as shown below

![](media/6887fe2c17b15e6209da094b42c405bf.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(7)

1.  Go to“Math”→ “square root 0”

2.  Place it into“0”box of “set distance to 0”block

3.  Click the triangle button to select“integer÷”.

![](media/75c34313201677cf2ccbd2d2247d286b.png)

(8) Enter“Advanced”→“Pins”→“more”→“pulse in (us) pin P0 pulsed high”. Place it into the left“0”of“integer÷”block

1. HC-SR04 ultrasonic sensor is attached to P1，so click the drop-down triangle button to set P1，

2. And change the right“0”of“integer÷”into 58.

   ![](media/367815a91d725ba10aaa403d37dabfff.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(9)

1.  Enter“Advanced”→“Serial”→“serial write value“x”=0”

2.  Put it into “forever” block

3.  Tap“Variables”→“distance”and keep it at the right box of “=”, and change “x” into“distance(cm)”
    
    ![](media/0369971e01b021226aa61cc7f053e43f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(10) Click“Basic”to drag out“pause (ms) 100”, then leave it into “forever”block. And set to 50ms.

![](media/93c87e85181a57d67c115328e811f38e.png)

Complete Program：

| ![](media/0c9938a0af61a06e22746020c3aef733.png) | “on start”: command block runs <br />once to start program.<br />Turn off LED dot matrix<br /><br />The program under the block<br />“forever”runs cyclically. <br /><br />Set P2 to low level(0)<br />Delay in 2ms<br /><br />Set 2 to high level (1) <br />Delay in 10ms<br /><br />Set P2 to low level(0)<br />Set distance to pulse in(us)pin P1 high integer÷58<br />Serial write distance(cm) = distance<br /><br />Delay in 50ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/d4e52bec93c15895e46d8ce5085f7a82.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/c4dea6d1cb1b38a7eded27670fa76268.png)

**Code 2：**

Wire up through the connection diagram, HC-SR04 ultrasonic sensor is linked with P2 and P1. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

**How to add the library file of ultrasonic sensor:**

Enter the Micro:bit online programming page then click”Variables”and“Extensions”

![](media/792e3ec83c270dffdae7758a0721600d.png)

Input sonar to search, as shown below, click the library file to download and install automatically.

![](media/df9e9b5c8180561f820821e6573779f0.png)

After installing the library file of ultrasonic sensor successfully and view the corresponding the module in the editing area.

![](media/1c99cb2bd2c589b31b6001ea3be295d5.png)

(1)A. Click “Led”→“more”→“led enable false”,

B. Combine it with “on start”.![](media/d380f77697920f174fb819fce502f651.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

1.  Click“Variables”→“Make a Variable...”→“New variable name：”.

2.  Input “distance”in the dialog box to click “OK”, then the variable “distance” is created.
    
3.  Go to“Variables”to move“set distance to 0”into“forever”block.

![](media/413cfef842ae9c8180877f4aa810775c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

1.  Click“Sonar”to find out“ping trig P0 echo P0 unit us”

  Put it into “0”box.

1.  HC-SR04 ultrasonic sensor is linked with P2 and P1, therefore set to trig P2 echo P1 then click triangle button to select“cm”

![](media/339bce47d46552771f842964e5e37c2d.png)

(4)

1.  Enter“Basic”→“pause (ms) 100”

2.  Put it into“forever”and set to 50ms.

![](media/74c846a39ee2161f52c2ece1fa0bf3cf.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5)

1.  Go to“Advanced”→“Serial”→“serial write value“x”=0”.

2.  Keep it into“forever”.

3.  Click“Variables”to drag“distance”into“0”box .

4.  Change“x”into“distance(cm)”.

![](media/702bd520bc24b68aab4f9b9687175f01.png)

Complete Program：

| ![](media/1a4bd8bee5d497a66c97ce2a7f7ca3be.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Set distance to“ping trig P2 echo P1 unit cm”<br /><br />Delay in 50ms<br /><br />Serial write value “distance(cm)”=distance |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/608a85e316b4358851731bb8376238f4.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/b0bf15cc054044a7f072d0007783e19a.png)

Wire up through the connection diagram, upload code, power on and open CoolTerm, click Options to select SerialPort. Set COM port and baud rate is 115200(the baud rate of USB serial communication of Micro:bit is 115200 through the test). Click “OK” and“Connect”. The result is shown on serial monitor.

![](media/c88ce484a935653373de5cdf72c727ed.png)

**Code 3：**

Hook up through the Wiring Graph. The pins of HC-SR04 ultrasonic sensor are linked with P2 and P1. The pins of OLED are connected to P20 and P19. Link computer with Micro:bit board. Then enable the online programming tool to design the code.

(1)A. Click“OLED”→“initialize OLED with width 128 height 64”

B. Place it into“on start”block.

![](media/4b53c2b1cfd758f67b46624b7b8669fd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2) 

![](media/3930e9978ece0fc9d69b2a302fb29f6f.png)

A. Enter“Led”module→“more”→“led enable false”

B. Move“led enable false”below the block “initialize OLED with width 128 height 64”

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(3)

![](media/7bf5d1e8a1c66af11abb89680aaaed78.png)

1.  Tap“OLED”→“clear OLED display”

2.  Drag it into“forever”block

(4)

![](media/358b7f52e2c87c5fecaa182796b7d50d.png)

1.  Click“Variables”→“Make a Variable...”→“New variable name：”

2.  Enter“distance”in the dialog box and click“OK”. Then the variable“distance”is created and move out“set distance to 0”
    
3.  Lay down it into“forever”block

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5)

1.  Go to“Sonar”→“ping trig P0 echo P0 unit us”

2.  Put it down into“0”box

3.  HC-SR04 ultrasonic sensor is linked with P2 and P1, so set to “Ping trig P2 echo P1 unit cm”
    
4.  Change“us”into“cm”

![](media/72f95192846bd50983209eb3efd6be4a.png)

(6)

1.  Click“OLED”→“show number 0”

2.  Put it into“forever”

3.  Tap“Variables”→“distance”, and place it into “0” box of “show number 0”

![](media/5cf65d86d47a603116ec1079032669d7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(7)

1.  Enter“OLED”→“show string“ ””

2.  Place it into“forever”and input“cm”

![](media/d862fd9c932663a772769792f3998d13.png)

(8)

1.  Click“Basic”→“pause (ms) 100”

2.  Put it into“forever”, set to 200ms

![](media/027b89ad4b132a439fcfd2ef5722f134.png)

Complete Program：

| ![](media/a02621ad719152505f6419419cb28f5a.png) | “on start”: command block runs once to start program.<br /><br />Initialize OLED, 128 width and 64 in height<br /><br />Turn off LED dot matrix<br /><br /><br />The program under the block “forever” runs cyclically.<br /><br />Clear OLED screen<br /><br />Set distance to“ping trig P2 echo P1 unit cm”<br />OLED shows“distance value”<br /><br />Display character string<br /><br />Delay in 200ms |
| ----------------------------------------------- | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/a7dafb5f7f92690573a1525f79b5ccb0.png)

Then click drop-down triangle button and select“Python”to see the Python language code:

![](media/83686fe33decc009647350b9cdee3f9b.png)

**6. Test Results：**

Wire up through the connection diagram, upload the program and plug in power. OLED shows the distance from obstacle detected by ultrasonic sensor.

### Project 48：Smart Home

1.  **Description：**

![](media/272252007e61c55c60566040557787a7.jpeg)

Smart home is the trend in the future. Imagine that you lie on the sofa and control everything with an ordinary cellphone. So 

incredible! The curtains can be switched automatically, the water temperature can turn into temperate mode when you’re ready 

for a cozy bath. Alternatively, you could obtain the distinct light scene in your home. I believe that you can’t wait to live life like this.

In this lesson, we simulate the smart home to make a DIY smart home kit with Arduino software. Follow us to enjoy the joy of DIY!

2.  **Components List:**

| ![img](media/wps632.jpg)         | ![img](media/wps633.jpg)             | ![img](media/wps634.jpg)        | ![img](media/wps635.jpg) |
| -------------------------------- | ------------------------------------ | ------------------------------- | ------------------------ |
| Micro:bit *1                     | keyestudio Micro:bit T Type Shield*1 | S8050 Triode*1                  | 220ΩResistor*1           |
| ![img](media/wps636.jpg)         | ![img](media/wps637.jpg)             | ![img](media/wps638.jpg)        | ![img](media/wps639.jpg) |
| Keyestudio OLED Display Module*1 | Keyestudio 1-channel Relay Module*1  | Keyestudio Micro Servo Motor *1 | 2.4KΩResistor*1          |
| ![img](media/wps640.png)         | ![img](media/wps641.jpg)             | ![img](media/wps642.png)        | ![img](media/wps643.png) |
| DC motor*1                       | F-M dupont lines                     | 6 AA Battery Holder*1           | Photoresistor*1          |
| ![img](media/wps644.jpg)         | ![img](media/wps645.jpg)             | ![img](media/wps646.jpg)        | ![img](media/wps647.jpg) |
| IR Receiver*1                    | IR remote Control*1                  | Fan *1                          | AA Battery Holder*6      |
| ![img](media/wps648.png)         | ![img](media/wps649.png)             | ![img](media/wps650.jpg)        | ![img](media/wps651.jpg) |
| Red LED*1                        | PIR motion Sensor*1                  | Breadboard*1                    | Passive Buzzer*1         |
| ![img](media/wps652.jpg)         | ![img](media/wps653.jpg)             | ![img](media/wps654.png)        | ![img](media/wps655.jpg) |
| 10KΩ Resistor*1                  | LM35DZ Temperature sensor*1          | 51ΩResistor*1                   | Breadboard wire          |
| ![img](media/wps656.png)         | ![img](media/wps657.jpg)             |                                 |                          |
| Micro USB cable*1                | Keyestudio Breadboard Power module*1 |                                 |                          |

3.  **Schematic Diagram：**

**(Special note: both ends of breadboard specialized power module must be inserted into breadboard, and dial the DIP switch to +3V on power module )**

<img src="media/7be79d9ebee19ab8e92ae58c8b4b8d4d.png" style="zoom:50%;" />

4. **Wiring Graph：**


**(Special note: both ends of breadboard specialized power module must be inserted into breadboard, and dial the DIP switch to +3V on power module )**

![](media/69c3d2e0c86f147ac2b9baab759022a6.png)

5.  **Test Code：**

Hook up through the Wiring Graph, Link computer with Micro:bit board. Then enable the online programming tool to design the code.

We’ve added the library files of IR receiver and OLED module, refer to project 39 and 31.

(1)

![](media/6913ada039f9614ed8db3abec6371b3b.png)

1.  Click “Led”→“more”→“led enable false”

2.  Put it into“on start”

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(2)

![](media/9cee12f5f20911a715d47cfe17e125a8.png)

1.  Enter“Advanced”→“Pins”→“servo write pin P0 to 180”

2.  Keep it into“forever”

3.  Servo motor is connected to P11, therefore, click the triangle button to select “P11(write only)”, change 180 into 0.

(3)

A. Click “OLED”and drag out“initialize OLED with width 128 height 64”

B. Lay down it into“on start”

![](media/7a1a10816009148716f1d9fc4f98a1c0.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(4)

1.  Click “Variables”→“Make a Variable...”→“New variable name：”

2.  Input“open_door1”and click“OK”. Then variable“open_door1”is generated.

3.  Enter“Variables to drag“set open_door1 to 0”into“on start”block;

4.  Click“Logic”to drag“false”into“0”box of“set open_door1 to 0”.

![](media/9ffaff270006477c1736e0d605ed5d7f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(5)

Click “IR Remote”→“connect IR receiver at P0”

Put it into“on start”

IR receiver is linked with P10, click the triangle button to select P10.

![](media/e852ee73e17eccdfcd5b914bb3e4de85.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(6)

A. Click“Variables”→“Make a Variable...”→“New variable name：”

Type“val”in the blank box and click“OK”, the variable “val”is created.

Drag“set val to 0”from“Variables”into“on start”

![](media/35caa45846e93fdfa2c62d51e0d270ec.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(7)A. Copy“set val to 0”once and leave it into“forever”;

B. Go to“IR Remote”→“IR button”

C. Drag it into“0”box of“set val to 0”

![](media/d73ac664c908095469d1723333d5e86e.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(8)

We generate the variable“light intensity”in same way.

1.  Click “Variables” to move “set light intensity to 0” into “forever” block.

2.  Go to“Advanced”→“Pins”→“analog read pin P0”

3.  Place it into“0”box

4.  The photoresistor is connected to P1, so click the triangle to set to P1.

![](media/28f229772913adc4fe9c50bcdbac2808.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(9)

1.  Go to“Logic”→“if.true..then...else”

2.  Place it into“forever”block

3.  Drag“=”into“true”box.

![](media/5c8c54d326c184705c0ffb4f74bff652.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(10)

1.  Enter“Variables”→“light intensity”

2.  Move it to the left “0” box of “=”, click the triangle button to set“\>”. Change 0 into 800

![](media/127a17124d965a5b247547e25035130d.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(11)

1.  Go to“Logic”→“if..true.then”

2.  Place it below the“if..\>800..then”block

3.  Drag“=”into “true” box

4.  Click“Variables”to get“val”and leave it to the left “0”box. Alter 0 into 70.

![](media/dea6934e5f26046867d9a677e01361be.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(11)A. Click“Advanced”→“Pins”→“digital write pin P0 to 0”

B. Keep it beneath the“if val=70 then”block

C. Red LED is attached to P8, so click the triangle button to set P8, change 0 into 1.

![](media/c9cbe389a6e82722e80c085150a49053.png)

(12)

A. Enter“Basic”→“pause (ms) 100”

B. Leave it beneath the“digital write P8 to 1”block, set to 5000ms

C. Duplicate“digital write P8 to 1”once and remain it below the “pause (ms) 5000”block, change 1 into 0

![](media/7388caf5621c87dfdc3de5d4a4e47860.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(13) Copy“digital write pin P8 to 0”once and move it into“else” block

![](media/79a027103e4718d297bde1dc4f8cfe08.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(14)

1.  Then we produce the variable“temp”in same way.

2.  Click“Variables”to get“set temp to 0”and leave it into“forever”block.

3.  Click“Math”→“÷”block

4.  Move it“0”box of“set temp to 0”

5.  Tap“Math”→“\*”，and put it into the left“0”box of“÷”block

    ![](media/d35b574f560a3c8fdd00063f40cb422f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(15)Tap“Advanced”→”Pins”→“analog read pin P0”

1.  Put it at the second “0” box

2.  LM35DZ sensor is connected P4, therefore click the triangle button to set P4.
    
3.  Change the first 0 into 300, the third 0 into 1023

![](media/dc38d5535dfc13f8afcae198a3eee2f9.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(16)

1.  Tap“OLED”→“clear OLED display”

2.  Place it into“forever” block

![](media/8c148291d6e85abb751aa159afc7d54b.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(17)

1.  Click“OLED”→“show (without newline) string“ ””

2.  Move it into“forever”, and input “Temperature”character.

3.  Drag“show (without newline) number 0”into“forever”.

4.  Click“Variables”to get block“temp”

5.  Leave it into the 0 box of“show (without newline) number 0”

![](media/b67e3b819656f87c0c6efccbfba84e8a.png)

(18)

1.  Click“Basic”→“pause (ms) 100”

2.  Place it into“forever”and delay in 500ms.

3.  Tap“Logic”→“if..true....then...else”

4.  Move it into below“pause (ms) 500”and drag“=”block into“true”box.

![](media/4a58ad925d0ba6d25bcf60f4afc69c18.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(19)

1.  Click“Variables”→“temp”

2.  Drag it into the left 0 of“=”block

3.  Click the triangle button to select“\>”and change 0 into 30

![](media/80f6fcc5bf90e05d9f1bb5011ad48ba6.png)

(20)

1.  Tap“Music”→“play tone Middle C for 1 beat”

2.  Place it below the block“if temp\>30 then”block

3.  Change“Middle C”into “High C”, set to 1/4 beat.

![](media/b37bf0ec73ae80476984e6465b8d62f7.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(21)

1.  Copy code string![](media/53654dae8dfe83fe826c6ba336d48c15.png) once and alter 7 into 68, relay is linked with P6, so change P8 into P6.
    
2.  Replicate“pause (ms)5000”block once and leave it below “digital..P6..0”block

![](media/648ff0e80377ac656710a30d6b4492cd.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(22) Copy“digital...P6 to 0”once and put into“else” block

![](media/57c7b7d85aacc6799b944d13bbd198d9.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(23)

1.  Click “Logic”→“if..true..then...else”

2.  Place it into“forever”and drag “=”into “true” box

![](media/0790e9770e5b896613bd2b7f6c1a1734.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(24)

1.  Click“Advanced”→”Pins”→“digital read pin P0”

2.  Move it into the left“0”box

3.  PIR motion sensor is linked with P2, so click the triangle button to select P2, change 0 into 1.

![](media/3ddf2b799f87d0bce29d681664aea75c.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(25)A. Click“OLED”→“insert newline”

B. Duplicate 2 times and keep them below the“digital .. P2=1..then”

C. Then find out“show (without newline) string“ ””and move it below“insert newline”

D. Enter character“somebody”character.

![](media/4fcc871552611f29808baadcd4555fce.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(26)

1.  Click“Logic”→“if.true..then”

2.  Keep it below the block“show(without newline)string “somebody”

3.  Enter“Variables”→“val”

4.  Leave it to the left “0”box and set to 67

![](media/142ea194c5a2930fd614df447a96b465.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(27)

1.  Enter “Variables”→“set temp to 0”

2.  Lay down it below the“if val=67 then”and click the triangle button to set “open_door1”
    
3.  Enter“Logic”to get“true”block and move it into “0” box of “set open_door1 to 0”block.

![](media/ad7005f1c5ef86df7ecb4300655e591f.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(28)

1.  Click “Logic”→”if...true..then”block

2.  Go to“Variables”to move “=”block into “true” box;

3.  Copy“open_door1”and“true”blocks once and respectively leave them at two sides of “=’

![](media/c6caa55d988a947dfca7d8ffed84b579.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(29)

1.  Enter“Advanced”→“Pins”→“servo write pin P0 to 180”

2.  Leave it below the block “if...open_door=...then”block;

3.  Servo motor is linked with P11, and click the drop-down triangle button to choose “P11(write only)”, then change 180 into 120.

![](media/7e8d8da7db6ad2dc58c185f4e30ec4aa.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(30)

1.  Go to“Basic”to move block“pause (ms) 100”beneath the block“servo...120”

2.  Cop“set open to true”once and click the drop-down triangle button to set“false”
    
3.  Then keep“set open to true”beneath“pause (ms) 100”block.

![](media/4663f2d44bccc28a0a20aa8a48e5a068.png)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

(31)

1.  Duplicate code string![](media/db270fc60d17934afae2310bb813534c.png)and ![](media/f3ad5a81446a520422cbf743371ad0fe.png)once
    
2.  Combine this two code strings together.

3.  Drag into“else”block，then alter“somebody”into“nobody”and 120 into 0

![](media/ec4542de0cab9d6e29bdab8cc8f66cb3.png)

Complete Program：

| ![](media/7d13981f4d74d450aa61199949386c17.png)<br />![](media/8380b2a288e546b0a13944230d4dc078.png)<br />![](media/9111eaa54148977f40ecd95a927ad9ed.png) | “on start”: command block runs once to start program.<br /><br />Turn off LED dot matrix<br />Rotate servo motor to 0°<br />Initialize OLED, 128 in width, 64 in height<br />Set open1 to false<br />Connect IR receiver to P10<br />Set val to 0<br /><br />The program under the block “forever” runs cyclically.<br /><br />Set val to IR button<br />Set light intensity to analog signal read by P1<br /><br />When“light intensity>800”is met, <br />the next program will be executed<br /><br />When val=70, <br />the next program will be executed<br /><br />Set P8 to high level(1), light up red LED<br />Delay in 5000ms<br />Set P8 to low level(1), red LED goes off<br /><br />When “light intensity>800”isn’t met, <br />the program under the “else” block will be executed<br /><br />Set P8 to low level(1), red LED goes off<br />Set temp to“300*integer read by P4÷1023<br />Clear OLED screen<br /><br />OLED shows “Temperature:”<br />OLED shows temperature<br />Delay in 500ms<br /><br />When“temp>30”is met, <br />the next program will be executed“High C”last for 1/4beat<br /><br />When“val=68”is met, <br />the next program will be executed<br /><br />Set P6 to high level(1), relay is connected<br />Delay in 5000ms<br /><br />Set P6 to low level(1), relay is disconnected<br />Delay in 5000ms<br /><br />When“temp>30”isn’t met, <br />the program under the “else” block will be executed<br /><br />Set P6 to low level(1), relay is disconnected<br /><br />When the level read by P2 is 1, <br />the next program will be executed.<br /><br />OLED inserts newline<br />OLED inserts newline<br />OLED shows “somebody”<br /><br />When“val=67” is met, <br />the next program will be executed.<br /><br />Set open1 to true<br /><br />When“open1=true”，<br />the next program will be executed.<br /><br />Rotate servo motor to 120°<br />Delay in 100ms<br /><br />Set open1 to false<br /><br />When the level read by P2 isn’t equal to 1, <br />the program under the “else” block will be executed<br /><br />OLED inserts newline<br />OLED inserts newline<br />OLED shows “nobody”<br /><br />Rotate servo motor to 0°<br />Delay in 100ms |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                 |                                                 |

Click“JavaScript", you will view the corresponding JavaScript code:

![](media/85f6f8831f3d930168d8d8458f7f0b80.png)

![](media/532b630a2e806d2addf5bd98f2034e81.png)

Then click drop-down triangle button to select“Python”to see the Python language code:

![](media/4805b88890a0b4c31015ba4fbbebfbb5.png)

![](media/4005356de7f5c72b2427680cde365c9a.png)

6.  **Test Results：**

Wire up through the connection diagram, upload code, power on.

OLED display module will display the ambient temperature and if there is person around. When the light intensity is weak, and press ![img](media/wps491.jpg)on IR remote control，Red LED will be on.

When the temperature is greater than 30℃，passive Buzzer rings and press![img](media/wps492.jpg)，relay drive motor rotates

When PIR motion sensor detects people around，OLED display module shows“somebody”, then press![img](media/wps493.jpg)，servo motor rotates from 0° to 120°；on the contrary,“nobody”appears up，and servo motor rotates from120° to 0°.



## 7. Resources

1\. Keyestudio official website:

<http://www.keyestudio.com/>

2\. Download program code, CoolTerm and driver:

https://fs.keyestudio.com/KS4007-4008

3\. CoolTerm program:

<https://freeware.the-meiers.org/>

4.Micro:bit online programming:

[https://makecode.Micro:bit.org/](https://makecode.microbit.org/)

